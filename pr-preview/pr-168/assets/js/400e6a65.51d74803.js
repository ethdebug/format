"use strict";(globalThis.webpackChunk_ethdebug_format_web=globalThis.webpackChunk_ethdebug_format_web||[]).push([[5070],{97629(e,r,n){n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"getting-started/for-compiler-authors","title":"For compiler authors","description":"You\'re building a compiler or toolchain that produces EVM bytecode. Here\'s how","source":"@site/docs/getting-started/for-compiler-authors.mdx","sourceDirName":"getting-started","slug":"/getting-started/for-compiler-authors","permalink":"/format/pr-preview/pr-168/docs/getting-started/for-compiler-authors","draft":false,"unlisted":false,"editUrl":"https://github.com/ethdebug/format/tree/main/packages/web/docs/getting-started/for-compiler-authors.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"For debugger authors","permalink":"/format/pr-preview/pr-168/docs/getting-started/for-debugger-authors"},"next":{"title":"Overview","permalink":"/format/pr-preview/pr-168/docs/concepts/"}}');var s=n(31085),t=n(71184);const o={sidebar_position:3},a="For compiler authors",c={},l=[{value:"What you need to emit",id:"what-you-need-to-emit",level:2},{value:"Quick example: Describing a type",id:"quick-example-describing-a-type",level:2},{value:"Quick example: Describing a storage variable",id:"quick-example-describing-a-storage-variable",level:2},{value:"Integration approach",id:"integration-approach",level:2},{value:"Go deeper",id:"go-deeper",level:2},{value:"Explore by topic",id:"explore-by-topic",level:3}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"for-compiler-authors",children:"For compiler authors"})}),"\n",(0,s.jsx)(r.p,{children:"You're building a compiler or toolchain that produces EVM bytecode. Here's how\nto emit ethdebug/format data so debuggers can provide rich debugging\nexperiences for your users."}),"\n",(0,s.jsx)(r.h2,{id:"what-you-need-to-emit",children:"What you need to emit"}),"\n",(0,s.jsx)(r.p,{children:"ethdebug/format defines several kinds of debug information:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Type information"})," \u2014 Describe the types in your language so debuggers can\ndecode raw bytes into meaningful values"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Pointer information"})," \u2014 Describe where variables are stored at runtime,\nincluding dynamic locations computed from other values"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Program information"})," \u2014 Describe what's in scope at each bytecode\ninstruction, mapping bytecode back to source code"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"quick-example-describing-a-type",children:"Quick example: Describing a type"}),"\n",(0,s.jsxs)(r.p,{children:["Here's how to describe a simple ",(0,s.jsx)(r.code,{children:"uint256"}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "kind": "uint",\n  "bits": 256\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:"A storage mapping from addresses to balances:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "kind": "mapping",\n  "key": { "kind": "address" },\n  "value": { "kind": "uint", "bits": 256 }\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"quick-example-describing-a-storage-variable",children:"Quick example: Describing a storage variable"}),"\n",(0,s.jsxs)(r.p,{children:["A pointer tells debuggers where to find a variable's value. For a ",(0,s.jsx)(r.code,{children:"uint256"}),"\nat storage slot 0:"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "location": "storage",\n  "slot": "0x0",\n  "length": 32\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:["For a dynamic array where the length is at slot 2 and elements start at\n",(0,s.jsx)(r.code,{children:"keccak256(2)"}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:'{\n  "collection": "list",\n  "count": {\n    "location": "storage",\n    "slot": "0x2",\n    "length": 32\n  },\n  "each": "i",\n  "from": {\n    "location": "storage",\n    "slot": {\n      "$sum": [{ "keccak256": ["0x0000...0002"] }, "$i"]\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"integration-approach",children:"Integration approach"}),"\n",(0,s.jsx)(r.p,{children:"Most compilers can add ethdebug/format support incrementally:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Start with types"})," \u2014 Emit type definitions for your language's data\nstructures. This is often the easiest starting point."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Add storage pointers"})," \u2014 Describe where storage variables live. Many\nvariables have static locations that are simple to emit."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Add memory/stack pointers"})," \u2014 Describe temporary values. These often\nrequire tracking allocation during code generation."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Add program information"})," \u2014 Emit source mappings and scope information.\nThis typically requires the most compiler changes."]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"go-deeper",children:"Go deeper"}),"\n",(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col col--6",children:(0,s.jsxs)("div",{className:"card margin-bottom--md",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"Compiler implementation guide"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsx)(r.p,{children:"Detailed guidance on emitting ethdebug/format from your compiler."})}),(0,s.jsx)("div",{className:"card__footer",children:(0,s.jsx)("a",{className:"button button--secondary button--block",href:"/docs/implementation-guides/compiler",children:(0,s.jsx)(r.p,{children:"Compiler guides \u2192"})})})]})}),(0,s.jsx)("div",{className:"col col--6",children:(0,s.jsxs)("div",{className:"card margin-bottom--md",children:[(0,s.jsx)("div",{className:"card__header",children:(0,s.jsx)("h4",{children:"Specification"})}),(0,s.jsx)("div",{className:"card__body",children:(0,s.jsx)(r.p,{children:"Formal schema definitions for all ethdebug/format structures."})}),(0,s.jsx)("div",{className:"card__footer",children:(0,s.jsx)("a",{className:"button button--secondary button--block",href:"/spec/overview",children:(0,s.jsx)(r.p,{children:"Read the spec \u2192"})})})]})})]}),"\n",(0,s.jsx)(r.h3,{id:"explore-by-topic",children:"Explore by topic"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.a,{href:"/docs/types",children:"Types"})})," \u2014 Full documentation on type representations"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.a,{href:"/docs/pointers",children:"Pointers"})})," \u2014 Full documentation on pointer definitions"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.a,{href:"/docs/programs",children:"Programs"})})," \u2014 Full documentation on program annotations"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.a,{href:"/docs/examples/bug-playground",children:"BUG Playground"})})," \u2014 See a working\ncompiler that emits ethdebug/format"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);