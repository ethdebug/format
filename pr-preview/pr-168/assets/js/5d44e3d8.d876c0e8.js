"use strict";(globalThis.webpackChunk_ethdebug_format_web=globalThis.webpackChunk_ethdebug_format_web||[]).push([[6404],{54942(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"implementation-guides/compiler/index","title":"Compiler implementation guides","description":"Guides for implementing ethdebug/format support in compilers.","source":"@site/docs/implementation-guides/compiler/index.mdx","sourceDirName":"implementation-guides/compiler","slug":"/implementation-guides/compiler/","permalink":"/format/pr-preview/pr-168/docs/implementation-guides/compiler/","draft":false,"unlisted":false,"editUrl":"https://github.com/ethdebug/format/tree/main/packages/web/docs/implementation-guides/compiler/index.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Compiler Guides"},"sidebar":"docsSidebar","previous":{"title":"Hooking up Jest","permalink":"/format/pr-preview/pr-168/docs/implementation-guides/pointers/testing/jest"},"next":{"title":"Case Study: BUG","permalink":"/format/pr-preview/pr-168/docs/implementation-guides/compiler/case-study-bug"}}');var i=r(31085),t=r(71184);const o={sidebar_position:1,sidebar_label:"Compiler Guides"},a="Compiler implementation guides",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Recommended approach",id:"recommended-approach",level:2},{value:"Output structure",id:"output-structure",level:2},{value:"Case study",id:"case-study",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"compiler-implementation-guides",children:"Compiler implementation guides"})}),"\n",(0,i.jsxs)(n.p,{children:["Guides for implementing ",(0,i.jsx)(n.strong,{children:"ethdebug/format"})," support in compilers."]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["Compilers that want to support ",(0,i.jsx)(n.strong,{children:"ethdebug/format"})," need to emit\nseveral kinds of debug information alongside bytecode:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type information"})," \u2014 Describe the types used in the program\n(see ",(0,i.jsx)(n.a,{href:"/docs/concepts/types",children:"Types"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Pointer information"})," \u2014 Describe where variables are stored at\nruntime (see ",(0,i.jsx)(n.a,{href:"/docs/concepts/pointers",children:"Pointers"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Program information"})," \u2014 Map each bytecode instruction back to\nsource-level context (see ",(0,i.jsx)(n.a,{href:"/docs/concepts/programs",children:"Programs"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Info/resources"})," \u2014 Bundle everything together with compilation\nmetadata (see ",(0,i.jsx)(n.a,{href:"/docs/concepts/info",children:"Info"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"recommended-approach",children:"Recommended approach"}),"\n",(0,i.jsx)(n.p,{children:"Most compilers can add support incrementally:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Start with types."})," Converting your compiler's internal type\nrepresentations to ",(0,i.jsx)(n.strong,{children:"ethdebug/format"})," types is usually the most\nstraightforward step."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add storage pointers."})," Many storage variables have statically\nknown locations, making them a natural next step."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add memory/stack pointers."})," These often require tracking\nallocations during code generation."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add program annotations."})," Source mappings and variable scoping\nat each instruction typically requires the deepest compiler\nintegration."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"output-structure",children:"Output structure"}),"\n",(0,i.jsxs)(n.p,{children:["Compilers should emit an\n",(0,i.jsx)(n.a,{href:"/docs/core-schemas/info/resources",children:(0,i.jsx)(n.strong,{children:"ethdebug/format/info/resources"})}),"\nobject containing shared resources (",(0,i.jsx)(n.code,{children:"compilation"}),", ",(0,i.jsx)(n.code,{children:"types"}),",\n",(0,i.jsx)(n.code,{children:"pointers"}),"), plus individual\n",(0,i.jsx)(n.a,{href:"/docs/core-schemas/programs",children:(0,i.jsx)(n.strong,{children:"program"})})," objects alongside each\nbytecode artifact. See the\n",(0,i.jsx)(n.a,{href:"/docs/concepts/info",children:"Info concepts page"})," for a sketch of how this\nfits into compiler JSON output."]}),"\n",(0,i.jsx)(n.h2,{id:"case-study",children:"Case study"}),"\n",(0,i.jsx)(n.p,{children:"The BUG compiler is a small reference implementation that\ndemonstrates the full integration:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"./case-study-bug",children:"Case Study: BUG"})})," \u2014 Walkthrough of how the\nBUG compiler generates types, pointers, and program annotations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/examples/bug-playground",children:"BUG Playground"})})," \u2014 Interactive\ndemo where you can compile BUG code and inspect the debug output"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);