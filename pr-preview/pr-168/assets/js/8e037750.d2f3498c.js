"use strict";(globalThis.webpackChunk_ethdebug_format_web=globalThis.webpackChunk_ethdebug_format_web||[]).push([[6412],{11648(e,n,t){t.r(n),t.d(n,{default:()=>d});t(14041);var s=t(84872),r=t.n(s),i=t(38397),o=t(73584),a=t(40665),c=t(66010),l=t(77709),h=t(31085);function p({schemaWithoutUnnecessaryComposition:e,unnecessaryCompositionKeyword:n,unnecessarilyComposedSchema:t}){const s=(0,i.useJSVOptionsContext)(),{schemaIndex:r}=(0,o.wQ)(),p=t,m=e,{documentation:f,semantics:u}=function(e){if("boolean"==typeof e)return{documentation:{},semantics:e};const{title:n,description:t,examples:s,default:r,[o._K]:i,...a}=e,c=Object.entries({title:n,description:t,examples:s,default:r}).filter((e=>void 0!==e[1])).map((([e,n])=>({[e]:n}))).reduce(((e,n)=>({...e,...n})),{});return{documentation:c,semantics:a}}(m);if(0===Object.keys(u).length||1===Object.keys(u).length&&"type"in u&&"object"==typeof p&&"type"in p&&("string"==typeof u.type&&u.type===p.type||u.type instanceof Array&&p.type instanceof Array&&u.type.length===p.type.length&&u.type.every((e=>p.type.includes(e))))){if(1===Object.keys(f).length&&"title"in f)return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(i.SchemaHierarchyComponent,{innerJsonPointer:`/${n}/0`,children:(0,h.jsx)(d,{schema:t})})});const{description:e}=f;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.QualifierMessages,{schema:f,options:s}),e&&(0,h.jsx)(l.CreateDescription,{description:e}),(0,h.jsx)("hr",{}),(0,h.jsx)(i.SchemaHierarchyComponent,{innerJsonPointer:`/${n}/0`,children:(0,h.jsx)(d,{schema:t})})]})}const{[o._K]:y}=p;if(y&&y in r){const{href:e,title:n=`${y.startsWith("schema:")?y.slice(7):y} schema`}=r[y];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:"badge badge--info",children:"extensions"}),"\xa0 This schema extends the ",(0,h.jsx)(a.A,{to:e,children:n}),".",(0,h.jsx)("p",{children:(0,h.jsx)(d,{schema:m})})]})}return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:"badge badge--info",children:"extensions"}),"\xa0 These extensions apply to the base schema below:",(0,h.jsx)("p",{children:(0,h.jsx)(d,{schema:m})}),(0,h.jsx)(Collapsible,{summary:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("strong",{children:(0,h.jsx)(c.GenerateFriendlyName,{schema:p})}),"\xa0",(0,h.jsx)("span",{className:"badge badge--info",children:"base schema"})]}),detailsProps:{open:!0},children:(0,h.jsx)(i.SchemaHierarchyComponent,{innerJsonPointer:`/${n}/0`,children:(0,h.jsx)(d,{schema:t})})})]})}function d(e){const{level:n}=(0,i.useSchemaHierarchyContext)(),{schemaIndex:t}=(0,o.wQ)(),{schema:s,...c}=e,{[o._K]:l}=s;if(l&&l in t&&n>0){const{href:e,title:n=`${l.startsWith("schema:")?l.slice(7):l} schema`}=t[l];return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("p",{children:["See ",(0,h.jsx)(a.A,{to:e,children:n})," documentation."]})})}const d=function(e){if("boolean"==typeof e)return;const n=["allOf","oneOf","anyOf"].filter((n=>n in e&&1===(e[n]||[]).length));if(1!==n.length)return;const[t]=n,{[t]:s,...r}=e,[i]=s;return{unnecessarilyComposedSchema:i,unnecessaryCompositionKeyword:t,schemaWithoutUnnecessaryComposition:r}}(s);return d?(0,h.jsx)(p,{...d}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(r(),{schema:s,...c})})}},59878(e,n,t){t.r(n),t.d(n,{default:()=>u});t(14041);var s=t(60728),r=t.n(s),i=t(53263),o=t(73580),a=t(38397),c=t(32049),l=t(31085);function h({propertyName:e,schemasByConst:n}){const{jsonPointer:t,level:s}=(0,a.useSchemaHierarchyContext)();return(0,l.jsxs)("div",{children:[(0,l.jsx)("hr",{}),(0,l.jsx)("span",{className:"badge badge--info",children:"polymorphic discriminator"}),"\xa0 The value of the ",(0,l.jsx)("strong",{children:e})," field determines which sub-schema applies:",(0,l.jsx)(i.default,{children:Object.entries(n).map((([e,{schema:n,index:r}])=>(0,l.jsx)(o.default,{label:e,value:e,children:(0,l.jsx)(a.SchemaHierarchyContextProvider,{value:{level:s+1,jsonPointer:`${t}/allOf/${r}/then`},children:(0,l.jsx)(c.CreateNodes,{schema:n})})},e)))})]})}function p({propertyNames:e,schemasByPropertyName:n}){const{jsonPointer:t,level:s}=(0,a.useSchemaHierarchyContext)();return(0,l.jsxs)("div",{children:[(0,l.jsx)("hr",{}),(0,l.jsx)("span",{className:"badge badge--info",children:"mutually-exclusive required properties"}),"\xa0 This object must specify exactly one of the following:",(0,l.jsx)("ul",{children:e.map(((e,n)=>(0,l.jsx)("li",{children:(0,l.jsx)("code",{children:e})},n)))}),"Depending on which required property is used, one of the following sub-schemas applies:",(0,l.jsx)(i.default,{children:Object.entries(n).map((([e,{schema:n,index:r}])=>(0,l.jsx)(o.default,{label:"title"in n&&"string"==typeof n.title&&n.title||e,value:e,children:(0,l.jsx)(a.SchemaHierarchyContextProvider,{value:{level:s+1,jsonPointer:`${t}/allOf/${r+1}/then`},children:(0,l.jsx)(c.CreateNodes,{schema:n})})},e)))})]})}function d({propertyNames:e,schemasByPropertyName:n}){const{jsonPointer:t,level:s}=(0,a.useSchemaHierarchyContext)();return(0,l.jsxs)("div",{children:[(0,l.jsx)("hr",{}),(0,l.jsx)("span",{className:"badge badge--info",children:"independently-inclusive required properties"}),"\xa0 This object may specify any of the following:",(0,l.jsx)("ul",{children:e.map(((e,n)=>(0,l.jsx)("li",{children:(0,l.jsx)("code",{children:e})},n)))}),"Depending on which required properties are used, the following corresponding sub-schemas may apply:",(0,l.jsx)(i.default,{children:Object.entries(n).map((([e,{schema:n,index:r}])=>(0,l.jsx)(o.default,{label:"title"in n&&"string"==typeof n.title&&n.title||e,value:e,children:(0,l.jsx)(a.SchemaHierarchyContextProvider,{value:{level:s+1,jsonPointer:`${t}/allOf/${r+1}/then`},children:(0,l.jsx)(c.CreateNodes,{schema:n})})},e)))})]})}const m=e=>"boolean"!=typeof e&&"if"in e&&"then"in e,f=e=>"boolean"!=typeof e&&"required"in e&&1===e.required?.length;function u(e){const{schema:n}=e,t=function(e){const{allOf:n}=e;if(!n.every((e=>{if("boolean"==typeof e)return!1;const{title:n,description:t,if:s,then:r,...i}=e;return!!s&&!!r&&0===Object.keys(i).length})))return;if(!n.every((e=>{const{if:n}=e;if("boolean"==typeof n||!("properties"in n)||!n.properties)return!1;const t=n.properties;if(1!==Object.keys(t).length)return!1;const s=t[Object.keys(t)[0]];return"object"==typeof s&&"const"in s&&"string"==typeof s.const&&!!s.const})))return;const t=Object.keys(n[0].if.properties)[0],s=n.map((({if:e,then:n},s)=>({[e.properties[t].const]:{schema:n,index:s}}))).reduce(((e,n)=>({...e,...n})),{});return Object.keys(s).length===n.length?{propertyName:t,schemasByConst:s}:void 0}(n);if(t)return(0,l.jsx)(h,{...t});const s=function(e){const{allOf:n}=e,[t,...s]=n;if("boolean"==typeof t||!("oneOf"in t))return;const{oneOf:r}=t;if(!r||!r.every((e=>"object"==typeof e&&"required"in e&&e.required instanceof Array&&1===e.required.length)))return;const i=r.map((({required:[e]})=>e));if(s.length!==i.length)return;if(!s.every((e=>{if("boolean"==typeof e)return!1;const{title:n,description:t,if:s,then:r,...i}=e;return!!s&&!!r&&0===Object.keys(i).length})))return;if(!s.every((e=>{const{if:n}=e;if("boolean"==typeof n||!("required"in n))return!1;const{required:t}=n;if(!t||1!==t.length)return!1;const[s]=t;return"string"==typeof s&&!!s})))return;return{propertyNames:i,schemasByPropertyName:s.map((({if:{required:[e]},then:n},t)=>({[e]:{schema:n,index:t}}))).reduce(((e,n)=>({...e,...n})),{})}}(n);if(s)return(0,l.jsx)(p,{...s});const i=function(e){const{allOf:n}=e;if(!n.every(m))return;const t=n.map((({if:e})=>e));if(!t.every(f))return;const s=[...new Set(t.map((({required:[e]})=>e)))];return s.length!==t.length?void console.debug("property names are not unique"):{propertyNames:s,schemasByPropertyName:n.map((({if:{required:[e]},then:n},t)=>({[e]:{schema:n,index:t}}))).reduce(((e,n)=>({...e,...n})),{})}}(n);return i?(0,l.jsx)(d,{...i}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r(),{...e})})}},64781(e,n,t){t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>h,default:()=>f,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"type/concepts","title":"Key concepts","description":"The ethdebug/format/type schema includes definitions for a few","source":"@site/spec/type/concepts.mdx","sourceDirName":"type","slug":"/type/concepts","permalink":"/format/pr-preview/pr-168/spec/type/concepts","draft":false,"unlisted":false,"editUrl":"https://github.com/ethdebug/format/tree/main/packages/web/spec/type/concepts.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Overview","permalink":"/format/pr-preview/pr-168/spec/type/overview"},"next":{"title":"Schema","permalink":"/format/pr-preview/pr-168/spec/type/"}}');var r=t(31085),i=t(71184),o=t(69436),a=t(53263),c=t(73580);const l={sidebar_position:2},h="Key concepts",p={},d=[{value:"Types are organized by <code>kind</code>",id:"types-are-organized-by-kind",level:2},{value:"Known vs. unknown kinds",id:"known-vs-unknown-kinds",level:2},{value:"Elementary vs. complex types",id:"elementary-vs-complex-types",level:2},{value:"Complex types&#39; <code>&quot;contains&quot;</code> field",id:"complextypes-contains-field",level:2},{value:"Type wrappers and type references",id:"type-wrappers-and-type-references",level:2},{value:"Type wrapper schema",id:"type-wrapper-schema",level:3},{value:"Type reference schema",id:"type-reference-schema",level:3},{value:"Sometimes types are defined in code",id:"sometimes-types-are-defined-in-code",level:2},{value:"Type definition schema",id:"type-definition-schema",level:3}];function m(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"key-concepts",children:"Key concepts"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"ethdebug/format/type"})," schema includes definitions for a few\nconcepts that are worth highlighting here."]}),"\n",(0,r.jsxs)(n.h2,{id:"types-are-organized-by-kind",children:["Types are organized by ",(0,r.jsx)(n.code,{children:"kind"})]}),"\n",(0,r.jsx)(n.admonition,{title:"Example: Boolean type",type:"info",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "kind": "bool"\n}\n'})})}),"\n",(0,r.jsxs)(n.p,{children:["An ",(0,r.jsx)(n.strong,{children:"ethdebug/format/type"})," type representation is a JSON object with a\n",(0,r.jsx)(n.code,{children:"kind"})," field containing a string value."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"kind"})," is a required field for all type representations and is used to\ndiscriminate type objects into the appropriate corresponding subschema for a\nwell-understood family of type."]}),"\n",(0,r.jsx)(n.h2,{id:"known-vs-unknown-kinds",children:"Known vs. unknown kinds"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ethdebug/format/type"})," defines specific subschemas for known kinds of types.\nKnown types correspond 1-to-1 with a reserved constant string value for the\n",(0,r.jsx)(n.code,{children:"kind"})," field."]}),"\n",(0,r.jsxs)(n.p,{children:["Type representations ",(0,r.jsx)(n.strong,{children:"should"})," adhere to the specific corresponding subschema\nwhen representing a known type. Type representations ",(0,r.jsx)(n.strong,{children:"must not"})," use any of\nthe reserved values for ",(0,r.jsx)(n.code,{children:"kind"})," for any purpose other than adhering to the\ncorresponding subschema."]}),"\n",(0,r.jsxs)(n.p,{children:["This schema makes no restriction on values for the ",(0,r.jsx)(n.code,{children:"kind"})," field other than\nthese reservations. For custom variations on known types and to represent kinds\nof types not supported by this format, type representations ",(0,r.jsx)(n.strong,{children:"may"})," use other\nvalues for ",(0,r.jsx)(n.code,{children:"kind"})," that correspond to associated external subschemas."]}),"\n",(0,r.jsxs)(n.p,{children:["Note that this format defines a\n",(0,r.jsxs)(n.a,{href:"/spec/type/base",children:["base type schema (",(0,r.jsx)(n.strong,{children:"ethdebug/format/type/base"}),")"]}),", to which\nall representations of unknown (and known) types ",(0,r.jsx)(n.strong,{children:"must"})," conform.\nFor unknown types, ",(0,r.jsx)(n.a,{href:"/spec/type",children:(0,r.jsx)(n.strong,{children:"ethdebug/format/type"})}),"\nplaces additional constraints in addition to what the base schema specifies."]}),"\n",(0,r.jsx)(n.h2,{id:"elementary-vs-complex-types",children:"Elementary vs. complex types"}),"\n",(0,r.jsxs)(n.p,{children:["Type representations in this schema fall into one of two ",(0,r.jsx)(n.code,{children:"class"}),"es: either\n",(0,r.jsx)(n.code,{children:'"elementary"'})," or ",(0,r.jsx)(n.code,{children:'"complex"'}),". Type representations express this disinction in\ntwo ways (the optional ",(0,r.jsx)(n.code,{children:'"class"'})," field, and the absence or existence of a\n",(0,r.jsx)(n.code,{children:'"contains"'})," field)."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Elementary types do not compose any other types. For example, ",(0,r.jsx)(n.code,{children:"uint256"})," is an\nelementary type. ",(0,r.jsx)(n.code,{children:"string"})," may be an elementary type for languages that whose\nsemantics treat strings differently than simply an array of characters (like\nSolidity does)."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Complex types compose at least one other type. For instance, ",(0,r.jsx)(n.code,{children:"uint256[]"})," is\nan array type that composes an elementary type. Complex types in this schema\nare polymorphic in how they represent this composition; see\n",(0,r.jsx)(n.a,{href:"#complextypes-contains-field",children:"below"})," for information about complex types'\n",(0,r.jsx)(n.code,{children:'"contains"'})," field."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"complextypes-contains-field",children:["Complex types' ",(0,r.jsx)(n.code,{children:'"contains"'})," field"]}),"\n",(0,r.jsx)(n.p,{children:"Complex types inherently compose at least one other type and may do so in one\nof three forms:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Complex types may compose exactly one other type"}),"\n",(0,r.jsx)(n.li,{children:"Complex types may compose an ordered list of other types"}),"\n",(0,r.jsx)(n.li,{children:"Complex types may compose an object mapping of specific other types by key"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["All three forms of composition polymorphically use the ",(0,r.jsx)(n.code,{children:'"contains"'})," field."]}),"\n",(0,r.jsxs)(n.p,{children:["As described in\n",(0,r.jsx)(n.a,{href:"#type-wrappers-and-type-references",children:"Type wrappers and type references"}),"\nbelow, complex types compose\nother types by way of wrapper objects of the form ",(0,r.jsx)(n.code,{children:'{ "type": ... }'}),", which\npossibly includes other fields alongside ",(0,r.jsx)(n.code,{children:'"type"'}),"."]}),"\n",(0,r.jsxs)(t,{open:!0,children:[(0,r.jsx)("summary",{children:"Example complex types to show different forms"}),(0,r.jsxs)(a.default,{children:[(0,r.jsxs)(c.default,{value:"singleton",label:"Single type",children:[(0,r.jsx)(n.p,{children:"This is an example array type, which composes exactly one other type."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "kind": "array",\n  "contains": {\n    "type": {\n      "kind": "uint",\n      "bits": 256\n    }\n  }\n}\n'})})]}),(0,r.jsxs)(c.default,{value:"list",label:"Ordered list of types",children:[(0,r.jsx)(n.p,{children:"This is an example array type, which composes an ordered list of member\ntypes."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "kind": "struct",\n  "contains": [{\n    "name": "balance",\n    "type": {\n      "kind": "uint",\n      "bits": 256\n    }\n  }, {\n    "name": "scoreSheet",\n    "type": {\n      "id": "<some opaque ID for some `ScoreSheet` type>"\n    }\n  }]\n}\n'})}),(0,r.jsxs)(n.p,{children:["In this example, please note how this struct type represents member names\nwith a ",(0,r.jsx)(n.code,{children:'"name"'})," field alongside the ",(0,r.jsx)(n.code,{children:'"type"'})," field, and note how the\nvalue of ",(0,r.jsx)(n.code,{children:'"type"'})," can be either a complete representation or a reference\nobject in the form of ",(0,r.jsx)(n.code,{children:"{ id }"}),"."]})]}),(0,r.jsxs)(c.default,{value:"object",label:"Object mapping of types by key",children:[(0,r.jsx)(n.p,{children:"This is an example mapping type, which composes an object mapping of types\nby key."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "kind": "mapping",\n  "contains": {\n    "key": {\n      "type": {\n        "kind": "address"\n      }\n    },\n    "value": {\n      "type": {\n        "kind": "uint",\n        "bits": 256\n      }\n    }\n  }\n}\n'})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"type-wrappers-and-type-references",children:"Type wrappers and type references"}),"\n",(0,r.jsx)(n.p,{children:"This schema defines the concept of a type wrapper and the related concept of a\ntype reference."}),"\n",(0,r.jsx)(n.p,{children:"Type wrappers serve to encapsulate a type representation alongside other fields\nin the same object, and to facilitate discriminating which polymorphic form is\nused for a particular complex type."}),"\n",(0,r.jsxs)(n.p,{children:["Type wrappers are any object of the form\n",(0,r.jsx)(n.code,{children:'{ "type": <type>, ...otherProperties }'}),", where ",(0,r.jsx)(n.code,{children:"<type>"})," is either a complete\ntype representation or a reference to another type by ID."]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Example type wrapper with complete type representation"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'{\n  "name": "beneficiary",\n  "type": {\n    "kind": "address"\n  }\n}\n'})})]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Example type wrapper with reference by ID"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'{\n  "type": {\n    "id": "<opaque-id>"\n  }\n}\n'})})]}),"\n",(0,r.jsxs)(n.p,{children:["Note that ",(0,r.jsx)(n.strong,{children:"ethdebug/format/type"})," places no restriction on IDs other than\nthat they must be either a number or a string. Other components of this format\nat-large may impose restrictions, however."]}),"\n",(0,r.jsx)(n.h3,{id:"type-wrapper-schema",children:"Type wrapper schema"}),"\n",(0,r.jsx)(o.A,{schema:{id:"schema:ethdebug/format/type/wrapper"}}),"\n",(0,r.jsx)(n.h3,{id:"type-reference-schema",children:"Type reference schema"}),"\n",(0,r.jsxs)(n.p,{children:["A type reference is an object containing the single ",(0,r.jsx)(n.code,{children:'"id"'})," field. This field\nmust be a string or a number."]}),"\n",(0,r.jsx)(o.A,{schema:{id:"schema:ethdebug/format/type/reference"}}),"\n",(0,r.jsx)(n.h2,{id:"sometimes-types-are-defined-in-code",children:"Sometimes types are defined in code"}),"\n",(0,r.jsxs)(n.p,{children:["Languages provide certain kinds of types by way of allowing their definition\nin user (or runtime) code. These include ",(0,r.jsx)(n.a,{href:"/spec/type/complex/struct",children:"struct"}),",\n",(0,r.jsx)(n.a,{href:"/spec/type/elementary/enum",children:"enum"}),", and ",(0,r.jsx)(n.a,{href:"/spec/type/complex/alias",children:"alias"}),"\ntypes."]}),"\n",(0,r.jsxs)(n.p,{children:["Types with definition information ",(0,r.jsx)(n.strong,{children:"may"})," include a ",(0,r.jsx)(n.code,{children:"definition"})," field that\nspecifies the name of the type (its identifier) and/or the source location of\nits definition."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["When extending the ",(0,r.jsx)(n.a,{href:"/spec/type/base",children:"base type schema"})," for custom kinds of\ntypes with definitions, these custom schemas ",(0,r.jsx)(n.strong,{children:"must"})," require the specification\nof such definitions by way of this same ",(0,r.jsx)(n.code,{children:"definition"})," field and its associated\nschema."]})}),"\n",(0,r.jsxs)(n.p,{children:["This format does not prohibit the inclusion of this ",(0,r.jsx)(n.code,{children:"definition"})," field for any\ntype, so as to support languages where array types, etc. may be defined by name\ndirectly. It is recommended, however, that\ncompilers implementing this format ",(0,r.jsx)(n.strong,{children:"should"})," prefer to use\n",(0,r.jsx)(n.a,{href:"/spec/type/complex/alias",children:"alias"})," type for the common case of assigning a name\nto a type expression."]}),"\n",(0,r.jsx)(n.h3,{id:"type-definition-schema",children:"Type definition schema"}),"\n",(0,r.jsx)(o.A,{schema:{id:"schema:ethdebug/format/type/definition"}})]})}function f(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},69436(e,n,t){t.d(n,{A:()=>O});var s=t(14041),r=t(54648),i=t.n(r),o=t(54034),a=t.n(o),c=t(53263),l=t(73580),h=t(31917);const p={...{"schema:ethdebug/format/type/base":{title:"ethdebug/format/type/base schema",href:"/spec/type/base"},"schema:ethdebug/format/type/base#/$defs/TypeWrapper":{title:"Base type wrapper schema",href:"/spec/type/base#base-type-wrapper-schema"},"schema:ethdebug/format/type/wrapper":{title:"Type wrapper schema",href:"/spec/type/concepts#type-wrapper-schema"},"schema:ethdebug/format/type/reference":{title:"Type reference schema",href:"/spec/type/concepts#type-reference-schema"},"schema:ethdebug/format/type/definition":{title:"Type definition schema",href:"/spec/type/concepts#type-definition-schema"},"schema:ethdebug/format/type":{href:"/spec/type"},"schema:ethdebug/format/type/elementary":{href:"/spec/type#elementary-type-schema"},"schema:ethdebug/format/type/complex":{href:"/spec/type#complex-type-schema"},...["uint","int","ufixed","fixed","bool","bytes","string","address","contract","enum"].map((e=>({[`schema:ethdebug/format/type/elementary/${e}`]:{href:`/spec/type/elementary/${e}`}}))).reduce(((e,n)=>({...e,...n})),{}),...["alias","tuple","array","mapping","struct","function"].map((e=>({[`schema:ethdebug/format/type/complex/${e}`]:{href:`/spec/type/complex/${e}`}}))).reduce(((e,n)=>({...e,...n})),{}),"schema:ethdebug/format/type/complex/function#/$defs/Parameters":{title:"Parameters schema",href:"/spec/type/complex/function#parameters-schema"}},...{"schema:ethdebug/format/pointer":{href:"/spec/pointer"},"schema:ethdebug/format/pointer/region":{href:"/spec/pointer/region"},"schema:ethdebug/format/pointer/region/base":{href:"/spec/pointer/region/base"},...["stack","memory","storage","calldata","returndata","transient","code"].map((e=>({[`schema:ethdebug/format/pointer/region/${e}`]:{href:`/spec/pointer/region/location/${e}`}}))).reduce(((e,n)=>({...e,...n})),{}),...["slice","segment"].map((e=>({[`schema:ethdebug/format/pointer/scheme/${e}`]:{href:`/spec/pointer/region/scheme/${e}`}}))).reduce(((e,n)=>({...e,...n})),{}),"schema:ethdebug/format/pointer/collection":{href:"/spec/pointer/collection"},...["group","list","conditional","scope","reference","templates"].map((e=>({[`schema:ethdebug/format/pointer/collection/${e}`]:{href:`/spec/pointer/collection/${e}`}}))).reduce(((e,n)=>({...e,...n})),{}),"schema:ethdebug/format/pointer/expression":{href:"/spec/pointer/expression"},"schema:ethdebug/format/pointer/template":{href:"/spec/pointer/template"},...Object.entries({Literal:{title:"Literal values schema",anchor:"#literal-values"},Variable:{title:"Variable expression schema",anchor:"#variables"},Arithmetic:{title:"Arithmetic operation expression schema",anchor:"#arithmetic-operations"},Lookup:{title:"Lookup expression schema",anchor:"#lookup-region-definition"},Read:{title:"Read expression schema",anchor:"#reading-from-the-evm"},Keccak256:{title:"Keccak256 hash expression schema",anchor:"#keccak256-hashes"},Concat:{title:"Bytes concatenation schema",anchor:"#bytes-concatenation"},Resize:{title:"Resize operation schema",anchor:"#resize-operations"},Reference:{title:"Region reference",anchor:"#region-references"}}).map((([e,{title:n,anchor:t}])=>({[`schema:ethdebug/format/pointer/expression#/$defs/${e}`]:{title:n,href:`/spec/pointer/expression${t}`}}))).reduce(((e,n)=>({...e,...n})),{})},...["value","hex","unsigned"].map((e=>({[`schema:ethdebug/format/data/${e}`]:{href:`/spec/data/${e}`}}))).reduce(((e,n)=>({...e,...n})),{}),"schema:ethdebug/format/materials/id":{title:"Identifier schema",href:"/spec/materials/id#identifier-schema"},"schema:ethdebug/format/materials/reference":{title:"Reference schema",href:"/spec/materials/id#reference-schema"},"schema:ethdebug/format/materials/compilation":{title:"Compilation schema",href:"/spec/materials/compilation"},"schema:ethdebug/format/materials/source":{title:"Source schema",href:"/spec/materials/source"},"schema:ethdebug/format/materials/source-range":{title:"Source range schema",href:"/spec/materials/source-range"},"schema:ethdebug/format/info":{title:"ethdebug/format/info",href:"/spec/info"},...{"schema:ethdebug/format/program":{href:"/spec/program"},"schema:ethdebug/format/program/instruction":{href:"/spec/program/instruction"},"schema:ethdebug/format/program/context":{href:"/spec/program/context"},...["code","variables","remark","pick","gather","frame"].map((e=>({[`schema:ethdebug/format/program/context/${e}`]:{href:`/spec/program/context/${e}`}}))).reduce(((e,n)=>({...e,...n})),{})},"schema:ethdebug/format/info":{href:"/spec/info"},"schema:ethdebug/format/info/resources":{href:"/spec/info/resources"}};var d=t(73584),m=t(87906),f=t(31085);function u(e){const{id:n,pointer:t,schema:s,yaml:r}=(0,h.hZ)(e),i=n?n.startsWith("schema:")?n.slice(7):n:void 0,o=i&&t?`${i}${t}`:i||void 0;return(0,f.jsxs)(c.default,{groupId:"schema-language",children:[(0,f.jsx)(l.default,{value:"yaml",label:"YAML",children:(0,f.jsx)(a(),{className:"schema-listing",language:"yaml",showLineNumbers:!0,title:o||"schema.yaml",children:r})}),(0,f.jsx)(l.default,{value:"json",label:"JSON",children:(0,f.jsx)(a(),{className:"schema-listing",language:"json",showLineNumbers:!0,title:o?`${o}`:"schema.json",children:JSON.stringify(s,void 0,2)})})]})}var y=t(86952),x=t(95500),j=t(75128),g=t.n(j),b=t(21805),v=t(77433),w=t.n(v);function k(e){const{schema:n}=(0,h.hZ)(e),{colorMode:t}=(0,x.G)(),r=n.examples?.[0]??{},i=(0,s.useRef)(null),o=(0,y.useMonaco)(),a=2,c=new(w())({schemas:Object.values(h.jo),allErrors:!0,strict:!1}),[l,p]=(0,s.useState)(r),[d,m]=(0,s.useState)(!1);function u(e){console.error(e)}return(0,s.useEffect)((()=>{d&&function(){const n=c.getSchema(e.schema.id);if(!n)return u("Unable to validate schema");const t=function(){try{return g().parse(l,void 0,{tabWidth:a})}catch{return{data:"",pointers:{}}}}();n(t.data);const s=(0,b.L)({schema:h.jo[e.schema.id],data:t.data,errors:n.errors});console.log(s,n.errors),function(e,n){const t=i.current?.getModel();if(!t||!o)return u("Unable to validate schema");const s=[];if(e)for(const[r,i]of Object.entries(e)){const e=i.path.replace("{base}","").replace(/\./g,"/"),t=n.pointers[e];let r=i.message.replace("{base}","").replace(/\./g,"/");"const"==i.context.errorType&&(r=`Expecting a constant value of "${i.context.allowedValue}"`),t&&r&&(s.push({startLineNumber:t.value.line+1,startColumn:t.value.column+1,endColumn:t.valueEnd.column+1,endLineNumber:t.valueEnd.line+1,message:r,severity:o.MarkerSeverity.Error}),t.key&&t.keyEnd&&s.push({startLineNumber:t.key.line+1,startColumn:t.key.column+1,endColumn:t.keyEnd.column+1,endLineNumber:t.keyEnd.line+1,message:r,severity:o.MarkerSeverity.Error}))}o.editor.setModelMarkers(t,"EthDebug",s)}(s,t)}()}),[l]),(0,f.jsx)("section",{className:"playground-container",children:(0,f.jsx)(y.default,{height:"50vh",language:"json",theme:"dark"==t?"vs-dark":"vs-light",defaultValue:JSON.stringify(r,void 0,a),onChange:function(e){m(!0),p(e)},onMount:function(e){i.current=e},options:{contextmenu:!1,autoIndent:"advanced",tabSize:a}})})}function O(e){const n=(0,h.hZ)(e),{id:t,rootSchema:s,yaml:r,pointer:o}=n,y=C(s,t||"");return(0,f.jsxs)(c.default,{children:[(0,f.jsx)(l.default,{value:"viewer",label:"Explore",children:(0,f.jsx)(d.fn.Provider,{value:{rootSchemaInfo:n,schemaIndex:p},children:(0,f.jsx)(i(),{schema:y,resolverOptions:{jsonPointer:o,resolvers:{schema:{resolve:e=>{const n=e.toString(),{schema:t}=(0,h.hZ)({schema:{id:n}});return C(t,n)}}}},viewerOptions:{showExamples:!0,ValueComponent:({value:e})=>["string","number","bigint","boolean"].includes(typeof e)?(0,f.jsx)("code",{children:e.toString()}):(0,f.jsx)(a(),{language:"json",children:`${JSON.stringify(e,void 0,2)}`}),DescriptionComponent:({description:e})=>(0,f.jsx)(m.oz,{children:e})}})})}),(0,f.jsx)(l.default,{value:"listing",label:"View source",children:(0,f.jsx)(u,{schema:e.schema,pointer:e.pointer})}),(0,f.jsx)(l.default,{value:"playground",label:"Playground",children:(0,f.jsx)(k,{schema:e.schema,pointer:e.pointer})})]})}function C(e,n){return S(N(e),`${n}#`)}function S(e,n){return Array.isArray(e)?e.map(((e,t)=>S(e,`${n}/${t}`))):null!==e&&"object"==typeof e?Object.entries(e).reduce(((e,[t,s])=>(e[t]=S(s,`${n}/${t}`),e)),{[d._K]:n.endsWith("#")?n.slice(0,-1):n}):e}function N(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(N);if(1===Object.keys(e).length&&"$ref"in e)return e;const{$ref:n,...t}=e,s=Object.entries(t).reduce(((e,[n,t])=>(e[n]=N(t),e)),{});if(!n)return s;const r=["allOf","oneOf","anyOf"].find((n=>!(n in e)));if(!r)throw new Error(`Could not find available composition keyword in ${JSON.stringify(e)}`);return s[r]=[{$ref:n}],s}},73584(e,n,t){t.d(n,{_K:()=>o,fn:()=>r,wQ:()=>i});var s=t(14041);const r=(0,s.createContext)({schemaIndex:{}}),i=()=>(0,s.useContext)(r),o=Symbol("__$internalId")},99953(e,n,t){t.r(n),t.d(n,{default:()=>i});t(14041);var s=t(76947),r=t(31085);function i(e){const{schema:n}=e,t=void 0!==n.if,i=void 0!==n.dependentRequired,o=void 0!==n.dependentSchemas,a=void 0!==n.dependencies;return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)(s.IfElseThen,{schema:n}),i&&(0,r.jsx)(s.DependentRequired,{schema:n}),o&&(0,r.jsx)(s.DependentSchemas,{schema:n}),a&&(0,r.jsx)(s.Dependencies,{schema:n})]})}}}]);