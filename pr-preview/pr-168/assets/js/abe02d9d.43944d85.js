"use strict";(globalThis.webpackChunk_ethdebug_format_web=globalThis.webpackChunk_ethdebug_format_web||[]).push([[5404],{792(e,n,s){s.d(n,{A:()=>d});s(14041);var r=s(40665);const i="container_Hrln",t="link_y57m",a="label_feh8",l="schema_kJnE",c="arrow_YbSg";var o=s(31085);function d({schema:e,href:n}){return(0,o.jsx)("div",{className:i,children:(0,o.jsxs)(r.A,{to:n,className:t,children:[(0,o.jsx)("span",{className:a,children:"Schema:"}),(0,o.jsx)("span",{className:l,children:e}),(0,o.jsx)("span",{className:c,children:"\u2192"})]})})}},35809(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"core-schemas/programs/variables","title":"Variables","description":"<SpecLink","source":"@site/docs/core-schemas/programs/variables.mdx","sourceDirName":"core-schemas/programs","slug":"/core-schemas/programs/variables","permalink":"/format/pr-preview/pr-168/docs/core-schemas/programs/variables","draft":false,"unlisted":false,"editUrl":"https://github.com/ethdebug/format/tree/main/packages/web/docs/core-schemas/programs/variables.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Instructions","permalink":"/format/pr-preview/pr-168/docs/core-schemas/programs/instructions"},"next":{"title":"Tracing execution","permalink":"/format/pr-preview/pr-168/docs/core-schemas/programs/tracing"}}');var i=s(31085),t=s(71184),a=s(792),l=s(87270);const c={sidebar_position:3},o="Variables",d={},h=[{value:"Variable structure",id:"variable-structure",level:2},{value:"Types describe structure",id:"types-describe-structure",level:2},{value:"Pointers tell debuggers where to look",id:"pointers-tell-debuggers-where-to-look",level:2},{value:"Scope and lifetime",id:"scope-and-lifetime",level:2},{value:"Example: local variable lifecycle",id:"example-local-variable-lifecycle",level:2},{value:"Multiple variables",id:"multiple-variables",level:2},{value:"Learn more",id:"learn-more",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"variables",children:"Variables"})}),"\n",(0,i.jsx)(a.A,{schema:"ethdebug/format/program/context/variables",href:"/spec/program/context/variables"}),"\n",(0,i.jsx)(n.p,{children:"Variables connect source-level identifiers to runtime locations. They're the\nkey to showing developers meaningful values instead of raw bytes."}),"\n",(0,i.jsxs)(n.admonition,{title:"Terminology note",type:"tip",children:[(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:"ethdebug/format"}),', "variable" means different things in different contexts:']}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Program variables"})," (this page): source-level identifiers with types and\npointers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Pointer variables"}),": named bindings for use in expressions (like loop\nindices in ",(0,i.jsx)(n.a,{href:"/docs/core-schemas/pointers/collections#list",children:"list collections"}),")"]}),"\n"]}),(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.a,{href:"/docs/reference/glossary",children:"glossary"})," for complete definitions."]})]}),"\n",(0,i.jsx)(n.h2,{id:"variable-structure",children:"Variable structure"}),"\n",(0,i.jsx)(n.p,{children:"A variable has up to four optional fields (at least one required):"}),"\n",(0,i.jsx)(l.A,{schema:"program/context/variables",href:"/spec/program/context/variables",title:"A simple variable",children:'{\n  "identifier": "balance",\n  "type": { "kind": "uint", "bits": 256 },\n  "pointer": {\n    "location": "storage",\n    "slot": 0\n  }\n}'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"identifier"})}),": the variable name from source code"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"declaration"})}),": source range where the variable was declared"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"type"})}),": the structure of the data (an ",(0,i.jsx)(n.strong,{children:"ethdebug/format"})," type)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"pointer"})}),": where to find the data (an ",(0,i.jsx)(n.strong,{children:"ethdebug/format"})," pointer)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"types-describe-structure",children:"Types describe structure"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"type"})," field describes what shape the data takes. A debugger uses this to:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Understand the data's structure (scalar, struct, array, etc.)"}),"\n",(0,i.jsx)(n.li,{children:"Know how to interpret the bytes once located (signed vs unsigned, field\norder, etc.)"}),"\n",(0,i.jsx)(n.li,{children:"Display the value in a readable format"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For complex types, the type definition guides the debugger through nested\nstructures:"}),"\n",(0,i.jsx)(l.A,{schema:"program/context/variables",href:"/spec/program/context/variables",title:"Variable with struct type",children:'{\n  "identifier": "user",\n  "type": {\n    "kind": "struct",\n    "contains": [\n      { "name": "id", "type": { "kind": "uint", "bits": 256 } },\n      { "name": "active", "type": { "kind": "bool" } }\n    ]\n  },\n  "pointer": { ... }\n}'}),"\n",(0,i.jsx)(n.h2,{id:"pointers-tell-debuggers-where-to-look",children:"Pointers tell debuggers where to look"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"pointer"})," field specifies the data's location. This can be simple:"]}),"\n",(0,i.jsx)(l.A,{schema:"pointer/region/stack",href:"/spec/pointer/region/location/stack",children:'{\n  "pointer": {\n    "location": "stack",\n    "slot": 0\n  }\n}'}),"\n",(0,i.jsx)(n.p,{children:"Or complex, for data spread across multiple locations:"}),"\n",(0,i.jsx)(l.A,{schema:"pointer/collection/group",href:"/spec/pointer/collection/group",title:"Struct members in packed storage",children:'{\n  "pointer": {\n    "group": [\n      { "name": "id", "location": "storage", "slot": 5 },\n      { "name": "active", "location": "storage", "slot": 5, "offset": 31 }\n    ]\n  }\n}'}),"\n",(0,i.jsx)(n.h2,{id:"scope-and-lifetime",children:"Scope and lifetime"}),"\n",(0,i.jsxs)(n.p,{children:["Variables appear in context when they're valid. The instruction's context\nrepresents what's true ",(0,i.jsx)(n.em,{children:"after"})," that instruction executes."]}),"\n",(0,i.jsx)(n.p,{children:"A variable might:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Become available when a function is entered"}),"\n",(0,i.jsx)(n.li,{children:"Change location as it moves from stack to memory"}),"\n",(0,i.jsx)(n.li,{children:"Go out of scope when a block ends"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The instruction list captures these transitions. As a debugger steps through\nexecution, it accumulates and discards variables based on each instruction's\ncontext."}),"\n",(0,i.jsx)(n.h2,{id:"example-local-variable-lifecycle",children:"Example: local variable lifecycle"}),"\n",(0,i.jsx)(n.p,{children:"Consider this Solidity snippet:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"function transfer(address to, uint256 amount) {\n    uint256 balance = balances[msg.sender];\n    // ... use balance ...\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"The compiled bytecode might have:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Instruction at offset 50"}),": ",(0,i.jsx)(n.code,{children:"balance"})," comes into scope, stored on stack"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Instructions 51-100"}),": ",(0,i.jsx)(n.code,{children:"balance"})," remains in scope"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Instruction at offset 101"}),": ",(0,i.jsx)(n.code,{children:"balance"})," leaves scope (function returns)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The program captures this by including ",(0,i.jsx)(n.code,{children:"balance"})," in the variables list for\ninstructions 50-100 and omitting it afterward."]}),"\n",(0,i.jsx)(n.h2,{id:"multiple-variables",children:"Multiple variables"}),"\n",(0,i.jsx)(n.p,{children:"An instruction's context can declare multiple variables:"}),"\n",(0,i.jsx)(l.A,{schema:"program/instruction",href:"/spec/program/instruction",title:"Multiple variables in context",children:'{\n  "offset": 75,\n  "context": {\n    "variables": [\n      {\n        "identifier": "sender",\n        "type": { "kind": "address" },\n        "pointer": { "location": "stack", "slot": 2 }\n      },\n      {\n        "identifier": "value",\n        "type": { "kind": "uint", "bits": 256 },\n        "pointer": { "location": "stack", "slot": 1 }\n      },\n      {\n        "identifier": "success",\n        "type": { "kind": "bool" },\n        "pointer": { "location": "stack", "slot": 0 }\n      }\n    ]\n  }\n}'}),"\n",(0,i.jsx)(n.h2,{id:"learn-more",children:"Learn more"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../types",children:"Types documentation"})," for type structure details"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../pointers",children:"Pointers documentation"})," for location specification"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/spec/program/context/variables",children:"Context schema"})," for the full schema"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},87270(e,n,s){s.d(n,{A:()=>u});s(14041);var r=s(40665),i=s(54034),t=s.n(i);const a="container_eo8G",l="header_CGit",c="title_NhXp",o="schemaLink_R3qF",d="schemaName_hPpq",h="schemaLabel_TlZH";var p=s(31085);function u({schema:e,href:n,children:s,title:i}){const u="string"==typeof s?s:JSON.stringify(s,null,2),m=e.startsWith("ethdebug/format/")?e:`ethdebug/format/${e}`;return(0,p.jsxs)("div",{className:a,children:[(0,p.jsxs)("div",{className:l,children:[i&&(0,p.jsx)("span",{className:c,children:i}),(0,p.jsxs)(r.A,{to:n,className:o,children:[(0,p.jsx)("span",{className:h,children:"Schema:"}),(0,p.jsx)("span",{className:d,children:m})]})]}),(0,p.jsx)(t(),{language:"json",children:u})]})}}}]);