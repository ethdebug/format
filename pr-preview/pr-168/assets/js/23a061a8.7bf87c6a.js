"use strict";(globalThis.webpackChunk_ethdebug_format_web=globalThis.webpackChunk_ethdebug_format_web||[]).push([[7049],{14910(e,s,n){n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"pointers/index","title":"Pointers","description":"Pointers describe where data lives in the EVM. They\'re recipes that tell a","source":"@site/docs/pointers/index.mdx","sourceDirName":"pointers","slug":"/pointers/","permalink":"/format/pr-preview/pr-168/docs/pointers/","draft":false,"unlisted":false,"editUrl":"https://github.com/ethdebug/format/tree/main/packages/web/docs/pointers/index.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Representation","permalink":"/format/pr-preview/pr-168/docs/types/representation"},"next":{"title":"Regions","permalink":"/format/pr-preview/pr-168/docs/pointers/regions"}}');var i=n(31085),o=n(71184);const a={sidebar_position:1},t="Pointers",c={},l=[{value:"Why pointers are complex",id:"why-pointers-are-complex",level:2},{value:"Core concepts",id:"core-concepts",level:2},{value:"Pointers are recursive",id:"pointers-are-recursive",level:3},{value:"Regions locate bytes",id:"regions-locate-bytes",level:3},{value:"Collections group pointers",id:"collections-group-pointers",level:3},{value:"Expressions make pointers dynamic",id:"expressions-make-pointers-dynamic",level:3},{value:"Named regions enable composition",id:"named-regions-enable-composition",level:3},{value:"What&#39;s next",id:"whats-next",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"pointers",children:"Pointers"})}),"\n",(0,i.jsx)(s.p,{children:"Pointers describe where data lives in the EVM. They're recipes that tell a\ndebugger how to find bytes at runtime\u2014recipes that can depend on the current\nmachine state."}),"\n",(0,i.jsx)(s.h2,{id:"why-pointers-are-complex",children:"Why pointers are complex"}),"\n",(0,i.jsxs)(s.p,{children:["In high-level languages, a variable like ",(0,i.jsx)(s.code,{children:"uint256 balance"})," seems simple. But\nat the EVM level, finding that value might require:"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Reading a storage slot whose address depends on a mapping key"}),"\n",(0,i.jsx)(s.li,{children:"Following a memory pointer stored on the stack"}),"\n",(0,i.jsx)(s.li,{children:"Computing an offset based on array indices"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["A pointer in ",(0,i.jsx)(s.strong,{children:"ethdebug/format"})," captures all this complexity in a\nself-contained description."]}),"\n",(0,i.jsx)(s.h2,{id:"core-concepts",children:"Core concepts"}),"\n",(0,i.jsx)(s.h3,{id:"pointers-are-recursive",children:"Pointers are recursive"}),"\n",(0,i.jsx)(s.p,{children:"A pointer is either:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"region"}),": a single, continuous sequence of bytes"]}),"\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"collection"}),": an aggregation of other pointers"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"This recursive structure lets you build up complex allocations from simple\npieces."}),"\n",(0,i.jsx)(s.h3,{id:"regions-locate-bytes",children:"Regions locate bytes"}),"\n",(0,i.jsx)(s.p,{children:"A region identifies a contiguous block of bytes in a specific data location:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "location": "memory",\n  "offset": "0x40",\n  "length": 32\n}\n'})}),"\n",(0,i.jsx)(s.p,{children:'This says: "32 bytes in memory starting at offset 0x40."'}),"\n",(0,i.jsx)(s.p,{children:"Different locations use different addressing schemes:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Memory, calldata, returndata, code"}),": byte offsets (",(0,i.jsx)(s.code,{children:"offset"})," + ",(0,i.jsx)(s.code,{children:"length"}),")"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Storage, transient, stack"}),": slot-based (",(0,i.jsx)(s.code,{children:"slot"}),")"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"collections-group-pointers",children:"Collections group pointers"}),"\n",(0,i.jsx)(s.p,{children:"When data spans multiple regions (like struct members), collections aggregate\nthem:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "group": [\n    {\n      "name": "balance",\n      "location": "memory",\n      "offset": "0x40",\n      "length": 32\n    },\n    {\n      "name": "owner",\n      "location": "memory",\n      "offset": "0x60",\n      "length": 32\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:["Collection types include ",(0,i.jsx)(s.code,{children:"group"}),", ",(0,i.jsx)(s.code,{children:"list"}),", ",(0,i.jsx)(s.code,{children:"conditional"}),", and more. See\n",(0,i.jsx)(s.a,{href:"./collections",children:"collections"})," for the complete reference."]}),"\n",(0,i.jsx)(s.h3,{id:"expressions-make-pointers-dynamic",children:"Expressions make pointers dynamic"}),"\n",(0,i.jsx)(s.p,{children:"Real allocations rarely use constant offsets. Expressions let you compute\naddresses from runtime state\u2014reading values from named regions, performing\narithmetic, and computing keccak256 hashes for storage slot calculation."}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"./expressions",children:"expressions"})," for the full expression language."]}),"\n",(0,i.jsx)(s.h3,{id:"named-regions-enable-composition",children:"Named regions enable composition"}),"\n",(0,i.jsxs)(s.p,{children:["Regions can have names that other parts of the pointer reference. This allows\none region's address to be computed from another's properties, or its value to\nbe read and used in expressions. See ",(0,i.jsx)(s.a,{href:"./expressions",children:"expressions"})," for the full\nexpression language."]}),"\n",(0,i.jsx)(s.h2,{id:"whats-next",children:"What's next"}),"\n",(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col col--6",children:(0,i.jsxs)("div",{className:"card margin-bottom--md",children:[(0,i.jsx)("div",{className:"card__header",children:(0,i.jsx)("h3",{children:"Regions"})}),(0,i.jsx)("div",{className:"card__body",children:(0,i.jsx)("p",{children:"How to specify byte ranges in different data locations."})}),(0,i.jsx)("div",{className:"card__footer",children:(0,i.jsx)("a",{className:"button button--secondary button--block",href:"./regions",children:(0,i.jsx)(s.p,{children:"Learn more \u2192"})})})]})}),(0,i.jsx)("div",{className:"col col--6",children:(0,i.jsxs)("div",{className:"card margin-bottom--md",children:[(0,i.jsx)("div",{className:"card__header",children:(0,i.jsx)("h3",{children:"Expressions"})}),(0,i.jsx)("div",{className:"card__body",children:(0,i.jsx)("p",{children:"Computing dynamic locations with arithmetic and hashing."})}),(0,i.jsx)("div",{className:"card__footer",children:(0,i.jsx)("a",{className:"button button--secondary button--block",href:"./expressions",children:(0,i.jsx)(s.p,{children:"Learn more \u2192"})})})]})})]}),"\n",(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col col--6",children:(0,i.jsxs)("div",{className:"card margin-bottom--md",children:[(0,i.jsx)("div",{className:"card__header",children:(0,i.jsx)("h3",{children:"Collections"})}),(0,i.jsx)("div",{className:"card__body",children:(0,i.jsx)("p",{children:"Grouping pointers for structs, arrays, and conditionals."})}),(0,i.jsx)("div",{className:"card__footer",children:(0,i.jsx)("a",{className:"button button--secondary button--block",href:"./collections",children:(0,i.jsx)(s.p,{children:"Learn more \u2192"})})})]})}),(0,i.jsx)("div",{className:"col col--6",children:(0,i.jsxs)("div",{className:"card margin-bottom--md",children:[(0,i.jsx)("div",{className:"card__header",children:(0,i.jsx)("h3",{children:"Implementation guide"})}),(0,i.jsx)("div",{className:"card__body",children:(0,i.jsx)("p",{children:"Build a pointer resolver for your debugger."})}),(0,i.jsx)("div",{className:"card__footer",children:(0,i.jsx)("a",{className:"button button--secondary button--block",href:"/docs/implementation-guides/pointers",children:(0,i.jsx)(s.p,{children:"Learn more \u2192"})})})]})})]}),"\n",(0,i.jsx)("div",{className:"row",children:(0,i.jsx)("div",{className:"col col--6",children:(0,i.jsxs)("div",{className:"card margin-bottom--md",children:[(0,i.jsx)("div",{className:"card__header",children:(0,i.jsx)("h3",{children:"Full specification"})}),(0,i.jsx)("div",{className:"card__body",children:(0,i.jsx)("p",{children:"Complete JSON schemas and expression reference."})}),(0,i.jsx)("div",{className:"card__footer",children:(0,i.jsx)("a",{className:"button button--secondary button--block",href:"/spec/pointer",children:(0,i.jsx)(s.p,{children:"View spec \u2192"})})})]})})})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);