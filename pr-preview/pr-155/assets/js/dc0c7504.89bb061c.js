(self.webpackChunk_ethdebug_format_web=self.webpackChunk_ethdebug_format_web||[]).push([[7626],{33552:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var s=n(52322),i=n(45392),r=n(61376);const a={sidebar_position:3},o="Data and machines",c={id:"implementation-guides/pointers/types/data-and-machines",title:"Data and machines",description:"The @ethdebug/pointers package includes two abstractions that it uses for",source:"@site/docs/implementation-guides/pointers/types/data-and-machines.mdx",sourceDirName:"implementation-guides/pointers/types",slug:"/implementation-guides/pointers/types/data-and-machines",permalink:"/format/pr-preview/pr-155/docs/implementation-guides/pointers/types/data-and-machines",draft:!1,unlisted:!1,editUrl:"https://github.com/ethdebug/format/tree/main/packages/web/docs/implementation-guides/pointers/types/data-and-machines.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docsSidebar",previous:{title:"Pointer types",permalink:"/format/pr-preview/pr-155/docs/implementation-guides/pointers/types/pointer-types"},next:{title:"Cursor objects",permalink:"/format/pr-preview/pr-155/docs/implementation-guides/pointers/types/cursors"}},l={},d=[{value:"Data",id:"data",level:2},{value:"Machine",id:"machine",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.a)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"data-and-machines",children:"Data and machines"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"@ethdebug/pointers"})," package includes two abstractions that it uses for\nrepresenting low-level concerns:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"class Data"})," extends JavaScript's ",(0,s.jsx)(t.code,{children:"Uint8Array"})," to represent sequences of\nbytes and allow conversion to/from different formats (like hex strings)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"interface Machine"})," defines an asynchronous API to model a running EVM.\nIt includes the sole method ",(0,s.jsx)(t.code,{children:"trace(): AsyncIterable<Machine.State>"}),",\nwhere the ",(0,s.jsx)(t.code,{children:"Machine.State"})," type represents point-in-time access to a\nrunning EVM at a particular program counter in a particular execution\ncontext, etc."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"data",children:"Data"}),"\n",(0,s.jsxs)(t.admonition,{type:"tip",children:[(0,s.jsxs)(t.p,{children:["Note how this implementation handles the conversion to/from JavaScript's\n",(0,s.jsx)(t.code,{children:"number"})," and ",(0,s.jsx)(t.code,{children:"bigint"})," types. The EVM orders numerical values' bytes by\nstarting with the most significant byte first (i.e., they are\n",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Endianness",children:"big-endian"}),")."]}),(0,s.jsx)(t.p,{children:"When implementing this functionality, be careful not to get this wrong."})]}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsxs)("summary",{children:["Code listing for ",(0,s.jsx)(t.code,{children:"src/data.ts"})]}),(0,s.jsx)(r.Z,{packageName:"@ethdebug/pointers",sourcePath:"src/data.ts"})]}),"\n",(0,s.jsx)(t.h2,{id:"machine",children:"Machine"}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsxs)("summary",{children:["Code listing for ",(0,s.jsx)(t.code,{children:"src/machine.ts"})]}),(0,s.jsx)(r.Z,{packageName:"@ethdebug/pointers",sourcePath:"src/machine.ts"})]})]})}function p(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},48313:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=48313,e.exports=t},61376:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(84560),i=n.n(s),r=n(20477),a=n(42408);var o=n(2784),c=n(27718),l=n(52322);function d(e){let{code:t,links:n,...s}=e;const r=(0,o.useRef)(null),[a,c]=(0,o.useState)(null);return(0,o.useEffect)((()=>{function e(){if(r.current){const e=r.current.querySelector("pre > code");if(e){const t=Array.from(e.childNodes).flatMap((e=>h(e,n)));c((0,l.jsx)("pre",{className:e.parentElement?.className,children:(0,l.jsx)("code",{className:e.className,children:t})}))}}}e();const t=new MutationObserver(e);return r.current&&t.observe(r.current,{childList:!0,subtree:!0}),()=>t.disconnect()}),[t,n]),a||(0,l.jsx)("div",{ref:r,children:(0,l.jsx)(i(),{...s,children:t})})}function h(e,t){return e.nodeType===Node.TEXT_NODE?function(e,t){const n=[];let s=e.textContent||"",i=0;for(const[r,a]of Object.entries(t)){let e=s.indexOf(r,i);for(;-1!==e;)e>i&&n.push(s.slice(i,e)),n.push((0,l.jsx)(c.Z,{to:a,className:"linked-code-block-link",children:r},`${r}-${e}`)),i=e+r.length,e=s.indexOf(r,i)}i<s.length&&n.push(s.slice(i));return n}(e,t):e.nodeType===Node.ELEMENT_NODE?function(e,t){const n=e.tagName.toLowerCase(),s={key:p++,className:e.className};e.style&&e.style.cssText&&(s.style=function(e){const t={};for(const n of e.split(";"))if(n){const[e,s]=n.split(":");if(e&&s){t[e.trim().replace(/-./g,(e=>e[1].toUpperCase()))]=s.trim()}}return t}(e.style.cssText));if(u.has(n))return o.createElement(n,s);const i=Array.from(e.childNodes).flatMap((e=>h(e,t)));return o.createElement(n,s,i)}(e,t):[]}let p=0;const u=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]);function m(e){let{packageName:t,sourcePath:n,includePackageNameInTitle:s=!1,extract:o,links:c={},...h}=e;const p=function(e){const{packages:t}=(0,a.eZ)("project-code-plugin");if(!(e in t))throw new Error(`Unknown package name ${e}`);const{sourceFiles:n}=t[e],s=new r.IKL({useInMemoryFileSystem:!0});for(const{filePath:i,text:r}of n)s.createSourceFile(i,r,{overwrite:!0});return s}(t),u=p.getSourceFileOrThrow(n),m=o?o(u,p):u,f=m.getFullText().trim(),g=!o,x=s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("strong",{children:t})," ",n]}):n;return Object.keys(c).length>0?(0,l.jsx)(d,{code:f,links:c,language:"typescript",...h}):(0,l.jsx)(i(),{language:"typescript",...g?{title:x,showLineNumbers:!0}:{showLineNumbers:!1},...h,children:m.getFullText().trim()})}},56699:()=>{},68379:()=>{},68382:()=>{},78867:()=>{},21212:()=>{},89854:()=>{},25800:()=>{},93037:()=>{},26996:()=>{}}]);