(globalThis.webpackChunk_ethdebug_format_web=globalThis.webpackChunk_ethdebug_format_web||[]).push([[2953],{2338(){},6177(){},14636(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=14636,e.exports=t},14774(e,t,s){"use strict";s.d(t,{A:()=>a});var r=s(54034),n=s.n(r),i=s(31917),o=s(31085);function a({pointerQuery:e}){const{schema:t}=(0,i.hZ)({schema:{id:"schema:ethdebug/format/pointer"}}),[s]=[...t.examples?.entries()||[]].find((([t,s])=>JSON.stringify(s).includes(e)))||[];if(void 0===s)throw new Error("Could not find example in pointer schema");const{yaml:r}=(0,i.hZ)({schema:{id:"schema:ethdebug/format/pointer"},pointer:`#/examples/${s}`});return(0,o.jsx)(n(),{language:"yaml",children:r})}},29034(){},33288(){},34612(e,t,s){"use strict";s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>c,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"implementation-guides/pointers/testing/test-cases/struct-storage","title":"Test case: <struct> storage","description":"Solidity tightly packs struct storage words starting from the right-hand side.","source":"@site/docs/implementation-guides/pointers/testing/test-cases/struct-storage.mdx","sourceDirName":"implementation-guides/pointers/testing/test-cases","slug":"/implementation-guides/pointers/testing/test-cases/struct-storage","permalink":"/format/pr-preview/pr-164/docs/implementation-guides/pointers/testing/test-cases/struct-storage","draft":false,"unlisted":false,"editUrl":"https://github.com/ethdebug/format/tree/main/packages/web/docs/implementation-guides/pointers/testing/test-cases/struct-storage.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"<struct> storage"},"sidebar":"docsSidebar","previous":{"title":"Test cases","permalink":"/format/pr-preview/pr-164/docs/implementation-guides/pointers/testing/test-cases/"},"next":{"title":"string storage","permalink":"/format/pr-preview/pr-164/docs/implementation-guides/pointers/testing/test-cases/string-storage"}}');var n=s(31085),i=s(71184),o=s(50507),a=s(14774);const c={sidebar_position:1,sidebar_label:"<struct> storage"},l="Test case: <struct> storage",d={},u=[{value:"Test source",id:"test-source",level:2},{value:"Tested pointer",id:"tested-pointer",level:2}];function p(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsxs)(t.h1,{id:"test-case-struct-storage",children:["Test case: ",(0,n.jsx)(t.code,{children:"<struct> storage"})]})}),"\n",(0,n.jsxs)(t.p,{children:["Solidity tightly packs struct storage words starting from the right-hand side.\nThis test ensures that relative offsets are computed properly for a struct\nwith a few small fields (",(0,n.jsx)(t.code,{children:"struct Record { uint8 x; uint8 y; bytes4 salt; }"}),")."]}),"\n",(0,n.jsx)(t.h2,{id:"test-source",children:"Test source"}),"\n",(0,n.jsx)(o.A,{packageName:"@ethdebug/pointers",sourcePath:"src/test-cases.ts",extract:e=>e.getVariableStatement("structStorageTest")}),"\n",(0,n.jsx)(t.h2,{id:"tested-pointer",children:"Tested pointer"}),"\n",(0,n.jsx)(a.A,{pointerQuery:"struct-storage-contract-variable-slot"})]})}function m(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}},37711(){},50507(e,t,s){"use strict";s.d(t,{A:()=>h});var r=s(54034),n=s.n(r),i=s(76827),o=s(6181);var a=s(14041),c=s(40665),l=s(31085);function d({code:e,links:t,...s}){const r=(0,a.useRef)(null),[i,o]=(0,a.useState)(null);return(0,a.useEffect)((()=>{function e(){if(r.current){const e=r.current.querySelector("pre > code");if(e){const s=Array.from(e.childNodes).flatMap((e=>u(e,t)));o((0,l.jsx)("pre",{className:e.parentElement?.className,children:(0,l.jsx)("code",{className:e.className,children:s})}))}}}e();const s=new MutationObserver(e);return r.current&&s.observe(r.current,{childList:!0,subtree:!0}),()=>s.disconnect()}),[e,t]),i||(0,l.jsx)("div",{ref:r,children:(0,l.jsx)(n(),{...s,children:e})})}function u(e,t){return e.nodeType===Node.TEXT_NODE?function(e,t){const s=[],r=e.textContent||"";let n=0;for(const[i,o]of Object.entries(t)){let e=r.indexOf(i,n);for(;-1!==e;)e>n&&s.push(r.slice(n,e)),s.push((0,l.jsx)(c.A,{to:o,className:"linked-code-block-link",children:i},`${i}-${e}`)),n=e+i.length,e=r.indexOf(i,n)}n<r.length&&s.push(r.slice(n));return s}(e,t):e.nodeType===Node.ELEMENT_NODE?function(e,t){const s=e.tagName.toLowerCase(),r={key:p++,className:e.className};e.style&&e.style.cssText&&(r.style=function(e){const t={};for(const s of e.split(";"))if(s){const[e,r]=s.split(":");if(e&&r){t[e.trim().replace(/-./g,(e=>e[1].toUpperCase()))]=r.trim()}}return t}(e.style.cssText));if(m.has(s))return a.createElement(s,r);const n=Array.from(e.childNodes).flatMap((e=>u(e,t)));return a.createElement(s,r,n)}(e,t):[]}let p=0;const m=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]);function h({packageName:e,sourcePath:t,includePackageNameInTitle:s=!1,extract:r,links:a={},...c}){const u=function(e){const{packages:t}=(0,o.P_)("project-code-plugin");if(!(e in t))throw new Error(`Unknown package name ${e}`);const{sourceFiles:s}=t[e],r=new i.MMY({useInMemoryFileSystem:!0});for(const{filePath:n,text:i}of s)r.createSourceFile(n,i,{overwrite:!0});return r}(e),p=u.getSourceFileOrThrow(t),m=r?r(p,u):p,h=m.getFullText().trim(),g=!r,f=s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("strong",{children:e})," ",t]}):t;return Object.keys(a).length>0?(0,l.jsx)(d,{code:h,links:a,language:"typescript",...c}):(0,l.jsx)(n(),{language:"typescript",...g?{title:f,showLineNumbers:!0}:{showLineNumbers:!1},...c,children:m.getFullText().trim()})}},66052(){},89978(){},91797(){},92560(){}}]);