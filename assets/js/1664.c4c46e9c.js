/*! For license information please see 1664.c4c46e9c.js.LICENSE.txt */
(globalThis.webpackChunk_ethdebug_format_web=globalThis.webpackChunk_ethdebug_format_web||[]).push([[1664],{4148(e,t,n){"use strict";n.d(t,{s:()=>s});var r=n(76210);const s=(0,n(22421).RS)(r.sc)},12065(e,t,n){e.exports=function(e){function t(e){let n,s,i,o=null;function a(...e){if(!a.enabled)return;const r=a,s=Number(new Date),i=s-(n||s);r.diff=i,r.prev=n,r.curr=s,n=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,s)=>{if("%%"===n)return"%";o++;const i=t.formatters[s];if("function"==typeof i){const t=e[o];n=i.call(r,t),e.splice(o,1),o--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(s!==t.namespaces&&(s=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function s(e,t){let n=0,r=0,s=-1,i=0;for(;n<e.length;)if(r<t.length&&(t[r]===e[n]||"*"===t[r]))"*"===t[r]?(s=r,i=n,r++):(n++,r++);else{if(-1===s)return!1;r=s+1,i++,n=i}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const r of n)"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(const n of t.skips)if(s(e,n))return!1;for(const n of t.names)if(s(e,n))return!0;return!1},t.humanize=n(27250),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},20994(e,t,n){"use strict";n.d(t,{tz:()=>ln});class r extends Error{constructor(e){super(e),this.name="ShikiError"}}var s=n(29755);let i=3,o=!1;function a(e,t=3){if(i&&!("number"==typeof i&&t>i)){if(o)throw new Error(`[SHIKI DEPRECATE]: ${e}`);console.trace(`[SHIKI DEPRECATE]: ${e}`)}}function c(e){return Array.isArray(e)?function(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=c(e[n]);return t}(e):e instanceof RegExp?e:"object"==typeof e?function(e){let t={};for(let n in e)t[n]=c(e[n]);return t}(e):e}function u(e,...t){return t.forEach((t=>{for(let n in t)e[n]=t[n]})),e}function d(e){const t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?e:~t==e.length-1?d(e.substring(0,e.length-1)):e.substr(1+~t)}var f=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,l=class{static hasCaptures(e){return null!==e&&(f.lastIndex=0,f.test(e))}static replaceCaptures(e,t,n){return e.replace(f,((e,r,s,i)=>{let o=n[parseInt(r||s,10)];if(!o)return e;{let e=t.substring(o.start,o.end);for(;"."===e[0];)e=e.substring(1);switch(i){case"downcase":return e.toLowerCase();case"upcase":return e.toUpperCase();default:return e}}}))}};function h(e,t){return e<t?-1:e>t?1:0}function p(e,t){if(null===e&&null===t)return 0;if(!e)return-1;if(!t)return 1;let n=e.length,r=t.length;if(n===r){for(let r=0;r<n;r++){let n=h(e[r],t[r]);if(0!==n)return n}return 0}return n-r}function m(e){return!!/^#[0-9a-f]{6}$/i.test(e)||(!!/^#[0-9a-f]{8}$/i.test(e)||(!!/^#[0-9a-f]{3}$/i.test(e)||!!/^#[0-9a-f]{4}$/i.test(e)))}function g(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var b=class{constructor(e){this.fn=e}cache=new Map;get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}},y=class{constructor(e,t,n){this._colorMap=e,this._defaults=t,this._root=n}static createFromRawTheme(e,t){return this.createFromParsedTheme(function(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,n=[],r=0;for(let s=0,i=t.length;s<i;s++){let e,i=t[s];if(!i.settings)continue;if("string"==typeof i.scope){let t=i.scope;t=t.replace(/^[,]+/,""),t=t.replace(/[,]+$/,""),e=t.split(",")}else e=Array.isArray(i.scope)?i.scope:[""];let o=-1;if("string"==typeof i.settings.fontStyle){o=0;let e=i.settings.fontStyle.split(" ");for(let t=0,n=e.length;t<n;t++){switch(e[t]){case"italic":o|=1;break;case"bold":o|=2;break;case"underline":o|=4;break;case"strikethrough":o|=8}}}let a=null;"string"==typeof i.settings.foreground&&m(i.settings.foreground)&&(a=i.settings.foreground);let c=null;"string"==typeof i.settings.background&&m(i.settings.background)&&(c=i.settings.background);for(let t=0,u=e.length;t<u;t++){let i=e[t].trim().split(" "),u=i[i.length-1],d=null;i.length>1&&(d=i.slice(0,i.length-1),d.reverse()),n[r++]=new C(u,d,s,o,a,c)}}return n}(e),t)}static createFromParsedTheme(e,t){return function(e,t){e.sort(((e,t)=>{let n=h(e.scope,t.scope);return 0!==n?n:(n=p(e.parentScopes,t.parentScopes),0!==n?n:e.index-t.index)}));let n=0,r="#000000",s="#ffffff";for(;e.length>=1&&""===e[0].scope;){let t=e.shift();-1!==t.fontStyle&&(n=t.fontStyle),null!==t.foreground&&(r=t.foreground),null!==t.background&&(s=t.background)}let i=new A(t),o=new v(n,i.getId(r),i.getId(s)),a=new k(new I(0,null,-1,0,0),[]);for(let c=0,u=e.length;c<u;c++){let t=e[c];a.insert(0,t.scope,t.parentScopes,t.fontStyle,i.getId(t.foreground),i.getId(t.background))}return new y(i,o,a)}(e,t)}_cachedMatchRoot=new b((e=>this._root.match(e)));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(null===e)return this._defaults;const t=e.scopeName,n=this._cachedMatchRoot.get(t).find((t=>function(e,t){if(0===t.length)return!0;for(let n=0;n<t.length;n++){let r=t[n],s=!1;if(">"===r){if(n===t.length-1)return!1;r=t[++n],s=!0}for(;e&&!_(e.scopeName,r);){if(s)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0}(e.parent,t.parentScopes)));return n?new v(n.fontStyle,n.foreground,n.background):null}},w=class e{constructor(e,t){this.parent=e,this.scopeName=t}static push(t,n){for(const r of n)t=new e(t,r);return t}static from(...t){let n=null;for(let r=0;r<t.length;r++)n=new e(n,t[r]);return n}push(t){return new e(this,t)}getSegments(){let e=this;const t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e||null!==this.parent&&this.parent.extends(e)}getExtensionIfDefined(e){const t=[];let n=this;for(;n&&n!==e;)t.push(n.scopeName),n=n.parent;return n===e?t.reverse():void 0}};function _(e,t){return t===e||e.startsWith(t)&&"."===e[t.length]}var v=class{constructor(e,t,n){this.fontStyle=e,this.foregroundId=t,this.backgroundId=n}};var C=class{constructor(e,t,n,r,s,i){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=s,this.background=i}},E=(e=>(e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e))(E||{});var A=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(null===e)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}},S=Object.freeze([]),I=class e{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,t,n,r,s){this.scopeDepth=e,this.parentScopes=t||S,this.fontStyle=n,this.foreground=r,this.background=s}clone(){return new e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n].clone();return t}acceptOverwrite(e,t,n,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==n&&(this.foreground=n),0!==r&&(this.background=r)}},k=class e{constructor(e,t=[],n={}){this._mainRule=e,this._children=n,this._rulesWithParentScopes=t}_rulesWithParentScopes;static _cmpBySpecificity(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;let n=0,r=0;for(;">"===e.parentScopes[n]&&n++,">"===t.parentScopes[r]&&r++,!(n>=e.parentScopes.length||r>=t.parentScopes.length);){const s=t.parentScopes[r].length-e.parentScopes[n].length;if(0!==s)return s;n++,r++}return t.parentScopes.length-e.parentScopes.length}match(t){if(""!==t){let e,n,r=t.indexOf(".");if(-1===r?(e=t,n=""):(e=t.substring(0,r),n=t.substring(r+1)),this._children.hasOwnProperty(e))return this._children[e].match(n)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(e._cmpBySpecificity),n}insert(t,n,r,s,i,o){if(""===n)return void this._doInsertHere(t,r,s,i,o);let a,c,u,d=n.indexOf(".");-1===d?(a=n,c=""):(a=n.substring(0,d),c=n.substring(d+1)),this._children.hasOwnProperty(a)?u=this._children[a]:(u=new e(this._mainRule.clone(),I.cloneArr(this._rulesWithParentScopes)),this._children[a]=u),u.insert(t+1,c,r,s,i,o)}_doInsertHere(e,t,n,r,s){if(null!==t){for(let i=0,o=this._rulesWithParentScopes.length;i<o;i++){let o=this._rulesWithParentScopes[i];if(0===p(o.parentScopes,t))return void o.acceptOverwrite(e,n,r,s)}-1===n&&(n=this._mainRule.fontStyle),0===r&&(r=this._mainRule.foreground),0===s&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new I(e,t,n,r,s))}else this._mainRule.acceptOverwrite(e,n,r,s)}},x=class e{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(t){const n=e.getLanguageId(t),r=e.getTokenType(t),s=e.getFontStyle(t),i=e.getForeground(t),o=e.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:i,background:o})}static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static containsBalancedBrackets(e){return 0!=(1024&e)}static getFontStyle(e){return(30720&e)>>>11}static getForeground(e){return(16744448&e)>>>15}static getBackground(e){return(4278190080&e)>>>24}static set(t,n,r,s,i,o,a){let c=e.getLanguageId(t),u=e.getTokenType(t),d=e.containsBalancedBrackets(t)?1:0,f=e.getFontStyle(t),l=e.getForeground(t),h=e.getBackground(t);return 0!==n&&(c=n),8!==r&&(u=r),null!==s&&(d=s?1:0),-1!==i&&(f=i),0!==o&&(l=o),0!==a&&(h=a),(c<<0|u<<8|d<<10|f<<11|l<<15|h<<24)>>>0}};function N(e,t){const n=[],r=function(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:()=>{if(!n)return null;const r=n[0];return n=t.exec(e),r}}}(e);let s=r.next();for(;null!==s;){let e=0;if(2===s.length&&":"===s.charAt(1)){switch(s.charAt(0)){case"R":e=1;break;case"L":e=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let t=o();if(n.push({matcher:t,priority:e}),","!==s)break;s=r.next()}return n;function i(){if("-"===s){s=r.next();const e=i();return t=>!!e&&!e(t)}if("("===s){s=r.next();const e=function(){const e=[];let t=o();for(;t&&(e.push(t),"|"===s||","===s);){do{s=r.next()}while("|"===s||","===s);t=o()}return t=>e.some((e=>e(t)))}();return")"===s&&(s=r.next()),e}if(B(s)){const e=[];do{e.push(s),s=r.next()}while(B(s));return n=>t(e,n)}return null}function o(){const e=[];let t=i();for(;t;)e.push(t),t=i();return t=>e.every((e=>e(t)))}}function B(e){return!!e&&!!e.match(/[\w\.:]+/)}function P(e){"function"==typeof e.dispose&&e.dispose()}var U=class{constructor(e){this.scopeName=e}toKey(){return this.scopeName}},R=class{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}},O=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}},G=class{constructor(e,t){this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new U(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const e=this.Q;this.Q=[];const t=new O;for(const n of e)T(n,this.initialScopeName,this.repo,t);for(const n of t.references)if(n instanceof U){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName))continue;if(this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function T(e,t,n,r){const s=n.lookup(e.scopeName);if(!s){if(e.scopeName===t)throw new Error(`No grammar provided for <${t}>`);return}const i=n.lookup(t);e instanceof U?F({baseGrammar:i,selfGrammar:s},r):L(e.ruleName,{baseGrammar:i,selfGrammar:s,repository:s.repository},r);const o=n.injections(e.scopeName);if(o)for(const a of o)r.add(new U(a))}function L(e,t,n){if(t.repository&&t.repository[e]){D([t.repository[e]],t,n)}}function F(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&D(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&D(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function D(e,t,n){for(const r of e){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const e=r.repository?u({},t.repository,r.repository):t.repository;Array.isArray(r.patterns)&&D(r.patterns,{...t,repository:e},n);const s=r.include;if(!s)continue;const i=W(s);switch(i.kind){case 0:F({...t,selfGrammar:t.baseGrammar},n);break;case 1:F(t,n);break;case 2:L(i.ruleName,{...t,repository:e},n);break;case 3:case 4:const r=i.scopeName===t.selfGrammar.scopeName?t.selfGrammar:i.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(r){const s={baseGrammar:t.baseGrammar,selfGrammar:r,repository:e};4===i.kind?L(i.ruleName,s,n):F(s,n)}else 4===i.kind?n.add(new R(i.scopeName,i.ruleName)):n.add(new U(i.scopeName))}}}var M=class{kind=0},H=class{kind=1},$=class{constructor(e){this.ruleName=e}kind=2},Z=class{constructor(e){this.scopeName=e}kind=3},V=class{constructor(e,t){this.scopeName=e,this.ruleName=t}kind=4};function W(e){if("$base"===e)return new M;if("$self"===e)return new H;const t=e.indexOf("#");if(-1===t)return new Z(e);if(0===t)return new $(e.substring(1));{const n=e.substring(0,t),r=e.substring(t+1);return new V(n,r)}}var j=/\\(\d+)/,q=/\\(\d+)/g;Symbol("RuleId");var z=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,t,n,r){this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=l.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=l.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${d(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?l.replaceCaptures(this._name,e,t):this._name}getContentName(e,t){return this._contentNameIsCapturing&&null!==this._contentName?l.replaceCaptures(this._contentName,e,t):this._contentName}},Q=class extends z{retokenizeCapturedWithRuleId;constructor(e,t,n,r,s){super(e,t,n,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(e,t){throw new Error("Not supported!")}compile(e,t){throw new Error("Not supported!")}compileAG(e,t,n,r){throw new Error("Not supported!")}},K=class extends z{_match;captures;_cachedCompiledPatterns;constructor(e,t,n,r,s){super(e,t,n,null),this._match=new te(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ne,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Y=class extends z{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,t,n,r,s){super(e,t,n,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(const n of this.patterns){e.getRule(n).collectPatterns(e,t)}}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ne,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},J=class extends z{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,t,n,r,s,i,o,a,c,u){super(e,t,n,r),this._begin=new te(s,this.id),this.beginCaptures=i,this._end=new te(o||"\uffff",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=c||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,n,r)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ne;for(const t of this.patterns){e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns)}this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}},X=class extends z{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(e,t,n,r,s,i,o,a,c){super(e,t,n,r),this._begin=new te(s,this.id),this.beginCaptures=i,this.whileCaptures=a,this._while=new te(o,-2),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ne;for(const t of this.patterns){e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns)}}return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,n,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,n,r)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new ne,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||"\uffff"),this._cachedCompiledWhilePatterns}},ee=class e{static createCaptureRule(e,t,n,r,s){return e.registerRule((e=>new Q(t,e,n,r,s)))}static getCompiledRuleId(t,n,r){return t.id||n.registerRule((s=>{if(t.id=s,t.match)return new K(t.$vscodeTextmateLocation,t.id,t.name,t.match,e._compileCaptures(t.captures,n,r));if(void 0===t.begin){t.repository&&(r=u({},r,t.repository));let s=t.patterns;return void 0===s&&t.include&&(s=[{include:t.include}]),new Y(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,e._compilePatterns(s,n,r))}return t.while?new X(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,e._compileCaptures(t.whileCaptures||t.captures,n,r),e._compilePatterns(t.patterns,n,r)):new J(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,e._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,e._compilePatterns(t.patterns,n,r))})),t.id}static _compileCaptures(t,n,r){let s=[];if(t){let i=0;for(const e in t){if("$vscodeTextmateLocation"===e)continue;const t=parseInt(e,10);t>i&&(i=t)}for(let e=0;e<=i;e++)s[e]=null;for(const o in t){if("$vscodeTextmateLocation"===o)continue;const i=parseInt(o,10);let a=0;t[o].patterns&&(a=e.getCompiledRuleId(t[o],n,r)),s[i]=e.createCaptureRule(n,t[o].$vscodeTextmateLocation,t[o].name,t[o].contentName,a)}}return s}static _compilePatterns(t,n,r){let s=[];if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i];let a=-1;if(o.include){const t=W(o.include);switch(t.kind){case 0:case 1:a=e.getCompiledRuleId(r[o.include],n,r);break;case 2:let s=r[t.ruleName];s&&(a=e.getCompiledRuleId(s,n,r));break;case 3:case 4:const i=t.scopeName,c=4===t.kind?t.ruleName:null,u=n.getExternalGrammar(i,r);if(u)if(c){let t=u.repository[c];t&&(a=e.getCompiledRuleId(t,n,u.repository))}else a=e.getCompiledRuleId(u.repository.$self,n,u.repository)}}else a=e.getCompiledRuleId(o,n,r);if(-1!==a){const e=n.getRule(a);let t=!1;if((e instanceof Y||e instanceof J||e instanceof X)&&e.hasMissingPatterns&&0===e.patterns.length&&(t=!0),t)continue;s.push(a)}}return{patterns:s,hasMissingPatterns:(t?t.length:0)!==s.length}}},te=class e{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,t){if(e&&"string"==typeof e){const t=e.length;let n=0,r=[],s=!1;for(let i=0;i<t;i++){if("\\"===e.charAt(i)&&i+1<t){const t=e.charAt(i+1);"z"===t?(r.push(e.substring(n,i)),r.push("$(?!\\n)(?<!\\n)"),n=i+2):"A"!==t&&"G"!==t||(s=!0),i++}}this.hasAnchor=s,0===n?this.source=e:(r.push(e.substring(n,t)),this.source=r.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,"string"==typeof this.source?this.hasBackReferences=j.test(this.source):this.hasBackReferences=!1}clone(){return new e(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){if("string"!=typeof this.source)throw new Error("This method should only be called if the source is a string");let n=t.map((t=>e.substring(t.start,t.end)));return q.lastIndex=0,this.source.replace(q,((e,t)=>g(n[parseInt(t,10)]||"")))}_buildAnchorCache(){if("string"!=typeof this.source)throw new Error("This method should only be called if the source is a string");let e,t,n,r,s=[],i=[],o=[],a=[];for(e=0,t=this.source.length;e<t;e++)n=this.source.charAt(e),s[e]=n,i[e]=n,o[e]=n,a[e]=n,"\\"===n&&e+1<t&&(r=this.source.charAt(e+1),"A"===r?(s[e+1]="\uffff",i[e+1]="\uffff",o[e+1]="A",a[e+1]="A"):"G"===r?(s[e+1]="\uffff",i[e+1]="G",o[e+1]="\uffff",a[e+1]="G"):(s[e+1]=r,i[e+1]=r,o[e+1]=r,a[e+1]=r),e++);return{A0_G0:s.join(""),A0_G1:i.join(""),A1_G0:o.join(""),A1_G1:a.join("")}}resolveAnchors(e,t){return this.hasAnchor&&this._anchorCache&&"string"==typeof this.source?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}},ne=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map((e=>e.source));this._cached=new re(e,t,this._items.map((e=>e.ruleId)))}return this._cached}compileAG(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,n){let r=this._items.map((e=>e.resolveAnchors(t,n)));return new re(e,r,this._items.map((e=>e.ruleId)))}},re=class{constructor(e,t,n){this.regExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}scanner;dispose(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}toString(){const e=[];for(let t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}findNextMatchSync(e,t,n){const r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},se=class{constructor(e,t){this.languageId=e,this.tokenType=t}},ie=class e{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,t){this._defaultAttributes=new se(e,8),this._embeddedLanguagesMatcher=new oe(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(t){return null===t?e._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}static _NULL_SCOPE_METADATA=new se(0,0);_getBasicScopeAttributes=new b((e=>{const t=this._scopeToLanguage(e),n=this._toStandardTokenType(e);return new se(t,n)}));_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(t){const n=t.match(e.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},oe=class{values;scopesRegExp;constructor(e){if(0===e.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map((([e,t])=>g(e)));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);return t?this.values.get(t[1]):void 0}},ae=("undefined"!=typeof process&&process.env.VSCODE_TEXTMATE_DEBUG,class{constructor(e,t){this.stack=e,this.stoppedEarly=t}});function ce(e,t,n,r,s,i,o,a){const c=t.content.length;let u=!1,d=-1;if(o){const o=function(e,t,n,r,s,i){let o=s.beginRuleCapturedEOL?0:-1;const a=[];for(let c=s;c;c=c.pop()){const t=c.getRule(e);t instanceof X&&a.push({rule:t,stack:c})}for(let c=a.pop();c;c=a.pop()){const{ruleScanner:a,findOptions:u}=de(c.rule,e,c.stack.endRule,n,r===o),d=a.findNextMatchSync(t,r,u);if(!d){0,s=c.stack.pop();break}if(-2!==d.ruleId){s=c.stack.pop();break}d.captureIndices&&d.captureIndices.length&&(i.produce(c.stack,d.captureIndices[0].start),fe(e,t,n,c.stack,i,c.rule.whileCaptures,d.captureIndices),i.produce(c.stack,d.captureIndices[0].end),o=d.captureIndices[0].end,d.captureIndices[0].end>r&&(r=d.captureIndices[0].end,n=!1))}return{stack:s,linePos:r,anchorPosition:o,isFirstLine:n}}(e,t,n,r,s,i);s=o.stack,r=o.linePos,n=o.isFirstLine,d=o.anchorPosition}const f=Date.now();for(;!u;){if(0!==a){if(Date.now()-f>a)return new ae(s,!0)}l()}return new ae(s,!1);function l(){const o=function(e,t,n,r,s,i){const o=function(e,t,n,r,s,i){const o=s.getRule(e),{ruleScanner:a,findOptions:c}=ue(o,e,s.endRule,n,r===i),u=a.findNextMatchSync(t,r,c);if(u)return{captureIndices:u.captureIndices,matchedRuleId:u.ruleId};return null}(e,t,n,r,s,i),a=e.getInjections();if(0===a.length)return o;const c=function(e,t,n,r,s,i,o){let a,c=Number.MAX_VALUE,u=null,d=0;const f=i.contentNameScopesList.getScopeNames();for(let l=0,h=e.length;l<h;l++){const i=e[l];if(!i.matcher(f))continue;const h=t.getRule(i.ruleId),{ruleScanner:p,findOptions:m}=ue(h,t,null,r,s===o),g=p.findNextMatchSync(n,s,m);if(!g)continue;0;const b=g.captureIndices[0].start;if(!(b>=c)&&(c=b,u=g.captureIndices,a=g.ruleId,d=i.priority,c===s))break}if(u)return{priorityMatch:-1===d,captureIndices:u,matchedRuleId:a};return null}(a,e,t,n,r,s,i);if(!c)return o;if(!o)return c;const u=o.captureIndices[0].start,d=c.captureIndices[0].start;if(d<u||c.priorityMatch&&d===u)return c;return o}(e,t,n,r,s,d);if(!o)return i.produce(s,c),void(u=!0);const a=o.captureIndices,f=o.matchedRuleId,l=!!(a&&a.length>0)&&a[0].end>r;if(-1===f){const o=s.getRule(e);0,i.produce(s,a[0].start),s=s.withContentNameScopesList(s.nameScopesList),fe(e,t,n,s,i,o.endCaptures,a),i.produce(s,a[0].end);const f=s;if(s=s.parent,d=f.getAnchorPos(),!l&&f.getEnterPos()===r)return s=f,i.produce(s,c),void(u=!0)}else{const o=e.getRule(f);i.produce(s,a[0].start);const h=s,p=o.getName(t.content,a),m=s.contentNameScopesList.pushAttributed(p,e);if(s=s.push(f,r,d,a[0].end===c,null,m,m),o instanceof J){const r=o;0,fe(e,t,n,s,i,r.beginCaptures,a),i.produce(s,a[0].end),d=a[0].end;const f=r.getContentName(t.content,a),p=m.pushAttributed(f,e);if(s=s.withContentNameScopesList(p),r.endHasBackReferences&&(s=s.withEndRule(r.getEndWithResolvedBackReferences(t.content,a))),!l&&h.hasSameRuleAs(s))return s=s.pop(),i.produce(s,c),void(u=!0)}else if(o instanceof X){const r=o;0,fe(e,t,n,s,i,r.beginCaptures,a),i.produce(s,a[0].end),d=a[0].end;const f=r.getContentName(t.content,a),p=m.pushAttributed(f,e);if(s=s.withContentNameScopesList(p),r.whileHasBackReferences&&(s=s.withEndRule(r.getWhileWithResolvedBackReferences(t.content,a))),!l&&h.hasSameRuleAs(s))return s=s.pop(),i.produce(s,c),void(u=!0)}else{if(fe(e,t,n,s,i,o.captures,a),i.produce(s,a[0].end),s=s.pop(),!l)return s=s.safePop(),i.produce(s,c),void(u=!0)}}a[0].end>r&&(r=a[0].end,n=!1)}}function ue(e,t,n,r,s){return{ruleScanner:e.compileAG(t,n,r,s),findOptions:0}}function de(e,t,n,r,s){return{ruleScanner:e.compileWhileAG(t,n,r,s),findOptions:0}}function fe(e,t,n,r,s,i,o){if(0===i.length)return;const a=t.content,c=Math.min(i.length,o.length),u=[],d=o[0].end;for(let f=0;f<c;f++){const t=i[f];if(null===t)continue;const c=o[f];if(0===c.length)continue;if(c.start>d)break;for(;u.length>0&&u[u.length-1].endPos<=c.start;)s.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop();if(u.length>0?s.produceFromScopes(u[u.length-1].scopes,c.start):s.produce(r,c.start),t.retokenizeCapturedWithRuleId){const i=t.getName(a,o),u=r.contentNameScopesList.pushAttributed(i,e),d=t.getContentName(a,o),f=u.pushAttributed(d,e),l=r.push(t.retokenizeCapturedWithRuleId,c.start,-1,!1,null,u,f),h=e.createOnigString(a.substring(0,c.end));ce(e,h,n&&0===c.start,c.start,l,s,!1,0),P(h);continue}const l=t.getName(a,o);if(null!==l){const t=(u.length>0?u[u.length-1].scopes:r.contentNameScopesList).pushAttributed(l,e);u.push(new le(t,c.end))}}for(;u.length>0;)s.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop()}var le=class{scopes;endPos;constructor(e,t){this.scopes=e,this.endPos=t}};function he(e,t,n,r,s){const i=N(t,pe),o=ee.getCompiledRuleId(n,r,s.repository);for(const a of i)e.push({debugSelector:t,matcher:a.matcher,ruleId:o,grammar:s,priority:a.priority})}function pe(e,t){if(t.length<e.length)return!1;let n=0;return e.every((e=>{for(let r=n;r<t.length;r++)if(me(t[r],e))return n=r+1,!0;return!1}))}function me(e,t){if(!e)return!1;if(e===t)return!0;const n=t.length;return e.length>n&&e.substr(0,n)===t&&"."===e[n]}var ge=class{constructor(e,t,n,r,s,i,o,a){if(this._rootScopeName=e,this.balancedBracketSelectors=i,this._onigLib=a,this._basicScopeAttributesProvider=new ie(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=be(t,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const c of Object.keys(s)){const e=N(c,pe);for(const t of e)this._tokenTypeMatchers.push({matcher:t.matcher,type:s[c]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e=e=>e===this._rootScopeName?this._grammar:this.getExternalGrammar(e),t=[],n=this._rootScopeName,r=e(n);if(r){const e=r.injections;if(e)for(let n in e)he(t,n,e[n],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach((e=>{const n=this.getExternalGrammar(e);if(n){const e=n.injectionSelector;e&&he(t,e,n,this,n)}}))}return t.sort(((e,t)=>e.priority-t.priority)),t}getInjections(){return null===this._injections&&(this._injections=this._collectInjections()),this._injections}registerRule(e){const t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=be(n,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,n=0){const r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t,n=0){const r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,n,r){let s;if(-1===this._rootId&&(this._rootId=ee.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),t&&t!==we.NULL)s=!1,t.reset();else{s=!0;const e=this._basicScopeAttributesProvider.getDefaultAttributes(),n=this.themeProvider.getDefaults(),r=x.set(0,e.languageId,e.tokenType,null,n.fontStyle,n.foregroundId,n.backgroundId),i=this.getRule(this._rootId).getName(null,null);let o;o=i?ye.createRootAndLookUpScopeName(i,r,this):ye.createRoot("unknown",r),t=new we(null,this._rootId,-1,-1,!1,null,o,o)}e+="\n";const i=this.createOnigString(e),o=i.content.length,a=new ve(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),c=ce(this,i,s,0,t,a,!0,r);return P(i),{lineLength:o,lineTokens:a,ruleStack:c.stack,stoppedEarly:c.stoppedEarly}}};function be(e,t){return(e=c(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var ye=class e{constructor(e,t,n){this.parent=e,this.scopePath=t,this.tokenAttributes=n}static fromExtension(t,n){let r=t,s=t?.scopePath??null;for(const i of n)s=w.push(s,i.scopeNames),r=new e(r,s,i.encodedTokenAttributes);return r}static createRoot(t,n){return new e(null,new w(null,t),n)}static createRootAndLookUpScopeName(t,n,r){const s=r.getMetadataForScope(t),i=new w(null,t),o=r.themeProvider.themeMatch(i),a=e.mergeAttributes(n,s,o);return new e(null,i,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return e.equals(this,t)}static equals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}static mergeAttributes(e,t,n){let r=-1,s=0,i=0;return null!==n&&(r=n.fontStyle,s=n.foregroundId,i=n.backgroundId),x.set(e,t.languageId,t.tokenType,null,r,s,i)}pushAttributed(t,n){if(null===t)return this;if(-1===t.indexOf(" "))return e._pushAttributed(this,t,n);const r=t.split(/ /g);let s=this;for(const i of r)s=e._pushAttributed(s,i,n);return s}static _pushAttributed(t,n,r){const s=r.getMetadataForScope(n),i=t.scopePath.push(n),o=r.themeProvider.themeMatch(i),a=e.mergeAttributes(t.tokenAttributes,s,o);return new e(t,i,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const t=[];let n=this;for(;n&&n!==e;)t.push({encodedTokenAttributes:n.tokenAttributes,scopeNames:n.scopePath.getExtensionIfDefined(n.parent?.scopePath??null)}),n=n.parent;return n===e?t.reverse():void 0}},we=class e{constructor(e,t,n,r,s,i,o,a){this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=s,this.endRule=i,this.nameScopesList=o,this.contentNameScopesList=a,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=n,this._anchorPos=r}_stackElementBrand=void 0;static NULL=new e(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(t){return null!==t&&e._equals(this,t)}static _equals(e,t){return e===t||!!this._structuralEquals(e,t)&&ye.equals(e.contentNameScopesList,t.contentNameScopesList)}static _structuralEquals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){e._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,n,r,s,i,o,a){return new e(this,t,n,r,s,i,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(t,n){const r=ye.fromExtension(t?.nameScopesList??null,n.nameScopesList);return new e(t,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,ye.fromExtension(r,n.contentNameScopesList))}},_e=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(e,t){this.balancedBracketScopes=e.flatMap((e=>"*"===e?(this.allowAny=!0,[]):N(e,pe).map((e=>e.matcher)))),this.unbalancedBracketScopes=t.flatMap((e=>N(e,pe).map((e=>e.matcher))))}get matchesAlways(){return this.allowAny&&0===this.unbalancedBracketScopes.length}get matchesNever(){return 0===this.balancedBracketScopes.length&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}},ve=class{constructor(e,t,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=e,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let n=e?.tokenAttributes??0,r=!1;if(this.balancedBracketSelectors?.matchesAlways&&(r=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const t=e?.getScopeNames()??[];for(const e of this._tokenTypeOverrides)e.matcher(t)&&(n=x.set(n,0,e.type,null,-1,0,0));this.balancedBracketSelectors&&(r=this.balancedBracketSelectors.match(t))}return r&&(n=x.set(n,0,8,r,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===n?void(this._lastTokenEndIndex=t):(this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(n),void(this._lastTokenEndIndex=t))}const n=e?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:n}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},Ce=class{constructor(e,t){this._onigLib=t,this._theme=e}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}grammarForScopeName(e,t,n,r,s){if(!this._grammars.has(e)){let i=this._rawGrammars.get(e);if(!i)return null;this._grammars.set(e,function(e,t,n,r,s,i,o,a){return new ge(e,t,n,r,s,i,o,a)}(e,i,t,n,r,s,this,this._onigLib))}return this._grammars.get(e)}},Ee=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new Ce(y.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(y.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,n){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:n})}loadGrammarWithConfiguration(e,t,n){return this._loadGrammar(e,t,n.embeddedLanguages,n.tokenTypes,new _e(n.balancedBracketSelectors||[],n.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,t,n,r,s){const i=new G(this._syncRegistry,e);for(;i.Q.length>0;)i.Q.map((e=>this._loadSingleGrammar(e.scopeName))),i.processQueue();return this._grammarForScopeName(e,t,n,r,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const t=this._options.loadGrammar(e);if(t){const n="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,n)}}addGrammar(e,t=[],n=0,r=null){return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,n,r)}_grammarForScopeName(e,t=0,n=null,r=null,s=null){return this._syncRegistry.grammarForScopeName(e,t,n,r,s)}},Ae=we.NULL;const Se=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];var Ie=n(20177);const ke={}.hasOwnProperty;function xe(e,t){return e=e.replace(t.subset?function(e){const t=[];let n=-1;for(;++n<e.length;)t.push(e[n].replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}(t.subset):/["&'<>`]/g,n),t.subset||t.escapeOnly?e:e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,(function(e,n,r){return t.format(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,r.charCodeAt(n+2),t)})).replace(/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,n);function n(e,n,r){return t.format(e.charCodeAt(0),r.charCodeAt(n+1),t)}}const Ne=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Be={nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",fnof:"\u0192",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",bull:"\u2022",hellip:"\u2026",prime:"\u2032",Prime:"\u2033",oline:"\u203e",frasl:"\u2044",weierp:"\u2118",image:"\u2111",real:"\u211c",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lArr:"\u21d0",uArr:"\u21d1",rArr:"\u21d2",dArr:"\u21d3",hArr:"\u21d4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",lang:"\u2329",rang:"\u232a",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",quot:'"',amp:"&",lt:"<",gt:">",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",permil:"\u2030",lsaquo:"\u2039",rsaquo:"\u203a",euro:"\u20ac"},Pe=["cent","copy","divide","gt","lt","not","para","times"],Ue={}.hasOwnProperty,Re={};let Oe;for(Oe in Be)Ue.call(Be,Oe)&&(Re[Be[Oe]]=Oe);function Ge(e,t,n){let r,s=function(e,t,n){const r="&#x"+e.toString(16).toUpperCase();return n&&t&&!/[\dA-Fa-f]/.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);if((n.useNamedReferences||n.useShortestReferences)&&(r=function(e,t,n,r){const s=String.fromCharCode(e);if(Ue.call(Re,s)){const e=Re[s],i="&"+e;return n&&Ne.includes(e)&&!Pe.includes(e)&&(!r||t&&61!==t&&/[^\da-z]/i.test(String.fromCharCode(t)))?i:i+";"}return""}(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!r)&&n.useShortestReferences){const r=function(e,t,n){const r="&#"+String(e);return n&&t&&!/\d/.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);r.length<s.length&&(s=r)}return r&&(!n.useShortestReferences||r.length<s.length)?r:s}function Te(e,t){return xe(e,Object.assign({format:Ge},t))}const Le=/^>|^->|<!--|-->|--!>|<!-$/g,Fe=[">"],De=["<",">"];function Me(e,t){const n=String(e);if("string"!=typeof t)throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;-1!==s;)r++,s=n.indexOf(t,s+t.length);return r}var He=n(36469),$e=n(61182),Ze=n(10010),Ve=n(66296);const We=ze(1),je=ze(-1),qe=[];function ze(e){return function(t,n,r){const s=t?t.children:qe;let i=(n||0)+e,o=s[i];if(!r)for(;o&&(0,Ve.m)(o);)i+=e,o=s[i];return o}}const Qe={}.hasOwnProperty;function Ke(e){return function(t,n,r){return Qe.call(e,t.tagName)&&e[t.tagName](t,n,r)}}const Ye=Ke({body:function(e,t,n){const r=We(n,t);return!r||"comment"!==r.type},caption:Je,colgroup:Je,dd:function(e,t,n){const r=We(n,t);return!r||"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName)},dt:function(e,t,n){const r=We(n,t);return Boolean(r&&"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName))},head:Je,html:function(e,t,n){const r=We(n,t);return!r||"comment"!==r.type},li:function(e,t,n){const r=We(n,t);return!r||"element"===r.type&&"li"===r.tagName},optgroup:function(e,t,n){const r=We(n,t);return!r||"element"===r.type&&"optgroup"===r.tagName},option:function(e,t,n){const r=We(n,t);return!r||"element"===r.type&&("option"===r.tagName||"optgroup"===r.tagName)},p:function(e,t,n){const r=We(n,t);return r?"element"===r.type&&("address"===r.tagName||"article"===r.tagName||"aside"===r.tagName||"blockquote"===r.tagName||"details"===r.tagName||"div"===r.tagName||"dl"===r.tagName||"fieldset"===r.tagName||"figcaption"===r.tagName||"figure"===r.tagName||"footer"===r.tagName||"form"===r.tagName||"h1"===r.tagName||"h2"===r.tagName||"h3"===r.tagName||"h4"===r.tagName||"h5"===r.tagName||"h6"===r.tagName||"header"===r.tagName||"hgroup"===r.tagName||"hr"===r.tagName||"main"===r.tagName||"menu"===r.tagName||"nav"===r.tagName||"ol"===r.tagName||"p"===r.tagName||"pre"===r.tagName||"section"===r.tagName||"table"===r.tagName||"ul"===r.tagName):!n||!("element"===n.type&&("a"===n.tagName||"audio"===n.tagName||"del"===n.tagName||"ins"===n.tagName||"map"===n.tagName||"noscript"===n.tagName||"video"===n.tagName))},rp:Xe,rt:Xe,tbody:function(e,t,n){const r=We(n,t);return!r||"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName)},td:et,tfoot:function(e,t,n){return!We(n,t)},th:et,thead:function(e,t,n){const r=We(n,t);return Boolean(r&&"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName))},tr:function(e,t,n){const r=We(n,t);return!r||"element"===r.type&&"tr"===r.tagName}});function Je(e,t,n){const r=We(n,t,!0);return!r||"comment"!==r.type&&!("text"===r.type&&(0,Ve.m)(r.value.charAt(0)))}function Xe(e,t,n){const r=We(n,t);return!r||"element"===r.type&&("rp"===r.tagName||"rt"===r.tagName)}function et(e,t,n){const r=We(n,t);return!r||"element"===r.type&&("td"===r.tagName||"th"===r.tagName)}const tt=Ke({body:function(e){const t=We(e,-1,!0);return!(t&&("comment"===t.type||"text"===t.type&&(0,Ve.m)(t.value.charAt(0))||"element"===t.type&&("meta"===t.tagName||"link"===t.tagName||"script"===t.tagName||"style"===t.tagName||"template"===t.tagName)))},colgroup:function(e,t,n){const r=je(n,t),s=We(e,-1,!0);if(n&&r&&"element"===r.type&&"colgroup"===r.tagName&&Ye(r,n.children.indexOf(r),n))return!1;return Boolean(s&&"element"===s.type&&"col"===s.tagName)},head:function(e){const t=new Set;for(const r of e.children)if("element"===r.type&&("base"===r.tagName||"title"===r.tagName)){if(t.has(r.tagName))return!1;t.add(r.tagName)}const n=e.children[0];return!n||"element"===n.type},html:function(e){const t=We(e,-1);return!t||"comment"!==t.type},tbody:function(e,t,n){const r=je(n,t),s=We(e,-1);if(n&&r&&"element"===r.type&&("thead"===r.tagName||"tbody"===r.tagName)&&Ye(r,n.children.indexOf(r),n))return!1;return Boolean(s&&"element"===s.type&&"tr"===s.tagName)}});const nt={name:[["\t\n\f\r &/=>".split(""),"\t\n\f\r \"&'/=>`".split("")],["\0\t\n\f\r \"&'/<=>".split(""),"\0\t\n\f\r \"&'/<=>`".split("")]],unquoted:[["\t\n\f\r &>".split(""),"\0\t\n\f\r \"&'<=>`".split("")],["\0\t\n\f\r \"&'<=>`".split(""),"\0\t\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function rt(e,t,n){const r=(0,$e.I)(e.schema,t),s=e.settings.allowParseErrors&&"html"===e.schema.space?0:1,i=e.settings.allowDangerousCharacters?0:1;let o,a=e.quote;if(!r.overloadedBoolean||n!==r.attribute&&""!==n?!r.boolean&&!r.overloadedBoolean||"string"==typeof n&&n!==r.attribute&&""!==n||(n=Boolean(n)):n=!0,null==n||!1===n||"number"==typeof n&&Number.isNaN(n))return"";const c=Te(r.attribute,Object.assign({},e.settings.characterReferences,{subset:nt.name[s][i]}));return!0===n?c:(n=Array.isArray(n)?(r.commaSeparated?He.A:Ze.A)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n?c:(e.settings.preferUnquoted&&(o=Te(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:nt.unquoted[s][i]}))),o!==n&&(e.settings.quoteSmart&&Me(n,a)>Me(n,e.alternative)&&(a=e.alternative),o=a+Te(n,Object.assign({},e.settings.characterReferences,{subset:("'"===a?nt.single:nt.double)[s][i],attribute:!0}))+a),c+(o?"="+o:o)))}const st=["<","&"];function it(e,t,n,r){return!n||"element"!==n.type||"script"!==n.tagName&&"style"!==n.tagName?Te(e.value,Object.assign({},r.settings.characterReferences,{subset:st})):e.value}const ot=function(e,t){const n=t||{};function r(t,...n){let s=r.invalid;const i=r.handlers;if(t&&ke.call(t,e)){const n=String(t[e]);s=ke.call(i,n)?i[n]:r.unknown}if(s)return s.call(this,t,...n)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}("type",{invalid:function(e){throw new Error("Expected node, not `"+e+"`")},unknown:function(e){throw new Error("Cannot compile unknown node `"+e.type+"`")},handlers:{comment:function(e,t,n,r){return r.settings.bogusComments?"<?"+Te(e.value,Object.assign({},r.settings.characterReferences,{subset:Fe}))+">":"\x3c!--"+e.value.replace(Le,(function(e){return Te(e,Object.assign({},r.settings.characterReferences,{subset:De}))}))+"--\x3e"},doctype:function(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"},element:function(e,t,n,r){const s=r.schema,i="svg"!==s.space&&r.settings.omitOptionalTags;let o="svg"===s.space?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase());const a=[];let c;"html"===s.space&&"svg"===e.tagName&&(r.schema=Ie.JW);const u=function(e,t){const n=[];let r,s=-1;if(t)for(r in t)if(null!==t[r]&&void 0!==t[r]){const s=rt(e,r,t[r]);s&&n.push(s)}for(;++s<n.length;){const t=e.settings.tightAttributes?n[s].charAt(n[s].length-1):void 0;s!==n.length-1&&'"'!==t&&"'"!==t&&(n[s]+=" ")}return n.join("")}(r,e.properties),d=r.all("html"===s.space&&"template"===e.tagName?e.content:e);return r.schema=s,d&&(o=!1),!u&&i&&tt(e,t,n)||(a.push("<",e.tagName,u?" "+u:""),o&&("svg"===s.space||r.settings.closeSelfClosing)&&(c=u.charAt(u.length-1),(!r.settings.tightSelfClosing||"/"===c||c&&'"'!==c&&"'"!==c)&&a.push(" "),a.push("/")),a.push(">")),a.push(d),o||i&&Ye(e,t,n)||a.push("</"+e.tagName+">"),a.join("")},raw:function(e,t,n,r){return r.settings.allowDangerousHtml?e.value:it(e,0,n,r)},root:function(e,t,n,r){return r.all(e)},text:it}});const at={},ct={},ut=[];function dt(e,t,n){return ot(e,t,n,this)}function ft(e){const t=[],n=e&&e.children||ut;let r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function lt(e,t){const n="string"==typeof e?{}:{...e.colorReplacements},r="string"==typeof e?e:e.name;for(const[s,i]of Object.entries(t?.colorReplacements||{}))"string"==typeof i?n[s]=i:s===r&&Object.assign(n,i);return n}function ht(e,t){return e&&t?.[e?.toLowerCase()]||e}async function pt(e){return Promise.resolve("function"==typeof e?e():e).then((e=>e.default||e))}function mt(e){return!e||["plaintext","txt","text","plain"].includes(e)}function gt(e){return"ansi"===e||mt(e)}function bt(e){return"none"===e}function yt(e){return bt(e)}function wt(e,t){if(!t)return e;e.properties||={},e.properties.class||=[],"string"==typeof e.properties.class&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]);const n=Array.isArray(t)?t:t.split(/\s+/g);for(const r of n)r&&!e.properties.class.includes(r)&&e.properties.class.push(r);return e}function _t(e,t=!1){const n=e.split(/(\r?\n)/g);let r=0;const s=[];for(let i=0;i<n.length;i+=2){const e=t?n[i]+(n[i+1]||""):n[i];s.push([e,r]),r+=n[i].length,r+=n[i+1]?.length||0}return s}function vt(e){const t={};return e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle&&(e.fontStyle&E.Italic&&(t["font-style"]="italic"),e.fontStyle&E.Bold&&(t["font-weight"]="bold"),e.fontStyle&E.Underline&&(t["text-decoration"]="underline")),t}function Ct(e){return"string"==typeof e?e:Object.entries(e).map((([e,t])=>`${e}:${t}`)).join(";")}const Et=new WeakMap;function At(e,t){Et.set(e,t)}function St(e){return Et.get(e)}class It{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,t){return new It(Object.fromEntries((n=t,Array.isArray(n)?n:[n]).map((e=>[e,Ae]))),e);var n}constructor(...e){if(2===e.length){const[t,n]=e;this.lang=n,this._stacks=t}else{const[t,n,r]=e;this.lang=n,this._stacks={[r]:t}}}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return a("GrammarState.scopes is deprecated, use GrammarState.getScopes() instead"),kt(this._stacks[this.theme])}getScopes(e=this.theme){return kt(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function kt(e){const t=[],n=new Set;return function e(r){if(n.has(r))return;n.add(r);const s=r?.nameScopesList?.scopeName;s&&t.push(s),r.parent&&e(r.parent)}(e),t}function xt(){const e=new WeakMap;function t(t){if(!e.has(t.meta)){let n=function(e){if("number"==typeof e){if(e<0||e>t.source.length)throw new r(`Invalid decoration offset: ${e}. Code length: ${t.source.length}`);return{...s.indexToPos(e),offset:e}}{const t=s.lines[e.line];if(void 0===t)throw new r(`Invalid decoration position ${JSON.stringify(e)}. Lines length: ${s.lines.length}`);if(e.character<0||e.character>t.length)throw new r(`Invalid decoration position ${JSON.stringify(e)}. Line ${e.line} length: ${t.length}`);return{...e,offset:s.posToIndex(e.line,e.character)}}};const s=function(e){const t=_t(e,!0).map((([e])=>e));return{lines:t,indexToPos:function(n){if(n===e.length)return{line:t.length-1,character:t[t.length-1].length};let r=n,s=0;for(const e of t){if(r<e.length)break;r-=e.length,s++}return{line:s,character:r}},posToIndex:function(e,n){let r=0;for(let s=0;s<e;s++)r+=t[s].length;return r+=n,r}}}(t.source),i=(t.options.decorations||[]).map((e=>({...e,start:n(e.start),end:n(e.end)})));!function(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.start.offset>n.end.offset)throw new r(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let s=t+1;s<e.length;s++){const t=e[s],i=n.start.offset<=t.start.offset&&t.start.offset<n.end.offset,o=n.start.offset<t.end.offset&&t.end.offset<=n.end.offset,a=t.start.offset<=n.start.offset&&n.start.offset<t.end.offset,c=t.start.offset<n.end.offset&&n.end.offset<=t.end.offset;if(i||o||a||c){if(i&&o)continue;if(a&&c)continue;throw new r(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(t.start)} intersect.`)}}}}(i),e.set(t.meta,{decorations:i,converter:s,source:t.source})}return e.get(t.meta)}return{name:"shiki:decorations",tokens(e){if(!this.options.decorations?.length)return;const n=function(e,t){const n=Array.from(t instanceof Set?t:new Set(t)).sort(((e,t)=>e-t));return n.length?e.map((e=>e.flatMap((e=>{const t=n.filter((t=>e.offset<t&&t<e.offset+e.content.length)).map((t=>t-e.offset)).sort(((e,t)=>e-t));return t.length?function(e,t){let n=0;const r=[];for(const s of t)s>n&&r.push({...e,content:e.content.slice(n,s),offset:e.offset+n}),n=s;return n<e.content.length&&r.push({...e,content:e.content.slice(n),offset:e.offset+n}),r}(e,t):e})))):e}(e,t(this).decorations.flatMap((e=>[e.start.offset,e.end.offset])));return n},code(e){if(!this.options.decorations?.length)return;const n=t(this),s=Array.from(e.children).filter((e=>"element"===e.type&&"span"===e.tagName));if(s.length!==n.converter.lines.length)throw new r(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${n.converter.lines.length}). Failed to apply decorations.`);function i(e,t,n,i){const o=s[e];let c="",u=-1,d=-1;if(0===t&&(u=0),0===n&&(d=0),n===Number.POSITIVE_INFINITY&&(d=o.children.length),-1===u||-1===d)for(let r=0;r<o.children.length;r++)c+=Nt(o.children[r]),-1===u&&c.length===t&&(u=r+1),-1===d&&c.length===n&&(d=r+1);if(-1===u)throw new r(`Failed to find start index for decoration ${JSON.stringify(i.start)}`);if(-1===d)throw new r(`Failed to find end index for decoration ${JSON.stringify(i.end)}`);const f=o.children.slice(u,d);if(i.alwaysWrap||f.length!==o.children.length)if(i.alwaysWrap||1!==f.length||"element"!==f[0].type){const e={type:"element",tagName:"span",properties:{},children:f};a(e,i,"wrapper"),o.children.splice(u,f.length,e)}else a(f[0],i,"token");else a(o,i,"line")}function o(e,t){s[e]=a(s[e],t,"line")}function a(e,t,n){const r=t.properties||{},s=t.transform||(e=>e);return e.tagName=t.tagName||"span",e.properties={...e.properties,...r,class:e.properties.class},t.properties?.class&&wt(e,t.properties.class),e=s(e,n)||e}const c=[],u=n.decorations.sort(((e,t)=>t.start.offset-e.start.offset||e.end.offset-t.end.offset));for(const t of u){const{start:e,end:n}=t;if(e.line===n.line)i(e.line,e.character,n.character,t);else if(e.line<n.line){i(e.line,e.character,Number.POSITIVE_INFINITY,t);for(let r=e.line+1;r<n.line;r++)c.unshift((()=>o(r,t)));i(n.line,0,n.character,t)}}c.forEach((e=>e()))}}}function Nt(e){return"text"===e.type?e.value:"element"===e.type?e.children.map(Nt).join(""):""}const Bt=[xt()];function Pt(e){return[...e.transformers||[],...Bt]}var Ut=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Rt={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function Ot(e,t){const n=e.indexOf("\x1b",t);if(-1!==n&&"["===e[n+1]){const t=e.indexOf("m",n);if(-1!==t)return{sequence:e.substring(n+2,t).split(";"),startPosition:n,position:t+1}}return{position:e.length}}function Gt(e){const t=e.shift();if("2"===t){const t=e.splice(0,3).map((e=>Number.parseInt(e)));if(3!==t.length||t.some((e=>Number.isNaN(e))))return;return{type:"rgb",rgb:t}}if("5"===t){const t=e.shift();if(t)return{type:"table",index:Number(t)}}}function Tt(e){const t=[];for(;e.length>0;){const n=e.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(0===r)t.push({type:"resetAll"});else if(r<=9){Rt[r]&&t.push({type:"setDecoration",value:Rt[r]})}else if(r<=29){const e=Rt[r-20];e&&(t.push({type:"resetDecoration",value:e}),"dim"===e&&t.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)t.push({type:"setForegroundColor",value:{type:"named",name:Ut[r-30]}});else if(38===r){const n=Gt(e);n&&t.push({type:"setForegroundColor",value:n})}else if(39===r)t.push({type:"resetForegroundColor"});else if(r<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:Ut[r-40]}});else if(48===r){const n=Gt(e);n&&t.push({type:"setBackgroundColor",value:n})}else 49===r?t.push({type:"resetBackgroundColor"}):53===r?t.push({type:"setDecoration",value:"overline"}):55===r?t.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?t.push({type:"setForegroundColor",value:{type:"named",name:Ut[r-90+8]}}):r>=100&&r<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:Ut[r-100+8]}})}return t}var Lt={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function Ft(e=Lt){function t(t){return e[t]}function n(e){return`#${e.map((e=>Math.max(0,Math.min(e,255)).toString(16).padStart(2,"0"))).join("")}`}let r;function s(e){return function(){if(r)return r;r=[];for(let n=0;n<Ut.length;n++)r.push(t(Ut[n]));let e=[0,95,135,175,215,255];for(let t=0;t<6;t++)for(let s=0;s<6;s++)for(let i=0;i<6;i++)r.push(n([e[t],e[s],e[i]]));let s=8;for(let t=0;t<24;t++,s+=10)r.push(n([s,s,s]));return r}()[e]}return{value:function(e){switch(e.type){case"named":return t(e.name);case"rgb":return n(e.rgb);case"table":return s(e.index)}}}}function Dt(e,t,n){const r=lt(e,n),s=_t(t),i=Ft(Object.fromEntries(Ut.map((t=>[t,e.colors?.[`terminal.ansi${t[0].toUpperCase()}${t.substring(1)}`]])))),o=function(){let e=null,t=null,n=new Set;return{parse(r){const s=[];let i=0;do{const o=Ot(r,i),a=o.sequence?r.substring(i,o.startPosition):r.substring(i);if(a.length>0&&s.push({value:a,foreground:e,background:t,decorations:new Set(n)}),o.sequence){const r=Tt(o.sequence);for(const s of r)"resetAll"===s.type?(e=null,t=null,n.clear()):"resetForegroundColor"===s.type?e=null:"resetBackgroundColor"===s.type?t=null:"resetDecoration"===s.type&&n.delete(s.value);for(const s of r)"setForegroundColor"===s.type?e=s.value:"setBackgroundColor"===s.type?t=s.value:"setDecoration"===s.type&&n.add(s.value)}i=o.position}while(i<r.length);return s}}}();return s.map((t=>o.parse(t[0]).map((n=>{let s,o;n.decorations.has("reverse")?(s=n.background?i.value(n.background):e.bg,o=n.foreground?i.value(n.foreground):e.fg):(s=n.foreground?i.value(n.foreground):e.fg,o=n.background?i.value(n.background):void 0),s=ht(s,r),o=ht(o,r),n.decorations.has("dim")&&(s=function(e){const t=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(t){if(t[3]){const e=Math.round(Number.parseInt(t[3],16)/2).toString(16).padStart(2,"0");return`#${t[1]}${t[2]}${e}`}return t[2]?`#${t[1]}${t[2]}80`:`#${Array.from(t[1]).map((e=>`${e}${e}`)).join("")}80`}const n=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:e}(s));let a=E.None;return n.decorations.has("bold")&&(a|=E.Bold),n.decorations.has("italic")&&(a|=E.Italic),n.decorations.has("underline")&&(a|=E.Underline),{content:n.value,offset:t[1],color:s,bgColor:o,fontStyle:a}}))))}function Mt(e,t,n={}){const{lang:s="text",theme:i=e.getLoadedThemes()[0]}=n;if(mt(s)||bt(i))return _t(t).map((e=>[{content:e[0],offset:e[1]}]));const{theme:o,colorMap:a}=e.setTheme(i);if("ansi"===s)return Dt(o,t,n);const c=e.getLanguage(s);if(n.grammarState){if(n.grammarState.lang!==c.name)throw new r(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${c.name}"`);if(!n.grammarState.themes.includes(o.name))throw new r(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${o.name}"`)}return function(e,t,n,r,s){const i=$t(e,t,n,r,s),o=new It($t(e,t,n,r,s).stateStack,t.name,n.name);return At(i.tokens,o),i.tokens}(t,c,o,a,n)}function Ht(...e){if(2===e.length)return St(e[1]);const[t,n,s={}]=e,{lang:i="text",theme:o=t.getLoadedThemes()[0]}=s;if(mt(i)||bt(o))throw new r("Plain language does not have grammar state");if("ansi"===i)throw new r("ANSI language does not have grammar state");const{theme:a,colorMap:c}=t.setTheme(o),u=t.getLanguage(i);return new It($t(n,u,a,c,s).stateStack,u.name,a.name)}function $t(e,t,n,s,i){const o=lt(n,i),{tokenizeMaxLineLength:a=0,tokenizeTimeLimit:c=500}=i,u=_t(e);let d=i.grammarState?function(e,t){if(!(e instanceof It))throw new r("Invalid grammar state");return e.getInternalStack(t)}(i.grammarState,n.name)??Ae:null!=i.grammarContextCode?$t(i.grammarContextCode,t,n,s,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:Ae,f=[];const l=[];for(let r=0,p=u.length;r<p;r++){const[e,p]=u[r];if(""===e){f=[],l.push([]);continue}if(a>0&&e.length>=a){f=[],l.push([{content:e,offset:p,color:"",fontStyle:0}]);continue}let m,g,b;i.includeExplanation&&(m=t.tokenizeLine(e,d,c),g=m.tokens,b=0);const y=t.tokenizeLine2(e,d,c),w=y.tokens.length/2;for(let t=0;t<w;t++){const r=y.tokens[2*t],a=t+1<w?y.tokens[2*t+2]:e.length;if(r===a)continue;const c=y.tokens[2*t+1],u=ht(s[x.getForeground(c)],o),d=x.getFontStyle(c),l={content:e.substring(r,a),offset:p+r,color:u,fontStyle:d};if(i.includeExplanation){const t=[];if("scopeName"!==i.includeExplanation)for(const e of n.settings){let n;switch(typeof e.scope){case"string":n=e.scope.split(/,/).map((e=>e.trim()));break;case"object":n=e.scope;break;default:continue}t.push({settings:e,selectors:n.map((e=>e.split(/ /)))})}l.explanation=[];let s=0;for(;r+s<a;){const n=g[b],r=e.substring(n.startIndex,n.endIndex);s+=r.length,l.explanation.push({content:r,scopes:"scopeName"===i.includeExplanation?(h=n.scopes,h.map((e=>({scopeName:e})))):Zt(t,n.scopes)}),b+=1}}f.push(l)}l.push(f),f=[],d=y.ruleStack}var h;return{tokens:l,stateStack:d}}function Zt(e,t){const n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];n[r]={scopeName:s,themeMatches:jt(e,s,t.slice(0,r))}}return n}function Vt(e,t){return e===t||t.substring(0,e.length)===e&&"."===t[e.length]}function Wt(e,t,n){if(!Vt(e[e.length-1],t))return!1;let r=e.length-2,s=n.length-1;for(;r>=0&&s>=0;)Vt(e[r],n[s])&&(r-=1),s-=1;return-1===r}function jt(e,t,n){const r=[];for(const{selectors:s,settings:i}of e)for(const e of s)if(Wt(e,t,n)){r.push(i);break}return r}function qt(e,t,n){const r=Object.entries(n.themes).filter((e=>e[1])).map((e=>({color:e[0],theme:e[1]}))),s=r.map((r=>{const s=Mt(e,t,{...n,theme:r.theme});return{tokens:s,state:St(s),theme:"string"==typeof r.theme?r.theme:r.theme.name}})),i=function(...e){const t=e.map((()=>[])),n=e.length;for(let r=0;r<e[0].length;r++){const s=e.map((e=>e[r])),i=t.map((()=>[]));t.forEach(((e,t)=>e.push(i[t])));const o=s.map((()=>0)),a=s.map((e=>e[0]));for(;a.every((e=>e));){const e=Math.min(...a.map((e=>e.content.length)));for(let t=0;t<n;t++){const n=a[t];n.content.length===e?(i[t].push(n),o[t]+=1,a[t]=s[t][o[t]]):(i[t].push({...n,content:n.content.slice(0,e)}),a[t]={...n,content:n.content.slice(e),offset:n.offset+e})}}}return t}(...s.map((e=>e.tokens))),o=i[0].map(((e,t)=>e.map(((e,s)=>{const o={content:e.content,variants:{},offset:e.offset};return"includeExplanation"in n&&n.includeExplanation&&(o.explanation=e.explanation),i.forEach(((e,n)=>{const{content:i,explanation:a,offset:c,...u}=e[t][s];o.variants[r[n].color]=u})),o})))),a=s[0].state?new It(Object.fromEntries(s.map((e=>[e.theme,e.state?.getInternalStack(e.theme)]))),s[0].state.lang):void 0;return a&&At(o,a),o}function zt(e,t,n){let s,i,o,a,c,u;if("themes"in n){const{defaultColor:d="light",cssVariablePrefix:f="--shiki-"}=n,l=Object.entries(n.themes).filter((e=>e[1])).map((e=>({color:e[0],theme:e[1]}))).sort(((e,t)=>e.color===d?-1:t.color===d?1:0));if(0===l.length)throw new r("`themes` option must not be empty");const h=qt(e,t,n);if(u=St(h),d&&!l.find((e=>e.color===d)))throw new r(`\`themes\` option must contain the defaultColor key \`${d}\``);const p=l.map((t=>e.getTheme(t.theme))),m=l.map((e=>e.color));o=h.map((e=>e.map((e=>function(e,t,n,r){const s={content:e.content,explanation:e.explanation,offset:e.offset},i=t.map((t=>vt(e.variants[t]))),o=new Set(i.flatMap((e=>Object.keys(e)))),a={};return i.forEach(((e,s)=>{for(const i of o){const o=e[i]||"inherit";if(0===s&&r)a[i]=o;else{const e="color"===i?"":"background-color"===i?"-bg":`-${i}`,r=n+t[s]+("color"===i?"":e);a[r]=o}}})),s.htmlStyle=a,s}(e,m,f,d))))),u&&At(o,u);const g=l.map((e=>lt(e.theme,n)));i=l.map(((e,t)=>(0===t&&d?"":`${f+e.color}:`)+(ht(p[t].fg,g[t])||"inherit"))).join(";"),s=l.map(((e,t)=>(0===t&&d?"":`${f+e.color}-bg:`)+(ht(p[t].bg,g[t])||"inherit"))).join(";"),a=`shiki-themes ${p.map((e=>e.name)).join(" ")}`,c=d?void 0:[i,s].join(";")}else{if(!("theme"in n))throw new r("Invalid options, either `theme` or `themes` must be provided");{const r=lt(n.theme,n);o=Mt(e,t,n);const c=e.getTheme(n.theme);s=ht(c.bg,r),i=ht(c.fg,r),a=c.name,u=St(o)}}return{tokens:o,fg:i,bg:s,themeName:a,rootStyle:c,grammarState:u}}function Qt(e,t,n,r={meta:{},options:n,codeToHast:(t,n)=>Qt(e,t,n),codeToTokens:(t,n)=>zt(e,t,n)}){let s=t;for(const a of Pt(n))s=a.preprocess?.call(r,s,n)||s;let{tokens:i,fg:o,bg:c,themeName:u,rootStyle:d,grammarState:f}=zt(e,s,n);const{mergeWhitespaces:l=!0}=n;!0===l?i=function(e){return e.map((e=>{const t=[];let n="",r=0;return e.forEach(((s,i)=>{const o=!(s.fontStyle&&s.fontStyle&E.Underline);o&&s.content.match(/^\s+$/)&&e[i+1]?(r||(r=s.offset),n+=s.content):n?(o?t.push({...s,offset:r,content:n+s.content}):t.push({content:n,offset:r},s),r=0,n=""):t.push(s)})),t}))}(i):"never"===l&&(i=function(e){return e.map((e=>e.flatMap((e=>{if(e.content.match(/^\s+$/))return e;const t=e.content.match(/^(\s*)(.*?)(\s*)$/);if(!t)return e;const[,n,r,s]=t;if(!n&&!s)return e;const i=[{...e,offset:e.offset+n.length,content:r}];return n&&i.unshift({content:n,offset:e.offset}),s&&i.push({content:s,offset:e.offset+n.length+r.length}),i}))))}(i));const h={...r,get source(){return s}};for(const a of Pt(n))i=a.tokens?.call(h,i)||i;return function(e,t,n,r=St(e)){const s=Pt(t),i=[],o={type:"root",children:[]},{structure:c="classic",tabindex:u="0"}=t;let d={type:"element",tagName:"pre",properties:{class:`shiki ${t.themeName||""}`,style:t.rootStyle||`background-color:${t.bg};color:${t.fg}`,...!1!==u&&null!=u?{tabindex:u.toString()}:{},...Object.fromEntries(Array.from(Object.entries(t.meta||{})).filter((([e])=>!e.startsWith("_"))))},children:[]},f={type:"element",tagName:"code",properties:{},children:i};const l=[],h={...n,structure:c,addClassToHast:wt,get source(){return n.source},get tokens(){return e},get options(){return t},get root(){return o},get pre(){return d},get code(){return f},get lines(){return l}};if(e.forEach(((e,t)=>{t&&("inline"===c?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):"classic"===c&&i.push({type:"text",value:"\n"}));let n={type:"element",tagName:"span",properties:{class:"line"},children:[]},r=0;for(const i of e){let e={type:"element",tagName:"span",properties:{...i.htmlAttrs},children:[{type:"text",value:i.content}]};"string"==typeof i.htmlStyle&&a("`htmlStyle` as a string is deprecated. Use an object instead.");const u=Ct(i.htmlStyle||vt(i));u&&(e.properties.style=u);for(const o of s)e=o?.span?.call(h,e,t+1,r,n,i)||e;"inline"===c?o.children.push(e):"classic"===c&&n.children.push(e),r+=i.content.length}if("classic"===c){for(const e of s)n=e?.line?.call(h,n,t+1)||n;l.push(n),i.push(n)}})),"classic"===c){for(const e of s)f=e?.code?.call(h,f)||f;d.children.push(f);for(const e of s)d=e?.pre?.call(h,d)||d;o.children.push(d)}let p=o;for(const a of s)p=a?.root?.call(h,p)||p;r&&At(p,r);return p}(i,{...n,fg:o,bg:c,themeName:u,rootStyle:d},h,f)}function Kt(e,t,n){const r={meta:{},options:n,codeToHast:(t,n)=>Qt(e,t,n),codeToTokens:(t,n)=>zt(e,t,n)};let s=function(e,t){const n=t||at,r=n.quote||'"',s='"'===r?"'":'"';if('"'!==r&&"'"!==r)throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:dt,all:ft,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||Se,characterReferences:n.characterReferences||ct,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:"svg"===n.space?Ie.JW:Ie.qy,quote:r,alternative:s}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}(Qt(e,t,n,r));for(const i of Pt(n))s=i.postprocess?.call(r,s,n)||s;return s}const Yt="#333333",Jt="#bbbbbb",Xt="#fffffe",en="#1e1e1e",tn="__shiki_resolved";function nn(e){if(e?.[tn])return e;const t={...e};t.tokenColors&&!t.settings&&(t.settings=t.tokenColors,delete t.tokenColors),t.type||="dark",t.colorReplacements={...t.colorReplacements},t.settings||=[];let{bg:n,fg:r}=t;if(!n||!r){const e=t.settings?t.settings.find((e=>!e.name&&!e.scope)):void 0;e?.settings?.foreground&&(r=e.settings.foreground),e?.settings?.background&&(n=e.settings.background),!r&&t?.colors?.["editor.foreground"]&&(r=t.colors["editor.foreground"]),!n&&t?.colors?.["editor.background"]&&(n=t.colors["editor.background"]),r||(r="light"===t.type?Yt:Jt),n||(n="light"===t.type?Xt:en),t.fg=r,t.bg=n}t.settings[0]&&t.settings[0].settings&&!t.settings[0].scope||t.settings.unshift({settings:{foreground:t.fg,background:t.bg}});let s=0;const i=new Map;function o(e){if(i.has(e))return i.get(e);s+=1;const n=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return t.colorReplacements?.[`#${n}`]?o(e):(i.set(e,n),n)}t.settings=t.settings.map((e=>{const n=e.settings?.foreground&&!e.settings.foreground.startsWith("#"),r=e.settings?.background&&!e.settings.background.startsWith("#");if(!n&&!r)return e;const s={...e,settings:{...e.settings}};if(n){const n=o(e.settings.foreground);t.colorReplacements[n]=e.settings.foreground,s.settings.foreground=n}if(r){const n=o(e.settings.background);t.colorReplacements[n]=e.settings.background,s.settings.background=n}return s}));for(const a of Object.keys(t.colors||{}))if(("editor.foreground"===a||"editor.background"===a||a.startsWith("terminal.ansi"))&&!t.colors[a]?.startsWith("#")){const e=o(t.colors[a]);t.colorReplacements[e]=t.colors[a],t.colors[a]=e}return Object.defineProperty(t,tn,{enumerable:!1,writable:!1,value:!0}),t}async function rn(e){return Array.from(new Set((await Promise.all(e.filter((e=>!gt(e))).map((async e=>await pt(e).then((e=>Array.isArray(e)?e:[e])))))).flat()))}async function sn(e){return(await Promise.all(e.map((async e=>yt(e)?null:nn(await pt(e)))))).filter((e=>!!e))}class on extends Error{constructor(e){super(e),this.name="ShikiError"}}class an extends Ee{constructor(e,t,n,r={}){super(e),this._resolver=e,this._themes=t,this._langs=n,this._alias=r,this._themes.map((e=>this.loadTheme(e))),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return"string"==typeof e?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const t=nn(e);return t.name&&(this._resolvedThemes.set(t.name,t),this._loadedThemesCache=null),t}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let t=this._textmateThemeCache.get(e);t||(t=y.createFromRawTheme(e),this._textmateThemeCache.set(e,t)),this._syncRegistry.setTheme(t)}getGrammar(e){if(this._alias[e]){const t=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],t.has(e))throw new on(`Circular alias \`${Array.from(t).join(" -> ")} -> ${e}\``);t.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const t=new Set([...this._langMap.values()].filter((t=>t.embeddedLangsLazy?.includes(e.name))));this._resolver.addLanguage(e);const n={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const r=this.loadGrammarWithConfiguration(e.scopeName,1,n);if(r.name=e.name,this._resolvedGrammars.set(e.name,r),e.aliases&&e.aliases.forEach((t=>{this._alias[t]=e.name})),this._loadedLanguagesCache=null,t.size)for(const s of t)this._resolvedGrammars.delete(s.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(s.scopeName),this._syncRegistry?._grammars?.delete(s.scopeName),this.loadLanguage(this._langMap.get(s.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const r of e)this.resolveEmbeddedLanguages(r);const t=Array.from(this._langGraph.entries()),n=t.filter((([e,t])=>!t));if(n.length){const e=t.filter((([e,t])=>t&&t.embeddedLangs?.some((e=>n.map((([e])=>e)).includes(e))))).filter((e=>!n.includes(e)));throw new on(`Missing languages ${n.map((([e])=>`\`${e}\``)).join(", ")}, required by ${e.map((([e])=>`\`${e}\``)).join(", ")}`)}for(const[r,s]of t)this._resolver.addLanguage(s);for(const[r,s]of t)this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const t of e.embeddedLangs)this._langGraph.set(t,this._langMap.get(t))}}class cn{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,t){this._onigLib={createOnigScanner:t=>e.createScanner(t),createOnigString:t=>e.createString(t)},t.forEach((e=>this.addLanguage(e)))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach((t=>{this._langs.set(t,e)})),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach((t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)}))}getInjections(e){const t=e.split(".");let n=[];for(let r=1;r<=t.length;r++){const e=t.slice(0,r).join(".");n=[...n,...this._injections.get(e)||[]]}return n}}let un=0;function dn(e){un+=1,!1!==e.warnings&&un>=10&&un%10==0&&console.warn(`[Shiki] ${un} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let t=!1;if(!e.engine)throw new on("`engine` option is required for synchronous mode");const n=(e.langs||[]).flat(1),r=(e.themes||[]).flat(1).map(nn),s=new cn(e.engine,n),i=new an(s,r,n,e.langAlias);let o;function a(e){if("none"===e)return{bg:"",fg:"",name:"none",settings:[],type:"dark"};d();const t=i.getTheme(e);if(!t)throw new on(`Theme \`${e}\` not found, you may need to load it first`);return t}function c(...e){d(),i.loadLanguages(e.flat(1))}function u(...e){d();for(const t of e.flat(1))i.loadTheme(t)}function d(){if(t)throw new on("Shiki instance has been disposed")}function f(){t||(t=!0,i.dispose(),un-=1)}return{setTheme:function(e){d();const t=a(e);return o!==e&&(i.setTheme(t),o=e),{theme:t,colorMap:i.getColorMap()}},getTheme:a,getLanguage:function(e){d();const t=i.getGrammar("string"==typeof e?e:e.name);if(!t)throw new on(`Language \`${e}\` not found, you may need to load it first`);return t},getLoadedThemes:function(){return d(),i.getLoadedThemes()},getLoadedLanguages:function(){return d(),i.getLoadedLanguages()},loadLanguage:async function(...e){return c(await rn(e))},loadLanguageSync:c,loadTheme:async function(...e){return d(),u(await sn(e))},loadThemeSync:u,dispose:f,[Symbol.dispose]:f}}async function fn(e){e.loadWasm&&a("`loadWasm` option is deprecated. Use `engine: createOnigurumaEngine(loadWasm)` instead."),e.engine||a("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[t,n,r]=await Promise.all([sn(e.themes||[]),rn(e.langs||[]),e.engine||(0,s.Mk)(e.loadWasm||(0,s.X)())]);return dn({...e,themes:t,langs:n,engine:r})}async function ln(e){const t=await fn(e);return{getLastGrammarState:(...e)=>Ht(t,...e),codeToTokensBase:(e,n)=>Mt(t,e,n),codeToTokensWithThemes:(e,n)=>qt(t,e,n),codeToTokens:(e,n)=>zt(t,e,n),codeToHast:(e,n)=>Qt(t,e,n),codeToHtml:(e,n)=>Kt(t,e,n),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...t,getInternalContext:()=>t}}},22772(e,t,n){"use strict";n.d(t,{y_:()=>h,Bi:()=>d,sr:()=>u,DA:()=>r});const r={name:"mainnet",chainId:1,defaultHardfork:"prague",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},depositContractAddress:"0x00000000219ab540356cBB839Cbe05303d7705Fa",hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{name:"paris",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeNetsplitBlock",block:null,forkHash:null},{name:"shanghai",block:null,timestamp:"1681338455",forkHash:"0xdce96c2d"},{name:"cancun",block:null,timestamp:"1710338135",forkHash:"0x9f3d2254"},{name:"prague",block:null,timestamp:"1746612311",forkHash:"0xc376cf8b"},{name:"osaka",block:null,timestamp:"1764798551",forkHash:"0x5167e2a6"},{name:"bpo1",block:null,timestamp:"1765290071",forkHash:"0xcba2a1c0"},{name:"bpo2",block:null,timestamp:"1767747671",forkHash:"0x07c9462e"}],bootstrapNodes:[{ip:"18.138.108.67",port:30303,id:"d860a01f9722d78051619d1e2351aba3f43f943f6f00718d1b9baa4101932a1f5011f16bb2b1bb35db20d6fe28fa0bf09636d26a87d31de9ec6203eeedb1f666",location:"ap-southeast-1-001",comment:"bootnode-aws-ap-southeast-1-001"},{ip:"3.209.45.79",port:30303,id:"22a8232c3abc76a16ae9d6c3b164f98775fe226f0917b0ca871128a74a8e9630b458460865bab457221f1d448dd9791d24c4e5d88786180ac185df813a68d4de",location:"us-east-1-001",comment:"bootnode-aws-us-east-1-001"},{ip:"65.108.70.101",port:30303,id:"2b252ab6a1d0f971d9722cb839a42cb81db019ba44c08754628ab4a823487071b5695317c8ccd085219c3a03af063495b2f1da8d18218da2d6a82981b45e6ffc",location:"eu-west-1-001",comment:"bootnode-hetzner-hel"},{ip:"157.90.35.166",port:30303,id:"4aeb4ab6c14b23e2c4cfdce879c04b0748a20d8e9b59e25ded2a08143e265c6c25936e74cbc8e641e3312ca288673d91f2f93f8e277de3cfa444ecdaaf982052",location:"eu-central-1-001",comment:"bootnode-hetzner-fsn"}],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]};var s=n(75045),i=n(27429);let o=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!=typeof Int32Array&&(o=new Int32Array(o));const a=(e,t)=>((e,t)=>{let n=0===t?0:-1^~~t;for(let r=0;r<e.length;r++)n=o[255&(n^e[r])]^n>>>8;return-1^n})(e,t)>>>0,c={Mainnet:1,Sepolia:11155111,Holesky:17e3,Hoodi:560048},u=(Object.entries(c).reduce(((e,[t,n])=>(e[n]=t,e)),{}),s.ZUg,(0,s.aTq)("0xd7f8974fb5ac78d9ac099b9ad5018bedc2ce0a72dad1827a1709da30580f0544"),s.ZUg,(0,s.aTq)("0x5eb6e371a698b8d68f665192350ffcecbbbf322916f4b51bd79bb6887da3f494"),s.ZUg,(0,s.aTq)("0x69d8c9d72f6fa4ad42d4702b433707212f90db395eb54dc20bc85de253788783"),s.ZUg,(0,s.aTq)("0xda87d7f5f91c51508791bbcbd4aa5baf04917830b86985eeb9ad3d5bfb657576"),{Chainstart:"chainstart",Homestead:"homestead",Dao:"dao",TangerineWhistle:"tangerineWhistle",SpuriousDragon:"spuriousDragon",Byzantium:"byzantium",Constantinople:"constantinople",Petersburg:"petersburg",Istanbul:"istanbul",MuirGlacier:"muirGlacier",Berlin:"berlin",London:"london",ArrowGlacier:"arrowGlacier",GrayGlacier:"grayGlacier",MergeNetsplitBlock:"mergeNetsplitBlock",Paris:"paris",Shanghai:"shanghai",Cancun:"cancun",Prague:"prague",Osaka:"osaka",Bpo1:"bpo1",Bpo2:"bpo2",Bpo3:"bpo3",Bpo4:"bpo4",Bpo5:"bpo5"}),d={Ethash:"ethash",Clique:"clique",Casper:"casper"},f={1:{minimumHardfork:u.Chainstart},606:{minimumHardfork:u.Chainstart},608:{minimumHardfork:u.Homestead},607:{minimumHardfork:u.TangerineWhistle},609:{minimumHardfork:u.SpuriousDragon},1013:{minimumHardfork:u.Constantinople},1716:{minimumHardfork:u.Constantinople},1679:{minimumHardfork:u.Constantinople},2384:{minimumHardfork:u.Istanbul},663:{minimumHardfork:u.Chainstart,requiredEIPs:[3540,5450]},1153:{minimumHardfork:u.Chainstart},1559:{minimumHardfork:u.Berlin,requiredEIPs:[2930]},2565:{minimumHardfork:u.Byzantium},2537:{minimumHardfork:u.Chainstart},2718:{minimumHardfork:u.Chainstart},2929:{minimumHardfork:u.Chainstart},2930:{minimumHardfork:u.Istanbul,requiredEIPs:[2718,2929]},2935:{minimumHardfork:u.Chainstart},3198:{minimumHardfork:u.London},3529:{minimumHardfork:u.Berlin,requiredEIPs:[2929]},3540:{minimumHardfork:u.London,requiredEIPs:[3541,3860]},3541:{minimumHardfork:u.Berlin},3554:{minimumHardfork:u.MuirGlacier},3607:{minimumHardfork:u.Chainstart},3651:{minimumHardfork:u.London,requiredEIPs:[2929]},3670:{minimumHardfork:u.London,requiredEIPs:[3540]},3675:{minimumHardfork:u.London},3855:{minimumHardfork:u.Chainstart},3860:{minimumHardfork:u.SpuriousDragon},4200:{minimumHardfork:u.London,requiredEIPs:[3540,3670]},4345:{minimumHardfork:u.London},4399:{minimumHardfork:u.London},4750:{minimumHardfork:u.London,requiredEIPs:[3540,3670,5450]},4788:{minimumHardfork:u.Cancun},4844:{minimumHardfork:u.Paris,requiredEIPs:[1559,2718,2930,4895]},4895:{minimumHardfork:u.Paris},5133:{minimumHardfork:u.GrayGlacier},5450:{minimumHardfork:u.London,requiredEIPs:[3540,3670,4200,4750]},5656:{minimumHardfork:u.Shanghai},6110:{minimumHardfork:u.Cancun,requiredEIPs:[7685]},6206:{minimumHardfork:u.London,requiredEIPs:[4750,5450]},6780:{minimumHardfork:u.London},7002:{minimumHardfork:u.Paris,requiredEIPs:[7685]},7069:{minimumHardfork:u.Berlin,requiredEIPs:[2929]},7251:{minimumHardfork:u.Paris,requiredEIPs:[7685]},7480:{minimumHardfork:u.London,requiredEIPs:[3540,3670]},7516:{minimumHardfork:u.Paris,requiredEIPs:[4844]},7594:{minimumHardfork:u.Paris,requiredEIPs:[4844]},7620:{minimumHardfork:u.London,requiredEIPs:[3540,3541,3670]},7623:{minimumHardfork:u.Chainstart,requiredEIPs:[]},7685:{minimumHardfork:u.Cancun,requiredEIPs:[3675]},7691:{minimumHardfork:u.Paris,requiredEIPs:[4844]},7918:{minimumHardfork:u.Paris,requiredEIPs:[4844]},7692:{minimumHardfork:u.Cancun,requiredEIPs:[663,3540,3670,4200,4750,5450,6206,7069,7480,7620,7698]},7698:{minimumHardfork:u.London,requiredEIPs:[3540,7620]},7702:{minimumHardfork:u.Cancun,requiredEIPs:[2718,2929,2930]},7823:{minimumHardfork:u.Byzantium},7709:{minimumHardfork:u.Chainstart,requiredEIPs:[2935]},7825:{minimumHardfork:u.Chainstart,requiredEIPs:[]},7864:{minimumHardfork:u.London},7883:{minimumHardfork:u.Chainstart},7939:{minimumHardfork:u.Chainstart,requiredEIPs:[]},7951:{minimumHardfork:u.Chainstart,requiredEIPs:[]},7934:{minimumHardfork:u.Chainstart,requiredEIPs:[]}},l={chainstart:{eips:[1]},homestead:{eips:[606]},dao:{eips:[]},tangerineWhistle:{eips:[608]},spuriousDragon:{eips:[607]},byzantium:{eips:[609]},constantinople:{eips:[1013]},petersburg:{eips:[1716]},istanbul:{eips:[1679]},muirGlacier:{eips:[2384]},berlin:{eips:[2565,2929,2718,2930]},london:{eips:[1559,3198,3529,3541]},arrowGlacier:{eips:[4345]},grayGlacier:{eips:[5133]},paris:{consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]},mergeNetsplitBlock:{eips:[]},shanghai:{eips:[3651,3855,3860,4895]},cancun:{eips:[1153,4844,4788,5656,6780,7516]},prague:{eips:[2537,2935,6110,7002,7251,7623,7685,7691,7702]},osaka:{eips:[7594,7823,7825,7883,7939,7951,7918]},bpo1:{eips:[],params:{target:10,max:15,blobGasPriceUpdateFraction:8346193}},bpo2:{eips:[],params:{target:14,max:21,blobGasPriceUpdateFraction:11684671}}};class h{constructor(e){this._eips=[],this._paramsCache={},this._activatedEIPsCache=[],this.events=new i.b,this._chainParams=JSON.parse(JSON.stringify(e.chain)),this.DEFAULT_HARDFORK=this._chainParams.defaultHardfork??u.Prague,this.HARDFORK_CHANGES=this.hardforks().map((e=>[e.name,(this._chainParams.customHardforks&&this._chainParams.customHardforks[e.name])??l[e.name]])),this._hardfork=this.DEFAULT_HARDFORK,this._params=e.params?JSON.parse(JSON.stringify(e.params)):{},void 0!==e.hardfork&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips),this.customCrypto=e.customCrypto??{},0===Object.keys(this._paramsCache).length&&(this._buildParamsCache(),this._buildActivatedEIPsCache())}updateParams(e){for(const[t,n]of Object.entries(e))t in this._params?this._params[t]=JSON.parse(JSON.stringify({...this._params[t],...e[t]})):this._params[t]=JSON.parse(JSON.stringify(n));this._buildParamsCache()}resetParams(e){this._params=JSON.parse(JSON.stringify(e)),this._buildParamsCache()}setHardfork(e){let t=!1;for(const n of this.HARDFORK_CHANGES)n[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this._buildParamsCache(),this._buildActivatedEIPsCache(),this.events.emit("hardforkChanged",e)),t=!0);if(!t)throw(0,s.mQ1)(`Hardfork with name ${e} not supported`)}getHardforkBy(e){const t=(0,s.AxX)(e.blockNumber,s.eqk.BigInt),n=(0,s.AxX)(e.timestamp,s.eqk.BigInt),r=this.hardforks().filter((e=>null!==e.block||void 0!==e.timestamp));let i=r.findIndex((e=>void 0!==t&&null!==e.block&&BigInt(e.block)>t||void 0!==n&&void 0!==e.timestamp&&BigInt(e.timestamp)>n));if(-1===i)i=r.length;else if(0===i)throw Error("Must have at least one hardfork at block 0");if(void 0===n){i-=r.slice(0,i).reverse().findIndex((e=>null!==e.block))}i-=1;const o=i;for(;i<r.length-1&&(r[i].block===r[i+1].block&&r[i].timestamp===r[i+1].timestamp);i++);if(void 0!==n){if(r.slice(0,o).reduce(((e,t)=>Math.max(Number(t.timestamp??"0"),e)),0)>n)throw Error("Maximum HF determined by timestamp is lower than the block number HF");if(r.slice(i+1).reduce(((e,t)=>Math.min(Number(t.timestamp??n),e)),Number(n))<n)throw Error("Maximum HF determined by block number is lower than timestamp HF")}return r[i].name}setHardforkBy(e){const t=this.getHardforkBy(e);return this.setHardfork(t),t}_getHardfork(e){const t=this.hardforks();for(const n of t)if(n.name===e)return n;return null}setEIPs(e=[]){for(const t of e){if(!(t in f))throw(0,s.mQ1)(`${t} not supported`);const e=this.gteHardfork(f[t].minimumHardfork);if(!e)throw(0,s.mQ1)(`${t} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${e}`)}this._eips=e,this._buildParamsCache(),this._buildActivatedEIPsCache();for(const t of e)if(void 0!==f[t].requiredEIPs)for(const n of f[t].requiredEIPs)if(!e.includes(n)&&!this.isActivatedEIP(n))throw(0,s.mQ1)(`${t} requires EIP ${n}, but is not included in the EIP list`)}_mergeWithParamsCache(e){for(const[t,n]of Object.entries(e))this._paramsCache[t]=n}_buildParamsCache(){this._paramsCache={};const e=this.hardfork();for(const t of this.HARDFORK_CHANGES){if("eips"in t[1]){const e=t[1].eips??[];for(const t of e)void 0!==this._params[t]&&null!==this._params[t]&&this._mergeWithParamsCache(this._params[t])}const n=this._params[t[0]];if(null!=n&&this._mergeWithParamsCache(n),void 0!==t[1].params&&null!==t[1].params&&this._mergeWithParamsCache(t[1].params),t[0]===e)break}for(const t of this._eips)void 0!==this._params[t]&&null!==this._params[t]&&this._mergeWithParamsCache(this._params[t])}_buildActivatedEIPsCache(){this._activatedEIPsCache=[];for(const[e,t]of this.HARDFORK_CHANGES)this.gteHardfork(e)&&"eips"in t&&(this._activatedEIPsCache=this._activatedEIPsCache.concat(t.eips??[]));this._activatedEIPsCache=this._activatedEIPsCache.concat(this._eips)}param(e){if(!(e in this._paramsCache))throw(0,s.mQ1)(`Missing parameter value for ${e}`);const t=this._paramsCache[e];return BigInt(t??0)}paramByHardfork(e,t){let n;for(const r of this.HARDFORK_CHANGES){if("eips"in r[1]){const t=r[1].eips;for(const r of t){const t=this._params[r],s=t?.[e];void 0!==s&&(n=s)}}else{const t=r[1].params?.[e];void 0!==t&&(n=t)}if(r[0]===t)break}if(void 0===n)throw(0,s.mQ1)(`Missing parameter value for ${e}`);return BigInt(n??0)}paramByEIP(e,t){if(!(t in f))throw(0,s.mQ1)(`${t} not supported`);const n=this._params[t];if(void 0===n?.[e])throw(0,s.mQ1)(`Missing parameter value for ${e}`);const r=n[e];return BigInt(r??0)}paramByBlock(e,t,n){const r=this.getHardforkBy({blockNumber:t,timestamp:n});return this.paramByHardfork(e,r)}getBlobGasSchedule(){return this.gteHardfork(u.Bpo1)?{targetBlobGasPerBlock:this.param("target")*this.param("blobGasPerBlob"),maxBlobGasPerBlock:this.param("max")*this.param("blobGasPerBlob"),blobGasPriceUpdateFraction:this.param("blobGasPriceUpdateFraction")}:{targetBlobGasPerBlock:this.param("targetBlobGasPerBlock"),maxBlobGasPerBlock:this.param("maxBlobGasPerBlock"),blobGasPriceUpdateFraction:this.param("blobGasPriceUpdateFraction")}}isActivatedEIP(e){return!!this._activatedEIPsCache.includes(e)}hardforkIsActiveOnBlock(e,t){t=(0,s.AxX)(t,s.eqk.BigInt),e=e??this._hardfork;const n=this.hardforkBlock(e);return"bigint"==typeof n&&n!==s.ZUg&&t>=n}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){e=e??this._hardfork;const n=this.hardforks();let r=-1,s=-1,i=0;for(const o of n)o.name===e&&(r=i),o.name===t&&(s=i),i+=1;return r>=s&&-1!==s}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){e=e??this._hardfork;const t=this._getHardfork(e)?.block;return null==t?null:BigInt(t)}hardforkTimestamp(e){e=e??this._hardfork;const t=this._getHardfork(e)?.timestamp;return null==t?null:BigInt(t)}eipBlock(e){for(const t of this.HARDFORK_CHANGES){const n=t[1];if("eips"in n&&n.eips.includes(e))return this.hardforkBlock(t[0])}return null}eipTimestamp(e){for(const t of this.HARDFORK_CHANGES){const n=t[1];if("eips"in n&&n.eips.includes(e))return this.hardforkTimestamp(t[0])}return null}nextHardforkBlockOrTimestamp(e){const t=e??this._hardfork,n=this.hardforks();let r=n.findIndex((e=>e.name===t));if(t===u.Paris&&(r-=1),r<0)return null;const s=n[r],i=s.timestamp??s.block;if(null==i)return null;const o=n.slice(r+1).find((e=>{const t=e.timestamp??e.block;return null!=t&&t!==i}));if(void 0===o)return null;const a=o.timestamp??o.block;return null==a?null:BigInt(a)}_calcForkHash(e,t){let n=new Uint8Array(0),r=0;for(const o of this.hardforks()){const{block:t,timestamp:i,name:a}=o;let c=i??t;if(c=null!==c?Number(c):null,"number"==typeof c&&0!==c&&c!==r&&a!==u.Paris){const e=(0,s.aTq)(`0x${c.toString(16).padStart(16,"0")}`);n=(0,s.Idy)(n,e),r=c}if(o.name===e)break}const i=(0,s.Idy)(t,n);return(0,s.MyA)((0,s.m5d)(a(i)>>>0))}forkHash(e,t){e=e??this._hardfork;const n=this._getHardfork(e);if(null===n||null===n?.block&&void 0===n?.timestamp){const e="No fork hash calculation possible for future hardfork";throw(0,s.mQ1)(e)}if(null!=n?.forkHash)return n.forkHash;if(!t)throw(0,s.mQ1)("genesisHash required for forkHash calculation");return this._calcForkHash(e,t)}hardforkForForkHash(e){const t=this.hardforks().filter((t=>t.forkHash===e));return t.length>=1?t[t.length-1]:null}setForkHashes(e){for(const t of this.hardforks()){const n=t.timestamp??t.block;null!==t.forkHash&&void 0!==t.forkHash||null==n||(t.forkHash=this.forkHash(t.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){const e=this._chainParams.hardforks;return void 0!==this._chainParams.customHardforks&&this._chainParams.customHardforks,e}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}eips(){return this._eips}consensusType(){const e=this.hardfork();let t;for(const n of this.HARDFORK_CHANGES)if("consensus"in n[1]&&(t=n[1].consensus.type),n[0]===e)break;return t??this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let t;for(const n of this.HARDFORK_CHANGES)if("consensus"in n[1]&&(t=n[1].consensus.algorithm),n[0]===e)break;return t??this._chainParams.consensus.algorithm}consensusConfig(){const e=this.hardfork();let t;for(const n of this.HARDFORK_CHANGES){if("consensus"in n[1]){const e=n[1],r=e.consensus.algorithm;t=e.consensus[r]}if(n[0]===e)break}return t??this._chainParams.consensus[this.consensusAlgorithm()]??{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.events=new i.b,e}}},27250(e){var t=1e3,n=60*t,r=60*n,s=24*r,i=7*s,o=365.25*s;function a(e,t,n,r){var s=t>=1.5*n;return Math.round(e/n)+" "+r+(s?"s":"")}e.exports=function(e,c){c=c||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*s;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return c.long?function(e){var i=Math.abs(e);if(i>=s)return a(e,i,s,"day");if(i>=r)return a(e,i,r,"hour");if(i>=n)return a(e,i,n,"minute");if(i>=t)return a(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=s)return Math.round(e/s)+"d";if(i>=r)return Math.round(e/r)+"h";if(i>=n)return Math.round(e/n)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},27429(e,t,n){"use strict";n.d(t,{b:()=>r});var r=n(28985)},27816(e,t,n){"use strict";n.d(t,{Az:()=>u,DM:()=>c,TQ:()=>i,ol:()=>o,r9:()=>s,tT:()=>d,yc:()=>a});var r=n(38628);function s(e,t,n){return e&t^~e&n}function i(e,t,n){return e&t^e&n^t&n}class o extends r.Vw{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=(0,r.O8)(this.buffer)}update(e){(0,r.CC)(this),e=(0,r.ZJ)(e),(0,r.DO)(e);const{view:t,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a!==s)n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=(0,r.O8)(e);for(;s<=i-o;o+=s)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.CC)(this),(0,r.Ht)(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,(0,r.uH)(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let r=o;r<s;r++)t[r]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}(n,s-8,BigInt(8*this.length),i),this.process(n,0);const a=(0,r.O8)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let r=0;r<u;r++)a.setUint32(4*r,d[r],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return e.destroyed=i,e.finished=s,e.length=r,e.pos=o,r%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const a=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),u=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),d=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])},27898(e,t,n){"use strict";n.d(t,{xH:()=>A});var r=n(75045),s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},s(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}"function"==typeof SuppressedError&&SuppressedError;var o=function(){function e(e,t,n){void 0===n&&(n=1),this.t=void 0,this.i=void 0,this.h=void 0,this.u=e,this.o=t,this.l=n}return e.prototype.v=function(){var e=this,t=e.h.h===e;if(t&&1===e.l)e=e.i;else if(e.t)for(e=e.t;e.i;)e=e.i;else{if(t)return e.h;for(var n=e.h;n.t===e;)n=(e=n).h;e=n}return e},e.prototype.p=function(){var e=this;if(e.i){for(e=e.i;e.t;)e=e.t;return e}for(var t=e.h;t.i===e;)t=(e=t).h;return e.i!==t?t:e},e.prototype.T=function(){var e=this.h,t=this.i,n=t.t;return e.h===this?e.h=t:e.t===this?e.t=t:e.i=t,t.h=e,t.t=this,this.h=t,this.i=n,n&&(n.h=this),t},e.prototype.I=function(){var e=this.h,t=this.t,n=t.i;return e.h===this?e.h=t:e.t===this?e.t=t:e.i=t,t.h=e,t.i=this,this.h=t,this.t=n,n&&(n.h=this),t},e}(),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.O=1,t}return i(t,e),t.prototype.T=function(){var t=e.prototype.T.call(this);return this.M(),t.M(),t},t.prototype.I=function(){var t=e.prototype.I.call(this);return this.M(),t.M(),t},t.prototype.M=function(){this.O=1,this.t&&(this.O+=this.t.O),this.i&&(this.O+=this.i.O)},t}(o),c=function(){function e(e){void 0===e&&(e=0),this.iteratorType=e}return e.prototype.equals=function(e){return this.C===e.C},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(function(){function e(){this._=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._},enumerable:!1,configurable:!0}),e.prototype.size=function(){return this._},e.prototype.empty=function(){return 0===this._},e}());function d(){throw new RangeError("Iterator access denied!")}var f=function(e){function t(t,n){void 0===t&&(t=function(e,t){return e<t?-1:e>t?1:0}),void 0===n&&(n=!1);var r=e.call(this)||this;return r.N=void 0,r.g=t,r.enableIndex=n,r.S=n?a:o,r.A=new r.S,r}return i(t,e),t.prototype.m=function(e,t){for(var n=this.A;e;){var r=this.g(e.u,t);if(r<0)e=e.i;else{if(!(r>0))return e;n=e,e=e.t}}return n},t.prototype.B=function(e,t){for(var n=this.A;e;){this.g(e.u,t)<=0?e=e.i:(n=e,e=e.t)}return n},t.prototype.j=function(e,t){for(var n=this.A;e;){var r=this.g(e.u,t);if(r<0)n=e,e=e.i;else{if(!(r>0))return e;e=e.t}}return n},t.prototype.k=function(e,t){for(var n=this.A;e;){this.g(e.u,t)<0?(n=e,e=e.i):e=e.t}return n},t.prototype.R=function(e){for(;;){var t,n=e.h;if(n===this.A)return;if(1===e.l)return void(e.l=0);if(e===n.t)if(1===(t=n.i).l)t.l=0,n.l=1,n===this.N?this.N=n.T():n.T();else{if(t.i&&1===t.i.l)return t.l=n.l,n.l=0,t.i.l=0,void(n===this.N?this.N=n.T():n.T());t.t&&1===t.t.l?(t.l=1,t.t.l=0,t.I()):(t.l=1,e=n)}else if(1===(t=n.t).l)t.l=0,n.l=1,n===this.N?this.N=n.I():n.I();else{if(t.t&&1===t.t.l)return t.l=n.l,n.l=0,t.t.l=0,void(n===this.N?this.N=n.I():n.I());t.i&&1===t.i.l?(t.l=1,t.i.l=0,t.T()):(t.l=1,e=n)}}},t.prototype.G=function(e){if(1!==this._){for(var t=e;t.t||t.i;){if(t.i)for(t=t.i;t.t;)t=t.t;else t=t.t;var n=e.u;e.u=t.u,t.u=n;var r=e.o;e.o=t.o,t.o=r,e=t}this.A.t===t?this.A.t=t.h:this.A.i===t&&(this.A.i=t.h),this.R(t);var s=t.h;if(t===s.t?s.t=void 0:s.i=void 0,this._-=1,this.N.l=0,this.enableIndex)for(;s!==this.A;)s.O-=1,s=s.h}else this.clear()},t.prototype.P=function(e){for(var t="number"==typeof e?e:void 0,n="function"==typeof e?e:void 0,r=void 0===e?[]:void 0,s=0,i=this.N,o=[];o.length||i;)if(i)o.push(i),i=i.t;else{if(i=o.pop(),s===t)return i;r&&r.push(i),n&&n(i,s,this),s+=1,i=i.i}return r},t.prototype.q=function(e){for(;;){var t=e.h;if(0===t.l)return;var n=t.h;if(t===n.t){if((r=n.i)&&1===r.l){if(r.l=t.l=0,n===this.N)return;n.l=1,e=n;continue}if(e!==t.i)return t.l=0,n===this.N?this.N=n.I():n.I(),void(n.l=1);e.l=0,e.t&&(e.t.h=t),e.i&&(e.i.h=n),t.i=e.t,n.t=e.i,e.t=t,e.i=n,n===this.N?(this.N=e,this.A.h=e):(s=n.h).t===n?s.t=e:s.i=e,e.h=n.h,t.h=e,n.h=e,n.l=1}else{var r,s;if((r=n.t)&&1===r.l){if(r.l=t.l=0,n===this.N)return;n.l=1,e=n;continue}if(e!==t.t)return t.l=0,n===this.N?this.N=n.T():n.T(),void(n.l=1);e.l=0,e.t&&(e.t.h=n),e.i&&(e.i.h=t),n.i=e.t,t.t=e.i,e.t=n,e.i=t,n===this.N?(this.N=e,this.A.h=e):(s=n.h).t===n?s.t=e:s.i=e,e.h=n.h,t.h=e,n.h=e,n.l=1}return void(this.enableIndex&&(t.M(),n.M(),e.M()))}},t.prototype.D=function(e,t,n){if(void 0===this.N)return this._+=1,this.N=new this.S(e,t,0),this.N.h=this.A,this.A.h=this.A.t=this.A.i=this.N,this._;var r,s=this.A.t,i=this.g(s.u,e);if(0===i)return s.o=t,this._;if(i>0)s.t=new this.S(e,t),s.t.h=s,r=s.t,this.A.t=r;else{var o=this.A.i,a=this.g(o.u,e);if(0===a)return o.o=t,this._;if(a<0)o.i=new this.S(e,t),o.i.h=o,r=o.i,this.A.i=r;else{if(void 0!==n){var c=n.C;if(c!==this.A){var u=this.g(c.u,e);if(0===u)return c.o=t,this._;if(u>0){var d=c.v(),f=this.g(d.u,e);if(0===f)return d.o=t,this._;f<0&&(r=new this.S(e,t),void 0===d.i?(d.i=r,r.h=d):(c.t=r,r.h=c))}}}if(void 0===r)for(r=this.N;;){var l=this.g(r.u,e);if(l>0){if(void 0===r.t){r.t=new this.S(e,t),r.t.h=r,r=r.t;break}r=r.t}else{if(!(l<0))return r.o=t,this._;if(void 0===r.i){r.i=new this.S(e,t),r.i.h=r,r=r.i;break}r=r.i}}}}if(this.enableIndex)for(var h=r.h;h!==this.A;)h.O+=1,h=h.h;return this.q(r),this._+=1,this._},t.prototype.F=function(e,t){for(;e;){var n=this.g(e.u,t);if(n<0)e=e.i;else{if(!(n>0))return e;e=e.t}}return e||this.A},t.prototype.clear=function(){this._=0,this.N=void 0,this.A.h=void 0,this.A.t=this.A.i=void 0},t.prototype.updateKeyByIterator=function(e,t){var n=e.C;if(n===this.A&&d(),1===this._)return n.u=t,!0;var r=n.p().u;if(n===this.A.t)return this.g(r,t)>0&&(n.u=t,!0);var s=n.v().u;return n===this.A.i?this.g(s,t)<0&&(n.u=t,!0):!(this.g(s,t)>=0||this.g(r,t)<=0)&&(n.u=t,!0)},t.prototype.eraseElementByPos=function(e){if(e<0||e>this._-1)throw new RangeError;var t=this.P(e);return this.G(t),this._},t.prototype.eraseElementByKey=function(e){if(0===this._)return!1;var t=this.F(this.N,e);return t!==this.A&&(this.G(t),!0)},t.prototype.eraseElementByIterator=function(e){var t=e.C;t===this.A&&d();var n=void 0===t.i;return 0===e.iteratorType?n&&e.next():n&&void 0!==t.t||e.next(),this.G(t),e},t.prototype.getHeight=function(){if(0===this._)return 0;return function e(t){return t?Math.max(e(t.t),e(t.i))+1:0}(this.N)},t}(u),l=function(e){function t(t,n,r,s){var i=e.call(this,t,n,s)||this;return i.container=r,i}return i(t,e),Object.defineProperty(t.prototype,"pointer",{get:function(){this.C===this.A&&d();var e=this;return new Proxy([],{get:function(t,n){return"0"===n?e.C.u:"1"===n?e.C.o:(t[0]=e.C.u,t[1]=e.C.o,t[n])},set:function(t,n,r){if("1"!==n)throw new TypeError("prop must be 1");return e.C.o=r,!0}})},enumerable:!1,configurable:!0}),t.prototype.copy=function(){return new t(this.C,this.A,this.container,this.iteratorType)},t}(function(e){function t(t,n,r){var s=e.call(this,r)||this;return s.C=t,s.A=n,0===s.iteratorType?(s.pre=function(){return this.C===this.A.t&&d(),this.C=this.C.v(),this},s.next=function(){return this.C===this.A&&d(),this.C=this.C.p(),this}):(s.pre=function(){return this.C===this.A.i&&d(),this.C=this.C.p(),this},s.next=function(){return this.C===this.A&&d(),this.C=this.C.v(),this}),s}return i(t,e),Object.defineProperty(t.prototype,"index",{get:function(){var e=this.C,t=this.A.h;if(e===this.A)return t?t.O-1:0;var n=0;for(e.t&&(n+=e.t.O);e!==t;){var r=e.h;e===r.i&&(n+=1,r.t&&(n+=r.t.O)),e=r}return n},enumerable:!1,configurable:!0}),t.prototype.isAccessible=function(){return this.C!==this.A},t}(c));(function(e){function t(t,n,r){void 0===t&&(t=[]);var s=e.call(this,n,r)||this,i=s;return t.forEach((function(e){i.setElement(e[0],e[1])})),s}i(t,e),t.prototype.begin=function(){return new l(this.A.t||this.A,this.A,this)},t.prototype.end=function(){return new l(this.A,this.A,this)},t.prototype.rBegin=function(){return new l(this.A.i||this.A,this.A,this,1)},t.prototype.rEnd=function(){return new l(this.A,this.A,this,1)},t.prototype.front=function(){if(0!==this._){var e=this.A.t;return[e.u,e.o]}},t.prototype.back=function(){if(0!==this._){var e=this.A.i;return[e.u,e.o]}},t.prototype.lowerBound=function(e){var t=this.m(this.N,e);return new l(t,this.A,this)},t.prototype.upperBound=function(e){var t=this.B(this.N,e);return new l(t,this.A,this)},t.prototype.reverseLowerBound=function(e){var t=this.j(this.N,e);return new l(t,this.A,this)},t.prototype.reverseUpperBound=function(e){var t=this.k(this.N,e);return new l(t,this.A,this)},t.prototype.forEach=function(e){this.P((function(t,n,r){e([t.u,t.o],n,r)}))},t.prototype.setElement=function(e,t,n){return this.D(e,t,n)},t.prototype.getElementByPos=function(e){if(e<0||e>this._-1)throw new RangeError;var t=this.P(e);return[t.u,t.o]},t.prototype.find=function(e){var t=this.F(this.N,e);return new l(t,this.A,this)},t.prototype.getElementByKey=function(e){return this.F(this.N,e).o},t.prototype.union=function(e){var t=this;return e.forEach((function(e){t.setElement(e[0],e[1])})),this._},t.prototype[Symbol.iterator]=function(){var e,t,n,r;return function(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}(this,(function(s){switch(s.label){case 0:e=this._,t=this.P(),n=0,s.label=1;case 1:return n<e?[4,[(r=t[n]).u,r.o]]:[3,4];case 2:s.sent(),s.label=3;case 3:return++n,[3,1];case 4:return[2]}}))}})(f),n(50941);"object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,new Set;const h="object"==typeof process&&process?process:{},p=(e,t,n,r)=>{"function"==typeof h.emitWarning?h.emitWarning(e,t,n,r):console.error(`[${n}] ${t}: ${e}`)};let m=globalThis.AbortController,g=globalThis.AbortSignal;if(void 0===m){g=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},m=class{constructor(){t()}signal=new g;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==h.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{e&&(e=!1,p("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");Symbol.iterator,Symbol.toStringTag;class b{constructor(e){this.map=new Map,this.getStorage=e}async get(e,t){const n=(0,r.od$)(e.bytes),s=this.map.get(n);if(void 0!==s){const e=(0,r.od$)(t),n=s.get(e);if(void 0!==n)return n}const i=await this.getStorage(e,t);return this.put(e,t,i),i}put(e,t,n){const s=(0,r.od$)(e.bytes);let i=this.map.get(s);void 0===i&&(i=new Map,this.map.set(s,i));const o=(0,r.od$)(t);!1===i.has(o)&&i.set(o,n)}clear(){this.map=new Map}}n(22772);var y=n(51329);"object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,new Set;const w="object"==typeof process&&process?process:{},_=(e,t,n,r)=>{"function"==typeof w.emitWarning?w.emitWarning(e,t,n,r):console.error(`[${n}] ${t}: ${e}`)};let v=globalThis.AbortController,C=globalThis.AbortSignal;if(void 0===v){C=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},v=class{constructor(){t()}signal=new C;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==w.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{e&&(e=!1,_("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");Symbol.iterator,Symbol.toStringTag;var E=n(53695);n(48566);(0,r.AIs)("__root__");(0,r.AIs)("c");E.Tj.encode((new r.gDM).serialize()).slice(2);class A{constructor(e={}){this.accountStack=[],this.codeStack=[],this.storageStack=[],this.checkpointSync(),this.originalStorageCache=new b(this.getStorage.bind(this)),this.common=e.common}topAccountStack(){return this.accountStack[this.accountStack.length-1]}topCodeStack(){return this.codeStack[this.codeStack.length-1]}topStorageStack(){return this.storageStack[this.storageStack.length-1]}checkpointSync(){const e=new Map(this.topAccountStack());for(const[t,n]of e){const r=void 0!==n?Object.assign(Object.create(Object.getPrototypeOf(n)),n):void 0;e.set(t,r)}this.accountStack.push(e),this.codeStack.push(new Map(this.topCodeStack())),this.storageStack.push(new Map(this.topStorageStack()))}async getAccount(e){return this.topAccountStack().get(e.toString())}async putAccount(e,t){this.topAccountStack().set(e.toString(),t)}async deleteAccount(e){this.topAccountStack().set(e.toString(),void 0)}async modifyAccountFields(e,t){await async function(e,t,n){const s=await e.getAccount(t)??new r.gDM;if(s.nonce=n.nonce??s.nonce,s.balance=n.balance??s.balance,s.storageRoot=n.storageRoot??s.storageRoot,s.codeHash=n.codeHash??s.codeHash,s.codeSize=n.codeSize??s.codeSize,void 0!==e._debug)for(const[i,o]of Object.entries(n))e._debug(`modifyAccountFields address=${t.toString()} ${i}=${o instanceof Uint8Array?(0,r.MyA)(o):o} `);await e.putAccount(t,s)}(this,e,t)}async getCode(e){return this.topCodeStack().get(e.toString())??new Uint8Array(0)}async putCode(e,t){this.topCodeStack().set(e.toString(),t),void 0===await this.getAccount(e)&&await this.putAccount(e,new r.gDM),await this.modifyAccountFields(e,{codeHash:(this.common?.customCrypto.keccak256??y.So)(t)})}async getCodeSize(e){return(await this.getCode(e)).length}async getStorage(e,t){return this.topStorageStack().get(`${e.toString()}_${(0,r.MyA)(t)}`)??new Uint8Array(0)}async putStorage(e,t,n){this.topStorageStack().set(`${e.toString()}_${(0,r.MyA)(t)}`,n)}async clearStorage(){}async checkpoint(){this.checkpointSync()}async commit(){this.accountStack.splice(-2,1),this.codeStack.splice(-2,1),this.storageStack.splice(-2,1)}async revert(){this.accountStack.pop(),this.codeStack.pop(),this.storageStack.pop()}async flush(){}clearCaches(){}shallowCopy(){const e=new A({common:this.common});for(let t=0;t<this.accountStack.length;t++)e.accountStack.push(new Map(this.accountStack[t])),e.codeStack.push(new Map(this.codeStack[t])),e.storageStack.push(new Map(this.storageStack[t]));return e}getStateRoot(){throw(0,r.mQ1)("Method not implemented.")}setStateRoot(){throw(0,r.mQ1)("Method not implemented.")}hasStateRoot(){throw(0,r.mQ1)("Method not implemented.")}}n(51198);"object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,new Set;const S="object"==typeof process&&process?process:{},I=(e,t,n,r)=>{"function"==typeof S.emitWarning?S.emitWarning(e,t,n,r):console.error(`[${n}] ${t}: ${e}`)};let k=globalThis.AbortController,x=globalThis.AbortSignal;if(void 0===k){x=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},k=class{constructor(){t()}signal=new x;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==S.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{e&&(e=!1,I("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");Symbol.iterator,Symbol.toStringTag;(0,r.AIs)("__root__")},28985(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new s(r,i||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)t.call(e,r)&&s.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,o=new Array(i);s<i;s++)o[s]=r[s].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,s,i,o){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,d=this._events[a],f=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),f){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,s),!0;case 5:return d.fn.call(d.context,t,r,s,i),!0;case 6:return d.fn.call(d.context,t,r,s,i,o),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];d.fn.apply(d.context,c)}else{var l,h=d.length;for(u=0;u<h;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),f){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,r);break;case 4:d[u].fn.call(d[u].context,t,r,s);break;default:if(!c)for(l=1,c=new Array(f-1);l<f;l++)c[l-1]=arguments[l];d[u].fn.apply(d[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,s){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||s&&!a.once||r&&a.context!==r||o(this,i);else{for(var c=0,u=[],d=a.length;c<d;c++)(a[c].fn!==t||s&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},29755(e,t,n){"use strict";n.d(t,{Mk:()=>w,X:()=>y});var r=n(1048).hp;class s extends Error{constructor(e){super(e),this.name="ShikiError"}}function i(){return"undefined"!=typeof performance?performance.now():Date.now()}async function o(e){let t,n;const r={};function s(e){n=e,r.HEAPU8=new Uint8Array(e),r.HEAPU32=new Uint32Array(e)}function o(e){try{return t.grow(e-n.byteLength+65535>>>16),s(t.buffer),1}catch{}}const a="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function c(e,t){return e?function(e,t,n=1024){const r=t+n;let s=t;for(;e[s]&&!(s>=r);)++s;if(s-t>16&&e.buffer&&a)return a.decode(e.subarray(t,s));let i="";for(;t<s;){let n=e[t++];if(!(128&n)){i+=String.fromCharCode(n);continue}const r=63&e[t++];if(192==(224&n)){i+=String.fromCharCode((31&n)<<6|r);continue}const s=63&e[t++];if(n=224==(240&n)?(15&n)<<12|r<<6|s:(7&n)<<18|r<<12|s<<6|63&e[t++],n<65536)i+=String.fromCharCode(n);else{const e=n-65536;i+=String.fromCharCode(55296|e>>10,56320|1023&e)}}return i}(r.HEAPU8,e,t):""}const u={emscripten_get_now:i,emscripten_memcpy_big:function(e,t,n){r.HEAPU8.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){const t=r.HEAPU8.length,n=2147483648;if((e>>>=0)>n)return!1;for(let r=1;r<=4;r*=2){let a=t*(1+.2/r);a=Math.min(a,e+100663296);if(o(Math.min(n,(s=Math.max(e,a))+((i=65536)-s%i)%i)))return!0}var s,i;return!1},fd_write:()=>0};return await async function(){const n={env:u,wasi_snapshot_preview1:u},i=await e(n);t=i.memory,s(t.buffer),Object.assign(r,i),r.UTF8ToString=c}(),r}var a=Object.defineProperty,c=(e,t,n)=>(((e,t,n)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let u=null;class d{constructor(e){c(this,"utf16Length"),c(this,"utf8Length"),c(this,"utf16Value"),c(this,"utf8Value"),c(this,"utf16OffsetToUtf8"),c(this,"utf8OffsetToUtf16");const t=e.length,n=d._utf8ByteLength(e),r=n!==t,s=r?new Uint32Array(t+1):null;r&&(s[t]=n);const i=r?new Uint32Array(n+1):null;r&&(i[n]=t);const o=new Uint8Array(n);let a=0;for(let c=0;c<t;c++){const n=e.charCodeAt(c);let u=n,d=!1;if(n>=55296&&n<=56319&&c+1<t){const t=e.charCodeAt(c+1);t>=56320&&t<=57343&&(u=65536+(n-55296<<10)|t-56320,d=!0)}r&&(s[c]=a,d&&(s[c+1]=a),u<=127?i[a+0]=c:u<=2047?(i[a+0]=c,i[a+1]=c):u<=65535?(i[a+0]=c,i[a+1]=c,i[a+2]=c):(i[a+0]=c,i[a+1]=c,i[a+2]=c,i[a+3]=c)),u<=127?o[a++]=u:u<=2047?(o[a++]=192|(1984&u)>>>6,o[a++]=128|(63&u)>>>0):u<=65535?(o[a++]=224|(61440&u)>>>12,o[a++]=128|(4032&u)>>>6,o[a++]=128|(63&u)>>>0):(o[a++]=240|(1835008&u)>>>18,o[a++]=128|(258048&u)>>>12,o[a++]=128|(4032&u)>>>6,o[a++]=128|(63&u)>>>0),d&&c++}this.utf16Length=t,this.utf8Length=n,this.utf16Value=e,this.utf8Value=o,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=i}static _utf8ByteLength(e){let t=0;for(let n=0,r=e.length;n<r;n++){const s=e.charCodeAt(n);let i=s,o=!1;if(s>=55296&&s<=56319&&n+1<r){const t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(i=65536+(s-55296<<10)|t-56320,o=!0)}t+=i<=127?1:i<=2047?2:i<=65535?3:4,o&&n++}return t}createString(e){const t=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}const f=class{constructor(e){if(c(this,"id",++f.LAST_ID),c(this,"_onigBinding"),c(this,"content"),c(this,"utf16Length"),c(this,"utf8Length"),c(this,"utf16OffsetToUtf8"),c(this,"utf8OffsetToUtf16"),c(this,"ptr"),!u)throw new s("Must invoke loadWasm first.");this._onigBinding=u,this.content=e;const t=new d(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!f._sharedPtrInUse?(f._sharedPtr||(f._sharedPtr=u.omalloc(1e4)),f._sharedPtrInUse=!0,u.HEAPU8.set(t.utf8Value,f._sharedPtr),this.ptr=f._sharedPtr):this.ptr=t.createString(u)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===f._sharedPtr?f._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let l,h,p=f;c(p,"LAST_ID",0),c(p,"_sharedPtr",0),c(p,"_sharedPtrInUse",!1);class m{constructor(e){if(c(this,"_onigBinding"),c(this,"_ptr"),!u)throw new s("Must invoke loadWasm first.");const t=[],n=[];for(let s=0,a=e.length;s<a;s++){const r=new d(e[s]);t[s]=r.createString(u),n[s]=r.utf8Length}const r=u.omalloc(4*e.length);u.HEAPU32.set(t,r/4);const i=u.omalloc(4*e.length);u.HEAPU32.set(n,i/4);const o=u.createOnigScanner(r,i,e.length);for(let s=0,a=e.length;s<a;s++)u.ofree(t[s]);u.ofree(i),u.ofree(r),0===o&&function(e){throw new s(e.UTF8ToString(e.getLastOnigError()))}(u),this._onigBinding=u,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,t,n){let r=0;if("number"==typeof n&&(r=n),"string"==typeof e){e=new p(e);const n=this._findNextMatchSync(e,t,!1,r);return e.dispose(),n}return this._findNextMatchSync(e,t,!1,r)}_findNextMatchSync(e,t,n,r){const s=this._onigBinding,i=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r);if(0===i)return null;const o=s.HEAPU32;let a=i/4;const c=o[a++],u=o[a++],d=[];for(let f=0;f<u;f++){const t=e.convertUtf8OffsetToUtf16(o[a++]),n=e.convertUtf8OffsetToUtf16(o[a++]);d[f]={start:t,end:n,length:n-t}}return{index:c,captureIndices:d}}}function g(e){if(l)return l;return l=async function(){u=await o((async t=>{let n=e;var s;return n=await n,"function"==typeof n&&(n=await n(t)),"function"==typeof n&&(n=await n(t)),"function"==typeof n.instantiator?n=await n.instantiator(t):!function(e){return"function"==typeof e.default}(n)?(function(e){return void 0!==e.data}(n)&&(n=n.data),!function(e){return"undefined"!=typeof Response&&e instanceof Response}(n)?!function(e){return"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||ArrayBuffer.isView(e))||void 0!==r&&r.isBuffer?.(e)||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer||"undefined"!=typeof Uint32Array&&e instanceof Uint32Array}(n)?n instanceof WebAssembly.Module?n=await b(n)(t):"default"in n&&n.default instanceof WebAssembly.Module&&(n=await b(n.default)(t)):n=await b(n)(t):n="function"==typeof WebAssembly.instantiateStreaming?await(s=n,e=>WebAssembly.instantiateStreaming(s,e))(t):await function(e){return async t=>{const n=await e.arrayBuffer();return WebAssembly.instantiate(n,t)}}(n)(t)):n=await n.default(t),"instance"in n&&(n=n.instance),"exports"in n&&(n=n.exports),n}))}(),l}function b(e){return t=>WebAssembly.instantiate(e,t)}function y(){return h}async function w(e){return e&&await g(e),{createScanner:e=>new m(e.map((e=>"string"==typeof e?e:e.source))),createString:e=>new p(e)}}},42857(e,t,n){"use strict";n.d(t,{A:()=>U});var r=n(14041),s=n(31085);function i(e){const{mdxAdmonitionTitle:t,rest:n}=function(e){const t=r.Children.toArray(e),n=t.find((e=>r.isValidElement(e)&&"mdxAdmonitionTitle"===e.type)),i=t.filter((e=>e!==n)),o=n?.props.children;return{mdxAdmonitionTitle:o,rest:i.length>0?(0,s.jsx)(s.Fragment,{children:i}):null}}(e.children),i=e.title??t;return{...e,...i&&{title:i},children:n}}var o=n(54357),a=n(35406),c=n(93796);const u="admonition_IZjC",d="admonitionHeading_uVvU",f="admonitionIcon_HiR3",l="admonitionContent_bl22";function h({type:e,className:t,children:n}){return(0,s.jsx)("div",{className:(0,o.A)(c.G.common.admonition,c.G.common.admonitionType(e),u,t),children:n})}function p({icon:e,title:t}){return(0,s.jsxs)("div",{className:d,children:[(0,s.jsx)("span",{className:f,children:e}),t]})}function m({children:e}){return e?(0,s.jsx)("div",{className:l,children:e}):null}function g(e){const{type:t,icon:n,title:r,children:i,className:o}=e;return(0,s.jsxs)(h,{type:t,className:o,children:[r||n?(0,s.jsx)(p,{title:r,icon:n}):null,(0,s.jsx)(m,{children:i})]})}function b(e){return(0,s.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})})}const y={icon:(0,s.jsx)(b,{}),title:(0,s.jsx)(a.default,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)",children:"note"})};function w(e){return(0,s.jsx)(g,{...y,...e,className:(0,o.A)("alert alert--secondary",e.className),children:e.children})}function _(e){return(0,s.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})})}const v={icon:(0,s.jsx)(_,{}),title:(0,s.jsx)(a.default,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)",children:"tip"})};function C(e){return(0,s.jsx)(g,{...v,...e,className:(0,o.A)("alert alert--success",e.className),children:e.children})}function E(e){return(0,s.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})})}const A={icon:(0,s.jsx)(E,{}),title:(0,s.jsx)(a.default,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)",children:"info"})};function S(e){return(0,s.jsx)(g,{...A,...e,className:(0,o.A)("alert alert--info",e.className),children:e.children})}function I(e){return(0,s.jsx)("svg",{viewBox:"0 0 16 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})})}const k={icon:(0,s.jsx)(I,{}),title:(0,s.jsx)(a.default,{id:"theme.admonition.warning",description:"The default label used for the Warning admonition (:::warning)",children:"warning"})};function x(e){return(0,s.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})})}const N={icon:(0,s.jsx)(x,{}),title:(0,s.jsx)(a.default,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)",children:"danger"})};const B={icon:(0,s.jsx)(I,{}),title:(0,s.jsx)(a.default,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)",children:"caution"})};const P={...{note:w,tip:C,info:S,warning:function(e){return(0,s.jsx)(g,{...k,...e,className:(0,o.A)("alert alert--warning",e.className),children:e.children})},danger:function(e){return(0,s.jsx)(g,{...N,...e,className:(0,o.A)("alert alert--danger",e.className),children:e.children})}},...{secondary:e=>(0,s.jsx)(w,{title:"secondary",...e}),important:e=>(0,s.jsx)(S,{title:"important",...e}),success:e=>(0,s.jsx)(C,{title:"success",...e}),caution:function(e){return(0,s.jsx)(g,{...B,...e,className:(0,o.A)("alert alert--warning",e.className),children:e.children})}}};function U(e){const t=i(e),n=(r=t.type,P[r]||(console.warn(`No admonition component found for admonition type "${r}". Using Info as fallback.`),P.info));var r;return(0,s.jsx)(n,{...t})}},42932(e,t,n){e.exports=function(e){function t(e){let n,s,i,o=null;function a(...e){if(!a.enabled)return;const r=a,s=Number(new Date),i=s-(n||s);r.diff=i,r.prev=n,r.curr=s,n=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,s)=>{if("%%"===n)return"%";o++;const i=t.formatters[s];if("function"==typeof i){const t=e[o];n=i.call(r,t),e.splice(o,1),o--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(s!==t.namespaces&&(s=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function s(e,t){let n=0,r=0,s=-1,i=0;for(;n<e.length;)if(r<t.length&&(t[r]===e[n]||"*"===t[r]))"*"===t[r]?(s=r,i=n,r++):(n++,r++);else{if(-1===s)return!1;r=s+1,i++,n=i}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const r of n)"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(const n of t.skips)if(s(e,n))return!1;for(const n of t.names)if(s(e,n))return!0;return!1},t.humanize=n(27250),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},48566(e,t,n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(s=r))})),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(81257)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},50204(e,t,n){e.exports=function(e){function t(e){let n,s,i,o=null;function a(...e){if(!a.enabled)return;const r=a,s=Number(new Date),i=s-(n||s);r.diff=i,r.prev=n,r.curr=s,n=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,s)=>{if("%%"===n)return"%";o++;const i=t.formatters[s];if("function"==typeof i){const t=e[o];n=i.call(r,t),e.splice(o,1),o--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(s!==t.namespaces&&(s=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function s(e,t){let n=0,r=0,s=-1,i=0;for(;n<e.length;)if(r<t.length&&(t[r]===e[n]||"*"===t[r]))"*"===t[r]?(s=r,i=n,r++):(n++,r++);else{if(-1===s)return!1;r=s+1,i++,n=i}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const r of n)"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(const n of t.skips)if(s(e,n))return!1;for(const n of t.names)if(s(e,n))return!0;return!1},t.humanize=n(27250),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},50941(e,t,n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(s=r))})),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(50204)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},51198(e,t,n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(s=r))})),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(12065)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},53695(e,t,n){"use strict";n.d(t,{mQ:()=>s,Tj:()=>A});class r extends Error{constructor(e,t,n){super(t??e.code),this.type=e,void 0!==n&&(this.stack=n)}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}function s(e,t){return new r({code:"ETHEREUMJS_DEFAULT_ERROR_CODE"},e,t)}function i(e){if(0===e[0])throw s("invalid RLP: extra zeros");return function(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw s("Invalid byte sequence");return t}(d(e))}function o(e,t){if(e<56)return Uint8Array.from([e+t]);const n=v(e),r=v(t+55+n.length/2);return Uint8Array.from(y(r+n))}function a(e,t,n){if(n>e.length)throw s("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,n)}function c(e){let t,n,r,o,u;const d=[],f=e[0];if(f<=127)return{data:e.slice(0,1),remainder:e.subarray(1)};if(f<=183){if(t=f-127,r=128===f?Uint8Array.from([]):a(e,1,t),2===t&&r[0]<128)throw s("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:r,remainder:e.subarray(t)}}if(f<=191){if(n=f-182,e.length-1<n)throw s("invalid RLP: not enough bytes for string length");if(t=i(a(e,1,n)),t<=55)throw s("invalid RLP: expected string length to be greater than 55");return r=a(e,n,t+n),{data:r,remainder:e.subarray(t+n)}}if(f<=247){for(t=f-191,o=a(e,1,t);o.length;)u=c(o),d.push(u.data),o=u.remainder;return{data:d,remainder:e.subarray(t)}}{if(n=f-246,t=i(a(e,1,n)),t<56)throw s("invalid RLP: encoded list too short");const r=n+t;if(r>e.length)throw s("invalid RLP: total length is larger than the data");for(o=a(e,n,r);o.length;)u=c(o),d.push(u.data),o=u.remainder;return{data:d,remainder:e.subarray(r)}}}const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function d(e){let t="";for(let n=0;n<e.length;n++)t+=u[e[n]];return t}const f=48,l=57,h=65,p=70,m=97,g=102;function b(e){return e>=f&&e<=l?e-f:e>=h&&e<=p?e-(h-10):e>=m&&e<=g?e-(m-10):void 0}function y(e){if("0x"===e.slice(0,2)&&(e=e.slice(0,2)),"string"!=typeof e)throw s("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw s("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const t=b(e.charCodeAt(o)),n=b(e.charCodeAt(o+1));if(void 0===t||void 0===n){throw s('hex string expected, got non-hex character "'+(e[o]+e[o+1])+'" at index '+o)}r[i]=16*t+n}return r}function w(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const t=e[r];n.set(t,s),s+=t.length}return n}function _(e){return(new TextEncoder).encode(e)}function v(e){if(e<0)throw s("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function C(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function E(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return C(e)?y((t="string"!=typeof(n=e)?n:C(n)?n.slice(2):n).length%2?`0${t}`:t):_(e);var t,n;if("number"==typeof e||"bigint"==typeof e)return e?y(v(e)):Uint8Array.from([]);if(null==e)return Uint8Array.from([]);throw s("toBytes: received unsupported type "+typeof e)}const A={encode:function e(t){if(Array.isArray(t)){const n=[];let r=0;for(let s=0;s<t.length;s++){const i=e(t[s]);n.push(i),r+=i.length}return w(o(r,192),...n)}const n=E(t);return 1===n.length&&n[0]<128?n:w(o(n.length,128),n)},decode:function(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const n=c(E(e));if(t)return{data:n.data,remainder:n.remainder.slice()};if(0!==n.remainder.length)throw s("invalid RLP: remainder must be zero");return n.data}}},68261(e,t,n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(s=r))})),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(42932)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},75045(e,t,n){"use strict";n.d(t,{gDM:()=>Ot,pVw:()=>Ft,ZUg:()=>pt,exu:()=>mt,_4Z:()=>xt,l$H:()=>gt,JaW:()=>Nt,fjF:()=>St,Abi:()=>It,kr8:()=>_t,fJ:()=>vt,N7g:()=>Pt,Y2o:()=>Ut,$z4:()=>Bt,eSG:()=>bt,xPH:()=>Ct,ES$:()=>Et,hyx:()=>At,eMC:()=>yt,loQ:()=>wt,OkS:()=>kt,mQ1:()=>Ge.mQ,AN1:()=>ft,l4$:()=>lt,GEt:()=>ct,Sbr:()=>ut,ETD:()=>at,eo8:()=>ht,nT$:()=>dt,eqk:()=>Ht,wTE:()=>st,CZI:()=>Qe,Q9U:()=>nt,U8W:()=>je,MyA:()=>Ve,Iy3:()=>qe,od$:()=>He,lxx:()=>zt,Idy:()=>ot,i8i:()=>Mt,hMq:()=>Dt,RpU:()=>Wt,NDp:()=>Oe.ND,YIe:()=>Gt,iyX:()=>Tt,aTq:()=>$e,m5d:()=>ze,Jt3:()=>Lt,cgR:()=>Ye,rs2:()=>Je,h0N:()=>tt,Agw:()=>Le,AxX:()=>$t,A1F:()=>Ze,AIs:()=>i.AI});var r=n(76210),s=n(97713),i=n(38628);const o=BigInt(0),a=BigInt(1);function c(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function u(e){if(!c(e))throw new Error("Uint8Array expected")}function d(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}function f(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function l(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?o:BigInt("0x"+e)}const h="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,p=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function m(e){if(u(e),h)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=p[e[n]];return t}const g=48,b=57,y=65,w=70,_=97,v=102;function C(e){return e>=g&&e<=b?e-g:e>=y&&e<=w?e-(y-10):e>=_&&e<=v?e-(_-10):void 0}function E(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(h)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const t=C(e.charCodeAt(i)),n=C(e.charCodeAt(i+1));if(void 0===t||void 0===n){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}r[s]=16*t+n}return r}function A(e){return l(m(e))}function S(e){return u(e),l(m(Uint8Array.from(e).reverse()))}function I(e,t){return E(e.toString(16).padStart(2*t,"0"))}function k(e,t){return I(e,t).reverse()}function x(e,t,n){let r;if("string"==typeof t)try{r=E(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else{if(!c(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}const s=r.length;if("number"==typeof n&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function N(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];u(n),t+=n.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const t=e[r];n.set(t,s),s+=t.length}return n}const B=e=>"bigint"==typeof e&&o<=e;function P(e,t,n){return B(e)&&B(t)&&B(n)&&t<=e&&e<n}function U(e,t,n,r){if(!P(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}const R=e=>(a<<BigInt(e))-a,O=e=>new Uint8Array(e),G=e=>Uint8Array.from(e);const T={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||c(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function L(e,t,n={}){const r=(t,n,r)=>{const s=T[n];if("function"!=typeof s)throw new Error("invalid validator function");const i=e[t];if(!(r&&void 0===i||s(i,e)))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+i)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return e}function F(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(void 0!==s)return s;const i=e(n,...r);return t.set(n,i),i}}const D=BigInt(0),M=BigInt(1),H=BigInt(2),$=BigInt(3),Z=BigInt(4),V=BigInt(5),W=BigInt(8);function j(e,t){const n=e%t;return n>=D?n:t+n}function q(e,t,n){let r=e;for(;t-- >D;)r*=r,r%=n;return r}function z(e,t){if(e===D)throw new Error("invert: expected non-zero number");if(t<=D)throw new Error("invert: expected positive modulus, got "+t);let n=j(e,t),r=t,s=D,i=M,o=M,a=D;for(;n!==D;){const e=r/n,t=r%n,c=s-o*e,u=i-a*e;r=n,n=t,s=o,i=a,o=c,a=u}if(r!==M)throw new Error("invert: does not exist");return j(s,t)}function Q(e){return e%Z===$?function(t,n){const r=(e+M)/Z,s=t.pow(n,r);if(!t.eql(t.sqr(s),n))throw new Error("Cannot find square root");return s}:e%W===V?function(t,n){const r=t.mul(n,H),s=(e-V)/W,i=t.pow(r,s),o=t.mul(n,i),a=t.mul(t.mul(o,H),i),c=t.mul(o,t.sub(a,t.ONE));if(!t.eql(t.sqr(c),n))throw new Error("Cannot find square root");return c}:function(e){let t=e-M,n=0;for(;t%H===D;)t/=H,n++;let r=H;const s=ee(e);for(;r<e&&J(s,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n){const t=(e+M)/Z;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const i=(t+M)/H;return function(e,s){if(!J(e,s))throw new Error("Cannot find square root");let o=n,a=e.pow(e.mul(e.ONE,r),t),c=e.pow(s,i),u=e.pow(s,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(a,M<<BigInt(o-t-1));a=e.sqr(n),c=e.mul(c,n),u=e.mul(u,a),o=t}return c}}(e)}const K=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Y(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce(((t,n,s)=>e.is0(n)?t:(r[s]=t,e.mul(t,n))),e.ONE),i=e.inv(s);return t.reduceRight(((t,n,s)=>e.is0(n)?t:(r[s]=e.mul(t,r[s]),e.mul(t,n))),i),r}function J(e,t){const n=function(e,t){const n=(e.ORDER-M)/H,r=e.pow(t,n),s=e.eql(r,e.ONE),i=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!s&&!i&&!o)throw new Error("Cannot find square root: probably non-prime P");return s?1:i?0:-1}(e,t);return 0===n||1===n}function X(e,t){void 0!==t&&(0,i.Fe)(t);const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function ee(e,t,n=!1,r={}){if(e<=D)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:i}=X(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:i,MASK:R(s),ZERO:D,ONE:M,create:t=>j(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return D<=t&&t<e},is0:e=>e===D,isOdd:e=>(e&M)===M,neg:t=>j(-t,e),eql:(e,t)=>e===t,sqr:t=>j(t*t,e),add:(t,n)=>j(t+n,e),sub:(t,n)=>j(t-n,e),mul:(t,n)=>j(t*n,e),pow:(e,t)=>function(e,t,n){if(n<D)throw new Error("invalid exponent, negatives unsupported");if(n===D)return e.ONE;if(n===M)return t;let r=e.ONE,s=t;for(;n>D;)n&M&&(r=e.mul(r,s)),s=e.sqr(s),n>>=M;return r}(a,e,t),div:(t,n)=>j(t*z(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>z(t,e),sqrt:r.sqrt||(t=>(o||(o=Q(e)),o(a,t))),toBytes:e=>n?k(e,i):I(e,i),fromBytes:e=>{if(e.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+e.length);return n?S(e):A(e)},invertBatch:e=>Y(a,e),cmov:(e,t,n)=>n?t:e});return Object.freeze(a)}function te(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function ne(e){const t=te(e);return t+Math.ceil(t/2)}const re=BigInt(0),se=BigInt(1);function ie(e,t){const n=t.negate();return e?n:t}function oe(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function ae(e,t){oe(e,t);const n=2**e;return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1),mask:R(e),maxNumber:n,shiftBy:BigInt(e)}}function ce(e,t,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(e&s),c=e>>o;a>r&&(a-=i,c+=se);const u=t*r;return{nextN:c,offset:u+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:t%2!=0,offsetF:u}}function ue(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)}))}function de(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)}))}const fe=new WeakMap,le=new WeakMap;function he(e){return le.get(e)||1}function pe(e,t,n,r){if(ue(n,e),de(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,i=function(e){let t;for(t=0;e>o;e>>=a,t+=1);return t}(BigInt(n.length)),c=i>12?i-3:i>4?i-2:i?2:1,u=R(c),d=new Array(Number(u)+1).fill(s);let f=s;for(let o=Math.floor((t.BITS-1)/c)*c;o>=0;o-=c){d.fill(s);for(let t=0;t<r.length;t++){const e=r[t],s=Number(e>>BigInt(o)&u);d[s]=d[s].add(n[t])}let e=s;for(let t=d.length-1,n=s;t>0;t--)n=n.add(d[t]),e=e.add(n);if(f=f.add(e),0!==o)for(let t=0;t<c;t++)f=f.double()}return f}function me(e){return L(e.Fp,K.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),L(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...X(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function ge(e){void 0!==e.lowS&&d("lowS",e.lowS),void 0!==e.prehash&&d("prehash",e.prehash)}class be extends Error{constructor(e=""){super(e)}}const ye={Err:be,_tlv:{encode:(e,t)=>{const{Err:n}=ye;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=f(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?f(s.length/2|128):"";return f(e)+i+s+t},decode(e,t){const{Err:n}=ye;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++];let i=0;if(!!(128&s)){const e=127&s;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const o=t.subarray(r,r+e);if(o.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===o[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of o)i=i<<8|t;if(r+=e,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=s;const o=t.subarray(r,r+i);if(o.length!==i)throw new n("tlv.decode: wrong value length");return{v:o,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=ye;if(e<we)throw new t("integer: negative integers are not allowed");let n=f(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ye;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return A(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ye,s=x("signature",e),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l:d}=r.decode(2,c);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=ye,r=t.encode(2,n.encode(e.r))+t.encode(2,n.encode(e.s));return t.encode(48,r)}},we=BigInt(0),_e=BigInt(1),ve=(BigInt(2),BigInt(3));BigInt(4);function Ce(e){const t=function(e){const t=me(e);L(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=ee(t.n,t.nBitLength),s=t.toBytes||((e,t,r)=>{const s=t.toAffine();return N(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:s}=t,i=n.sqr(e),o=n.mul(i,e);return n.add(n.add(o,n.mul(e,r)),s)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:s,n:i}=t;if(n&&"bigint"!=typeof e){if(c(e)&&(e=m(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*r,"0")}let o;try{o="bigint"==typeof e?e:A(x("private key",e,r))}catch(a){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof e)}return s&&(o=j(o,i)),U("private key",o,_e,i),o}function u(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}const f=F(((e,t)=>{const{px:r,py:s,pz:i}=e;if(n.eql(i,n.ONE))return{x:r,y:s};const o=e.is0();null==t&&(t=o?n.ONE:n.inv(i));const a=n.mul(r,t),c=n.mul(s,t),u=n.mul(i,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),l=F((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:s}=e.toAffine();if(!n.isValid(r)||!n.isValid(s))throw new Error("bad point: x or y not FE");const i=n.sqr(s),a=o(r);if(!n.eql(i,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class h{constructor(e,t,r){if(null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t)||n.is0(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");this.px=e,this.py=t,this.pz=r,Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const s=e=>n.eql(e,n.ZERO);return s(t)&&s(r)?h.ZERO:new h(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=Y(n,e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(i(x("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(a(e))}static msm(e,t){return pe(h,r,e,t)}_setWindowSize(e){g.setWindowSize(this,e)}assertValidity(){l(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:r,pz:s}=this,{px:i,py:o,pz:a}=e,c=n.eql(n.mul(t,a),n.mul(i,s)),d=n.eql(n.mul(r,a),n.mul(o,s));return c&&d}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,s=n.mul(r,ve),{px:i,py:o,pz:a}=this;let c=n.ZERO,u=n.ZERO,d=n.ZERO,f=n.mul(i,i),l=n.mul(o,o),p=n.mul(a,a),m=n.mul(i,o);return m=n.add(m,m),d=n.mul(i,a),d=n.add(d,d),c=n.mul(e,d),u=n.mul(s,p),u=n.add(c,u),c=n.sub(l,u),u=n.add(l,u),u=n.mul(c,u),c=n.mul(m,c),d=n.mul(s,d),p=n.mul(e,p),m=n.sub(f,p),m=n.mul(e,m),m=n.add(m,d),d=n.add(f,f),f=n.add(d,f),f=n.add(f,p),f=n.mul(f,m),u=n.add(u,f),p=n.mul(o,a),p=n.add(p,p),f=n.mul(p,m),c=n.sub(c,f),d=n.mul(p,l),d=n.add(d,d),d=n.add(d,d),new h(c,u,d)}add(e){u(e);const{px:r,py:s,pz:i}=this,{px:o,py:a,pz:c}=e;let d=n.ZERO,f=n.ZERO,l=n.ZERO;const p=t.a,m=n.mul(t.b,ve);let g=n.mul(r,o),b=n.mul(s,a),y=n.mul(i,c),w=n.add(r,s),_=n.add(o,a);w=n.mul(w,_),_=n.add(g,b),w=n.sub(w,_),_=n.add(r,i);let v=n.add(o,c);return _=n.mul(_,v),v=n.add(g,y),_=n.sub(_,v),v=n.add(s,i),d=n.add(a,c),v=n.mul(v,d),d=n.add(b,y),v=n.sub(v,d),l=n.mul(p,_),d=n.mul(m,y),l=n.add(d,l),d=n.sub(b,l),l=n.add(b,l),f=n.mul(d,l),b=n.add(g,g),b=n.add(b,g),y=n.mul(p,y),_=n.mul(m,_),b=n.add(b,y),y=n.sub(g,y),y=n.mul(p,y),_=n.add(_,y),g=n.mul(b,_),f=n.add(f,g),g=n.mul(v,_),d=n.mul(w,d),d=n.sub(d,g),g=n.mul(w,b),l=n.mul(v,l),l=n.add(l,g),new h(d,f,l)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return g.wNAFCached(this,e,h.normalizeZ)}multiplyUnsafe(e){const{endo:r,n:s}=t;U("scalar",e,we,s);const i=h.ZERO;if(e===we)return i;if(this.is0()||e===_e)return this;if(!r||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,e,h.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:u}=r.splitScalar(e),d=i,f=i,l=this;for(;a>we||u>we;)a&_e&&(d=d.add(l)),u&_e&&(f=f.add(l)),l=l.double(),a>>=_e,u>>=_e;return o&&(d=d.negate()),c&&(f=f.negate()),f=new h(n.mul(f.px,r.beta),f.py,f.pz),d.add(f)}multiply(e){const{endo:r,n:s}=t;let i,o;if(U("scalar",e,_e,s),r){const{k1neg:t,k1:s,k2neg:a,k2:c}=r.splitScalar(e);let{p:u,f:d}=this.wNAF(s),{p:f,f:l}=this.wNAF(c);u=g.constTimeNegate(t,u),f=g.constTimeNegate(a,f),f=new h(n.mul(f.px,r.beta),f.py,f.pz),i=u.add(f),o=d.add(l)}else{const{p:t,f:n}=this.wNAF(e);i=t,o=n}return h.normalizeZ([i,o])[0]}multiplyAndAddUnsafe(e,t,n){const r=h.BASE,s=(e,t)=>t!==we&&t!==_e&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=s(this,t).add(s(e,n));return i.is0()?void 0:i}toAffine(e){return f(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===_e)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===_e?this:n?n(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return d("isCompressed",e),this.assertValidity(),s(h,this,e)}toHex(e=!0){return d("isCompressed",e),m(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const p=t.nBitLength,g=(b=h,y=t.endo?Math.ceil(p/2):p,{constTimeNegate:ie,hasPrecomputes:e=>1!==he(e),unsafeLadder(e,t,n=b.ZERO){let r=e;for(;t>re;)t&se&&(n=n.add(r)),r=r.double(),t>>=se;return n},precomputeWindow(e,t){const{windows:n,windowSize:r}=ae(t,y),s=[];let i=e,o=i;for(let a=0;a<n;a++){o=i,s.push(o);for(let e=1;e<r;e++)o=o.add(i),s.push(o);i=o.double()}return s},wNAF(e,t,n){let r=b.ZERO,s=b.BASE;const i=ae(e,y);for(let o=0;o<i.windows;o++){const{nextN:e,offset:a,isZero:c,isNeg:u,isNegF:d,offsetF:f}=ce(n,o,i);n=e,c?s=s.add(ie(d,t[f])):r=r.add(ie(u,t[a]))}return{p:r,f:s}},wNAFUnsafe(e,t,n,r=b.ZERO){const s=ae(e,y);for(let i=0;i<s.windows&&n!==re;i++){const{nextN:e,offset:o,isZero:a,isNeg:c}=ce(n,i,s);if(n=e,!a){const e=t[o];r=r.add(c?e.negate():e)}}return r},getPrecomputes(e,t,n){let r=fe.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&fe.set(t,n(r))),r},wNAFCached(e,t,n){const r=he(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){const s=he(e);return 1===s?this.unsafeLadder(e,t,r):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),t,r)},setWindowSize(e,t){oe(t,y),le.set(e,t),fe.delete(e)}});var b,y;return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(e){return P(e,_e,t.n)}}}function Ee(e){const t=function(e){const t=me(e);return L(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,s=n.BYTES+1,i=2*n.BYTES+1;function o(e){return j(e,r)}function a(e){return z(e,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:l,isWithinCurveOrder:h}=Ce({...t,toBytes(e,t,r){const s=t.toAffine(),i=n.toBytes(s.x),o=N;return d("isCompressed",r),r?o(Uint8Array.from([t.hasEvenY()?2:3]),i):o(Uint8Array.from([4]),i,n.toBytes(s.y))},fromBytes(e){const t=e.length,r=e[0],o=e.subarray(1);if(t!==s||2!==r&&3!==r){if(t===i&&4===r){return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))}}throw new Error("invalid Point, expected length of "+s+", or uncompressed "+i+", got "+t)}{const e=A(o);if(!P(e,_e,n.ORDER))throw new Error("Point is not on curve");const t=l(e);let s;try{s=n.sqrt(t)}catch(a){const e=a instanceof Error?": "+a.message:"";throw new Error("Point is not on curve"+e)}return 1==(1&r)!==((s&_e)===_e)&&(s=n.neg(s)),{x:e,y:s}}}}),p=e=>m(I(e,t.nByteLength));function g(e){return e>r>>_e}const b=(e,t,n)=>A(e.slice(t,n));class y{constructor(e,t,n){U("r",e,_e,r),U("s",t,_e,r),this.r=e,this.s=t,null!=n&&(this.recovery=n),Object.freeze(this)}static fromCompact(e){const n=t.nByteLength;return e=x("compactSignature",e,2*n),new y(b(e,0,n),b(e,n,2*n))}static fromDER(e){const{r:t,s:n}=ye.toSig(x("DER",e));return new y(t,n)}assertValidity(){}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:s,recovery:i}=this,c=C(x("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const d=2===i||3===i?r+t.n:r;if(d>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=0==(1&i)?"02":"03",l=u.fromHex(f+p(d)),h=a(d),m=o(-c*h),g=o(s*h),b=u.BASE.multiplyAndAddUnsafe(l,m,g);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return E(this.toDERHex())}toDERHex(){return ye.hexFromSig(this)}toCompactRawBytes(){return E(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const w={isValidPrivateKey(e){try{return f(e),!0}catch(t){return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const e=ne(t.n);return function(e,t,n=!1){const r=e.length,s=te(t),i=ne(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=j(n?S(e):A(e),t-M)+M;return n?k(o,s):I(o,s)}(t.randomBytes(e),t.n)},precompute:(e=8,t=u.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function _(e){const t=c(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===s||r===i:n?r===2*s||r===2*i:e instanceof u}const v=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const n=A(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},C=t.bits2int_modN||function(e){return o(v(e))},B=R(t.nBitLength);function T(e){return U("num < 2^"+t.nBitLength,e,we,B),I(e,t.nByteLength)}function F(e,r,s=D){if(["recovered","canonical"].some((e=>e in s)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:c}=t;let{lowS:d,prehash:l,extraEntropy:p}=s;null==d&&(d=!0),e=x("msgHash",e),ge(s),l&&(e=x("prehashed msgHash",i(e)));const m=C(e),b=f(r),w=[T(b),T(m)];if(null!=p&&!1!==p){const e=!0===p?c(n.BYTES):p;w.push(x("extraEntropy",e))}const _=N(...w),E=m;return{seed:_,k2sig:function(e){const t=v(e);if(!h(t))return;const n=a(t),r=u.BASE.multiply(t).toAffine(),s=o(r.x);if(s===we)return;const i=o(n*o(E+s*b));if(i===we)return;let c=(r.x===s?0:2)|Number(r.y&_e),f=i;return d&&g(i)&&(f=function(e){return g(e)?o(-e):e}(i),c^=1),new y(s,f,c)}}}const D={lowS:t.lowS,prehash:!1},H={lowS:t.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return u.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(_(e))throw new Error("first arg must be private key");if(!_(t))throw new Error("second arg must be public key");return u.fromHex(t).multiply(f(e)).toRawBytes(n)},sign:function(e,n,r=D){const{seed:s,k2sig:i}=F(e,n,r),o=t;return function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=O(e),s=O(e),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...e)=>n(s,r,...e),c=(e=O(0))=>{s=a(G([0]),e),r=a(),0!==e.length&&(s=a(G([1]),e),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return N(...n)};return(e,t)=>{let n;for(o(),c(e);!(n=t(u()));)c();return o(),n}}(o.hash.outputLen,o.nByteLength,o.hmac)(s,i)},verify:function(e,n,r,s=H){const i=e;n=x("msgHash",n),r=x("publicKey",r);const{lowS:d,prehash:f,format:l}=s;if(ge(s),"strict"in s)throw new Error("options.strict was renamed to lowS");if(void 0!==l&&"compact"!==l&&"der"!==l)throw new Error("format must be compact or der");const h="string"==typeof i||c(i),p=!h&&!l&&"object"==typeof i&&null!==i&&"bigint"==typeof i.r&&"bigint"==typeof i.s;if(!h&&!p)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let m,g;try{if(p&&(m=new y(i.r,i.s)),h){try{"compact"!==l&&(m=y.fromDER(i))}catch(I){if(!(I instanceof ye.Err))throw I}m||"der"===l||(m=y.fromCompact(i))}g=u.fromHex(r)}catch(k){return!1}if(!m)return!1;if(d&&m.hasHighS())return!1;f&&(n=t.hash(n));const{r:b,s:w}=m,_=C(n),v=a(w),E=o(_*v),A=o(b*v),S=u.BASE.multiplyAndAddUnsafe(g,E,A)?.toAffine();return!!S&&o(S.x)===b},ProjectivePoint:u,Signature:y,utils:w}}function Ae(e){return{hash:e,hmac:(t,...n)=>(0,s.w)(e,t,(0,i.Id)(...n)),randomBytes:i.po}}const Se=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ie=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ke=BigInt(1),xe=BigInt(2),Ne=(e,t)=>(e+t/xe)/t;function Be(e){const t=Se,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,f=q(d,n,t)*d%t,l=q(f,n,t)*d%t,h=q(l,xe,t)*u%t,p=q(h,s,t)*h%t,m=q(p,i,t)*p%t,g=q(m,a,t)*m%t,b=q(g,c,t)*g%t,y=q(b,a,t)*m%t,w=q(y,n,t)*d%t,_=q(w,o,t)*p%t,v=q(_,r,t)*u%t,C=q(v,xe,t);if(!Pe.eql(Pe.sqr(C),e))throw new Error("Cannot find square root");return C}const Pe=ee(Se,void 0,void 0,{sqrt:Be}),Ue=function(e,t){const n=t=>Ee({...e,...Ae(t)});return{...n(t),create:n}}({a:BigInt(0),b:BigInt(7),Fp:Pe,n:Ie,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ie,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ke*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Ne(i*e,t),c=Ne(-r*e,t);let u=j(e-a*n-c*s,t),d=j(-a*r-c*i,t);const f=u>o,l=d>o;if(f&&(u=t-u),l&&(d=t-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:u,k2neg:l,k2:d}}}},r.sc);BigInt(0);Ue.ProjectivePoint;var Re=n(4148),Oe=n(22421),Ge=n(53695);function Te(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}const Le=e=>{if("string"!=typeof e)throw(0,Ge.mQ)("[stripHexPrefix] input must be type 'string', received "+typeof e);return Te(e)?e.slice(2):e};function Fe(e){let t=e;if("string"!=typeof t)throw(0,Ge.mQ)("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}const De=function(e){if(!(e instanceof Uint8Array)){const t=`This method only supports Uint8Array but input was: ${e}`;throw(0,Ge.mQ)(t)}},Me=BigInt(0),He=i.My,$e=e=>{if(!e.startsWith("0x"))throw(0,Ge.mQ)("input string must be 0x prefixed");return(0,Oe.aT)(Fe(Le(e)))},Ze=e=>{if(e.startsWith("0x"))throw(0,Ge.mQ)("input string cannot be 0x prefixed");return(0,Oe.aT)(Fe(e))},Ve=e=>`0x${He(e)}`,We=[];for(let Qt=0;Qt<=65535;Qt++)We[Qt]=BigInt(Qt);const je=(e,t=!1)=>{t&&e.reverse();const n=Ve(e);return"0x"===n?Me:4===n.length?We[e[0]]:6===n.length?We[256*e[0]+e[1]]:BigInt(n)},qe=e=>{const t=Number(je(e));if(!Number.isSafeInteger(t))throw(0,Ge.mQ)("Number exceeds 53 bits");return t},ze=e=>{const t=(e=>{if(!Number.isSafeInteger(e)||e<0)throw(0,Ge.mQ)(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`})(e);return $e(t)},Qe=(e,t=!1)=>{const n=$e(`0x${Fe(e.toString(16))}`);return t?n.reverse():n},Ke=(e,t,n)=>n?e.length<t?new Uint8Array([...e,...new Uint8Array(t-e.length)]):e.subarray(0,t):e.length<t?new Uint8Array([...new Uint8Array(t-e.length),...e]):e.subarray(-t),Ye=(e,t)=>(De(e),Ke(e,t,!1)),Je=(e,t)=>(De(e),Ke(e,t,!0)),Xe=e=>{let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},et=e=>(De(e),Xe(e)),tt=(e,t=50)=>{const n=e instanceof Uint8Array?Ve(e):e,r="0x"===n.slice(0,2)?t+2:t;return n.length<=r?n:n.slice(0,r)+"\u2026"},nt=e=>`0x${e.toString(16)}`,rt=e=>et(Qe(e)),st=(e,t=!0)=>{const n=Qe(e);if(t&&n.length>20)throw Error(`Invalid address bytes length=${n.length} strict=${t}`);return Ye(n,20)},it=e=>et(ze(e)),ot=(...e)=>{if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const t=e[r];n.set(t,s),s+=t.length}return n};const at=BigInt("0xffffffffffffffff"),ct=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ut=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),dt=(Ue.CURVE.n,Ue.CURVE.n,BigInt(2),BigInt("0x10000000000000000000000000000000000000000000000000000000000000000")),ft=$e("0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"),lt=($e("0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347"),$e("0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421")),ht=((0,Re.s)(new Uint8Array),Uint8Array.from([128]),"0000000000000000000000000000000000000003"),pt=(BigInt(-1),BigInt(0)),mt=BigInt(1),gt=BigInt(2),bt=BigInt(3),yt=BigInt(7),wt=BigInt(8),_t=BigInt(27),vt=BigInt(28),Ct=BigInt(31),Et=BigInt(32),At=BigInt(64),St=(BigInt(128),BigInt(255)),It=BigInt(256),kt=BigInt(96),xt=(BigInt(100),BigInt(160)),Nt=BigInt(224),Bt=BigInt(7922816251426434e13),Pt=BigInt(1461501637330903e33),Ut=BigInt(2695994666715064e52);BigInt(10**9),BigInt(10**18);var Rt=n(51329);class Ot{get version(){if(null!==this._version)return this._version;throw Error(`version=${this._version} not loaded`)}set version(e){this._version=e}get nonce(){if(null!==this._nonce)return this._nonce;throw Error(`nonce=${this._nonce} not loaded`)}set nonce(e){this._nonce=e}get balance(){if(null!==this._balance)return this._balance;throw Error(`balance=${this._balance} not loaded`)}set balance(e){this._balance=e}get storageRoot(){if(null!==this._storageRoot)return this._storageRoot;throw Error(`storageRoot=${this._storageRoot} not loaded`)}set storageRoot(e){this._storageRoot=e}get codeHash(){if(null!==this._codeHash)return this._codeHash;throw Error(`codeHash=${this._codeHash} not loaded`)}set codeHash(e){this._codeHash=e}get codeSize(){if(null!==this._codeSize)return this._codeSize;throw Error(`codeSize=${this._codeSize} not loaded`)}set codeSize(e){this._codeSize=e}constructor(e=pt,t=pt,n=lt,r=ft,s=0,i=0){this._nonce=null,this._balance=null,this._storageRoot=null,this._codeHash=null,this._codeSize=null,this._version=null,this._nonce=e,this._balance=t,this._storageRoot=n,this._codeHash=r,null!==s||null===r||this.isContract()||(s=0),this._codeSize=s,this._version=i,this._validate()}_validate(){if(null!==this._nonce&&this._nonce<pt)throw(0,Ge.mQ)("nonce must be greater than zero");if(null!==this._balance&&this._balance<pt)throw(0,Ge.mQ)("balance must be greater than zero");if(null!==this._storageRoot&&32!==this._storageRoot.length)throw(0,Ge.mQ)("storageRoot must have a length of 32");if(null!==this._codeHash&&32!==this._codeHash.length)throw(0,Ge.mQ)("codeHash must have a length of 32");if(null!==this._codeSize&&this._codeSize<pt)throw(0,Ge.mQ)("codeSize must be greater than zero")}raw(){return[rt(this.nonce),rt(this.balance),this.storageRoot,this.codeHash]}serialize(){return Ge.Tj.encode(this.raw())}serializeWithPartialInfo(){const e=[],t=it(0),n=it(1);return null!==this._nonce?e.push([n,rt(this._nonce)]):e.push([t]),null!==this._balance?e.push([n,rt(this._balance)]):e.push([t]),null!==this._storageRoot?e.push([n,this._storageRoot]):e.push([t]),null!==this._codeHash?e.push([n,this._codeHash]):e.push([t]),null!==this._codeSize?e.push([n,it(this._codeSize)]):e.push([t]),null!==this._version?e.push([n,it(this._version)]):e.push([t]),Ge.Tj.encode(e)}isContract(){if(null===this._codeHash&&null===this._codeSize)throw Error("Insufficient data as codeHash=null and codeSize=null");return null!==this._codeHash&&!(0,Oe.ND)(this._codeHash,ft)||null!==this._codeSize&&0!==this._codeSize}isEmpty(){return!(null!==this._balance&&this.balance!==pt||null===this._nonce&&this.nonce!==pt||null!==this._codeHash&&!(0,Oe.ND)(this.codeHash,ft))&&(this.balance===pt&&this.nonce===pt&&(0,Oe.ND)(this.codeHash,ft))}}const Gt=function(e,t){return De(e),De(t),je(t)===pt?(0,Rt.So)(Ge.Tj.encode([e,Uint8Array.from([])])).subarray(-20):(0,Rt.So)(Ge.Tj.encode([e,t])).subarray(-20)},Tt=function(e,t,n){if(De(e),De(t),De(n),20!==e.length)throw(0,Ge.mQ)("Expected from to be of length 20");if(32!==t.length)throw(0,Ge.mQ)("Expected salt to be of length 32");return(0,Rt.So)(ot($e("0xff"),e,t,(0,Rt.So)(n))).subarray(-20)},Lt=function(e,t=!1){if(De(e),t&&64!==e.length&&(e=Ue.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1)),64!==e.length)throw(0,Ge.mQ)("Expected pubKey to be of length 64");return(0,Rt.So)(e).subarray(-20)};new Uint8Array(0);class Ft{constructor(e){if(20!==e.length)throw(0,Ge.mQ)("Invalid address length");this.bytes=e}equals(e){return(0,Oe.ND)(this.bytes,e.bytes)}isZero(){return this.equals(new Ft(new Uint8Array(20)))}isPrecompileOrSystemAddress(){const e=je(this.bytes),t=pt,n=BigInt("0xffff");return e>=t&&e<=n}toString(){return Ve(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}}function Dt(){return new Ft(new Uint8Array(20))}function Mt(e){const t=Qe(e);if(t.length>20)throw(0,Ge.mQ)(`Invalid address, too long: ${t.length}`);return new Ft(Ye(t,20))}const Ht={Number:0,BigInt:1,Uint8Array:2,PrefixedHexString:3};function $t(e,t){if(null===e)return null;if(void 0===e)return;if("string"==typeof e&&!Te(e))throw(0,Ge.mQ)(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw(0,Ge.mQ)("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const n=(e=>{if(null==e)return new Uint8Array;if(Array.isArray(e)||e instanceof Uint8Array)return Uint8Array.from(e);if("string"==typeof e){if(!Te(e))throw(0,Ge.mQ)(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${e}`);return $e(e)}if("number"==typeof e)return ze(e);if("bigint"==typeof e){if(e<Me)throw(0,Ge.mQ)(`Cannot convert negative bigint to Uint8Array. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t="0"+t),Ze(t)}if(void 0!==e.toBytes)return e.toBytes();throw(0,Ge.mQ)("invalid type")})(e);switch(t){case Ht.Uint8Array:return n;case Ht.BigInt:return je(n);case Ht.Number:{const e=je(n);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw(0,Ge.mQ)("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case Ht.PrefixedHexString:return Ve(n);default:throw(0,Ge.mQ)("unknown outputType")}}function Zt(e,t){return e===pt||e===mt?e:void 0===t?e-_t:e-(t*gt+BigInt(35))}function Vt(e){return e===pt||e===mt}const Wt=function(e,t,n,r,s){const i=ot(Ye(n,32),Ye(r,32)),o=Zt(t,s);if(!Vt(o))throw(0,Ge.mQ)("Invalid signature v value");return Ue.Signature.fromCompact(i).addRecoveryBit(Number(o)).recoverPublicKey(e).toRawBytes(!1).slice(1)};$e("0x05");const jt=0,qt=1;ze(jt),ze(qt),BigInt(256),BigInt(31);const zt=(e,t)=>{const n=new Uint8Array(32);return n.set([t],0),n.set((0,Re.s)($e(e)).subarray(1),1),Ve(n)}},76210(e,t,n){"use strict";n.d(t,{Zf:()=>b,qt:()=>y,sc:()=>g});var r=n(27816),s=n(49964),i=n(38628);const o=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array(64);class c extends r.ol{constructor(e=32){super(64,e,8,!1),this.A=0|r.yc[0],this.B=0|r.yc[1],this.C=0|r.yc[2],this.D=0|r.yc[3],this.E=0|r.yc[4],this.F=0|r.yc[5],this.G=0|r.yc[6],this.H=0|r.yc[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:o,H:a}=this;return[e,t,n,r,s,i,o,a]}set(e,t,n,r,s,i,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,!1);for(let r=16;r<64;r++){const e=a[r-15],t=a[r-2],n=(0,i.Ow)(e,7)^(0,i.Ow)(e,18)^e>>>3,s=(0,i.Ow)(t,17)^(0,i.Ow)(t,19)^t>>>10;a[r]=s+a[r-7]+n+a[r-16]|0}let{A:n,B:s,C:c,D:u,E:d,F:f,G:l,H:h}=this;for(let p=0;p<64;p++){const e=h+((0,i.Ow)(d,6)^(0,i.Ow)(d,11)^(0,i.Ow)(d,25))+(0,r.r9)(d,f,l)+o[p]+a[p]|0,t=((0,i.Ow)(n,2)^(0,i.Ow)(n,13)^(0,i.Ow)(n,22))+(0,r.TQ)(n,s,c)|0;h=l,l=f,f=d,d=u+e|0,u=c,c=s,s=n,n=e+t|0}n=n+this.A|0,s=s+this.B|0,c=c+this.C|0,u=u+this.D|0,d=d+this.E|0,f=f+this.F|0,l=l+this.G|0,h=h+this.H|0,this.set(n,s,c,u,d,f,l,h)}roundClean(){(0,i.uH)(a)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,i.uH)(this.buffer)}}const u=(()=>s.lD(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),d=(()=>u[0])(),f=(()=>u[1])(),l=new Uint32Array(80),h=new Uint32Array(80);class p extends r.ol{constructor(e=64){super(128,e,16,!1),this.Ah=0|r.tT[0],this.Al=0|r.tT[1],this.Bh=0|r.tT[2],this.Bl=0|r.tT[3],this.Ch=0|r.tT[4],this.Cl=0|r.tT[5],this.Dh=0|r.tT[6],this.Dl=0|r.tT[7],this.Eh=0|r.tT[8],this.El=0|r.tT[9],this.Fh=0|r.tT[10],this.Fl=0|r.tT[11],this.Gh=0|r.tT[12],this.Gl=0|r.tT[13],this.Hh=0|r.tT[14],this.Hl=0|r.tT[15]}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:i,Dh:o,Dl:a,Eh:c,El:u,Fh:d,Fl:f,Gh:l,Gl:h,Hh:p,Hl:m}=this;return[e,t,n,r,s,i,o,a,c,u,d,f,l,h,p,m]}set(e,t,n,r,s,i,o,a,c,u,d,f,l,h,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|d,this.Fl=0|f,this.Gh=0|l,this.Gl=0|h,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let s=0;s<16;s++,t+=4)l[s]=e.getUint32(t),h[s]=e.getUint32(t+=4);for(let d=16;d<80;d++){const e=0|l[d-15],t=0|h[d-15],n=s.rE(e,t,1)^s.rE(e,t,8)^s.xn(e,t,7),r=s.ry(e,t,1)^s.ry(e,t,8)^s.jm(e,t,7),i=0|l[d-2],o=0|h[d-2],a=s.rE(i,o,19)^s.qh(i,o,61)^s.xn(i,o,6),c=s.ry(i,o,19)^s.Ei(i,o,61)^s.jm(i,o,6),u=s.CW(r,c,h[d-7],h[d-16]),f=s.CQ(u,n,a,l[d-7],l[d-16]);l[d]=0|f,h[d]=0|u}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:p,Eh:m,El:g,Fh:b,Fl:y,Gh:w,Gl:_,Hh:v,Hl:C}=this;for(let E=0;E<80;E++){const e=s.rE(m,g,14)^s.rE(m,g,18)^s.qh(m,g,41),t=s.ry(m,g,14)^s.ry(m,g,18)^s.Ei(m,g,41),A=m&b^~m&w,S=g&y^~g&_,I=s.F8(C,t,S,f[E],h[E]),k=s.TH(I,v,e,A,d[E],l[E]),x=0|I,N=s.rE(n,r,28)^s.qh(n,r,34)^s.qh(n,r,39),B=s.ry(n,r,28)^s.Ei(n,r,34)^s.Ei(n,r,39),P=n&i^n&a^i&a,U=r&o^r&c^o&c;v=0|w,C=0|_,w=0|b,_=0|y,b=0|m,y=0|g,({h:m,l:g}=s.WQ(0|u,0|p,0|k,0|x)),u=0|a,p=0|c,a=0|i,c=0|o,i=0|n,o=0|r;const R=s.Vl(x,B,U);n=s.Vr(R,k,N,P),r=0|R}({h:n,l:r}=s.WQ(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=s.WQ(0|this.Bh,0|this.Bl,0|i,0|o)),({h:a,l:c}=s.WQ(0|this.Ch,0|this.Cl,0|a,0|c)),({h:u,l:p}=s.WQ(0|this.Dh,0|this.Dl,0|u,0|p)),({h:m,l:g}=s.WQ(0|this.Eh,0|this.El,0|m,0|g)),({h:b,l:y}=s.WQ(0|this.Fh,0|this.Fl,0|b,0|y)),({h:w,l:_}=s.WQ(0|this.Gh,0|this.Gl,0|w,0|_)),({h:v,l:C}=s.WQ(0|this.Hh,0|this.Hl,0|v,0|C)),this.set(n,r,i,o,a,c,u,p,m,g,b,y,w,_,v,C)}roundClean(){(0,i.uH)(l,h)}destroy(){(0,i.uH)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class m extends p{constructor(){super(48),this.Ah=0|r.Az[0],this.Al=0|r.Az[1],this.Bh=0|r.Az[2],this.Bl=0|r.Az[3],this.Ch=0|r.Az[4],this.Cl=0|r.Az[5],this.Dh=0|r.Az[6],this.Dl=0|r.Az[7],this.Eh=0|r.Az[8],this.El=0|r.Az[9],this.Fh=0|r.Az[10],this.Fl=0|r.Az[11],this.Gh=0|r.Az[12],this.Gl=0|r.Az[13],this.Hh=0|r.Az[14],this.Hl=0|r.Az[15]}}const g=(0,i.qj)((()=>new c)),b=(0,i.qj)((()=>new p)),y=(0,i.qj)((()=>new m))},81257(e,t,n){e.exports=function(e){function t(e){let n,s,i,o=null;function a(...e){if(!a.enabled)return;const r=a,s=Number(new Date),i=s-(n||s);r.diff=i,r.prev=n,r.curr=s,n=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,s)=>{if("%%"===n)return"%";o++;const i=t.formatters[s];if("function"==typeof i){const t=e[o];n=i.call(r,t),e.splice(o,1),o--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(s!==t.namespaces&&(s=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function s(e,t){let n=0,r=0,s=-1,i=0;for(;n<e.length;)if(r<t.length&&(t[r]===e[n]||"*"===t[r]))"*"===t[r]?(s=r,i=n,r++):(n++,r++);else{if(-1===s)return!1;r=s+1,i++,n=i}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const r of n)"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(const n of t.skips)if(s(e,n))return!1;for(const n of t.names)if(s(e,n))return!0;return!1},t.humanize=n(27250),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},91031(e,t,n){"use strict";n.d(t,{ZM:()=>io});var r=n(75045);const s=239,i="Trying to read out of bounds",o="Uint does not match expected value ",a="Bytes do not match expected value",c="err: invalid format",u="err: invalid magic",d="err: invalid eof version",f="err: expected kind types",l="err: expected kind code",h="err: expected kind data",p="err: expected terminator",m="missing type size",g="err: type section size invalid",b="missing code size",y="code section should be at least one byte",w="code size does not match type size",_="missing data size",v="missing container size",C="container section should at least contain one section and at most 255 sections",E="err: mismatch of code sections count and type signatures",A="expected inputs",S="expected outputs",I="inputs exceeds 127, the maximum, got: ",k="outputs exceeds 127, the maximum, got: ",x="first code section should have 0 inputs",N="first code section should have 0x80 (terminating section) outputs",B="expected maxStackHeight",P="stack height limit of 1024 exceeded: ",U="should have at least 1 code section",R="expected a code section",O="Expected data section",G="expected a container section",T="container section should be at least 1 byte",L="EOFCREATE targets an undefined container",F="RETURNCONTRACT targets an undefined container",D="Container is targeted by both EOFCREATE and RETURNCONTRACT",M="Unreachable containers (by both EOFCREATE and RETURNCONTRACT)",H="Container contains opcodes which this mode (deployment mode / init code / runtime mode) cannot have",$="got dangling bytes in body",Z="invalid opcode",V="invalid terminating opcode",W="invalid opcode: intermediates out-of-bounds",j="invalid rjump* target",q="invalid callf/jumpf target",z="invalid callf: calls to non-returning function",Q="invalid stack height",K="invalid jumpf target (output count)",Y="invalid returning code section: section is not returning",J="invalid section: section should return but has no RETF/JUMP to return",X="invalid RJUMPV: table size 0",ee="unreachable code sections",te="unreachable code (by forward jumps)",ne="DATALOADN reading out of bounds",re="Max stack height does not match the reported max stack height",se="Stack underflow",ie="Stack overflow",oe="Unstable stack (can reach stack under/overflow by jumps)",ae="Trying to return to undefined function",ce="Return stack overflow",ue="invalid extcall target: address > 20 bytes",de="invalid RETURNCONTRACT: data size lower than expected";function fe(e,...t){switch(e){case i:{const e=t[0];if(0===e||2===e||3===e||6===e)throw(0,r.mQ1)(t[1]);throw(0,r.mQ1)(i+" ")}case a:{const e=t[0];if(0===e||2===e||3===e||6===e)throw(0,r.mQ1)(t[1]);throw(0,r.mQ1)(a+` at pos: ${t[0]}: ${t[1]}`)}case o:{const e=t[0];if(0===e||2===e||3===e||6===e||18===e)throw(0,r.mQ1)(t[1]);throw(0,r.mQ1)(o+`at pos: ${t[0]}: ${t[1]}`)}case m:throw(0,r.mQ1)(m+t[0]);case E:throw(0,r.mQ1)(`${E} (types ${t[0]} code ${t[1]})`);case g:throw(0,r.mQ1)(g);case w:throw(0,r.mQ1)(w+t[0]);case A:throw(0,r.mQ1)(`${A} - typeSection ${t[0]}`);case S:throw(0,r.mQ1)(`${S} - typeSection ${t[0]}`);case x:throw(0,r.mQ1)("first code section should have 0 inputs");case N:throw(0,r.mQ1)("first code section should have 0 outputs");case I:throw(0,r.mQ1)(I+`${t[1]} - code section ${t[0]}`);case k:throw(0,r.mQ1)(k+`${t[1]} - code section ${t[0]}`);case R:throw(0,r.mQ1)(`expected code: codeSection ${t[0]}: `);case O:throw(0,r.mQ1)(O);case B:throw(0,r.mQ1)(`${B} - typeSection ${t[0]}: `);case P:throw(0,r.mQ1)(`${P}, got: ${t[1]} - typeSection ${t[0]}`);case $:throw(0,r.mQ1)($);default:throw(0,r.mQ1)(e)}}const le={0:{inputs:0,outputs:0,name:"STOP",intermediates:0,terminating:!0},1:{inputs:2,outputs:1,name:"ADD",intermediates:0},2:{inputs:2,outputs:1,name:"MUL",intermediates:0},3:{inputs:2,outputs:1,name:"SUB",intermediates:0},4:{inputs:2,outputs:1,name:"DIV",intermediates:0},5:{inputs:2,outputs:1,name:"SDIV",intermediates:0},6:{inputs:2,outputs:1,name:"MOD",intermediates:0},7:{inputs:2,outputs:1,name:"SMOD",intermediates:0},8:{inputs:3,outputs:1,name:"ADDMOD",intermediates:0},9:{inputs:3,outputs:1,name:"MULMOD",intermediates:0},10:{inputs:2,outputs:1,name:"EXP",intermediates:0},11:{inputs:2,outputs:1,name:"SIGNEXTEND",intermediates:0},16:{inputs:2,outputs:1,name:"LT",intermediates:0},17:{inputs:2,outputs:1,name:"GT",intermediates:0},18:{inputs:2,outputs:1,name:"SLT",intermediates:0},19:{inputs:2,outputs:1,name:"SGT",intermediates:0},20:{inputs:2,outputs:1,name:"EQ",intermediates:0},21:{inputs:1,outputs:1,name:"ISZERO",intermediates:0},22:{inputs:2,outputs:1,name:"AND",intermediates:0},23:{inputs:2,outputs:1,name:"OR",intermediates:0},24:{inputs:2,outputs:1,name:"XOR",intermediates:0},25:{inputs:1,outputs:1,name:"NOT",intermediates:0},26:{inputs:2,outputs:1,name:"BYTE",intermediates:0},27:{inputs:2,outputs:1,name:"SHL",intermediates:0},28:{inputs:2,outputs:1,name:"SHR",intermediates:0},29:{inputs:2,outputs:1,name:"SAR",intermediates:0},32:{inputs:2,outputs:1,name:"SHA3",intermediates:0},48:{inputs:0,outputs:1,name:"ADDRESS",intermediates:0},49:{inputs:1,outputs:1,name:"BALANCE",intermediates:0},50:{inputs:0,outputs:1,name:"ORIGIN",intermediates:0},51:{inputs:0,outputs:1,name:"CALLER",intermediates:0},52:{inputs:0,outputs:1,name:"CALLVALUE",intermediates:0},53:{inputs:1,outputs:1,name:"CALLDATALOAD",intermediates:0},54:{inputs:0,outputs:1,name:"CALLDATASIZE",intermediates:0},55:{inputs:3,outputs:0,name:"CALLDATACOPY",intermediates:0},58:{inputs:0,outputs:1,name:"GASPRICE",intermediates:0},61:{inputs:0,outputs:1,name:"RETURNDATASIZE",intermediates:0},62:{inputs:3,outputs:0,name:"RETURNDATACOPY",intermediates:0},64:{inputs:1,outputs:1,name:"BLOCKHASH",intermediates:0},65:{inputs:0,outputs:1,name:"COINBASE",intermediates:0},66:{inputs:0,outputs:1,name:"TIMESTAMP",intermediates:0},67:{inputs:0,outputs:1,name:"NUMBER",intermediates:0},68:{inputs:0,outputs:1,name:"PREVRANDAO",intermediates:0},69:{inputs:0,outputs:1,name:"GASLIMIT",intermediates:0},70:{inputs:0,outputs:1,name:"CHAINID",intermediates:0},71:{inputs:0,outputs:1,name:"SELFBALANCE",intermediates:0},72:{inputs:0,outputs:1,name:"BASEFEE",intermediates:0},73:{inputs:1,outputs:1,name:"BLOBAHASH",intermediates:0},74:{inputs:0,outputs:1,name:"BLOBBASEFEE",intermediates:0},80:{inputs:1,outputs:0,name:"POP",intermediates:0},81:{inputs:1,outputs:1,name:"MLOAD",intermediates:0},82:{inputs:2,outputs:0,name:"MSTORE",intermediates:0},83:{inputs:2,outputs:0,name:"MSTORE8",intermediates:0},84:{inputs:1,outputs:1,name:"SLOAD",intermediates:0},85:{inputs:2,outputs:0,name:"SSTORE",intermediates:0},89:{inputs:0,outputs:1,name:"MSIZE",intermediates:0},91:{inputs:0,outputs:0,name:"NOOP",intermediates:0},92:{inputs:1,outputs:1,name:"TLOAD",intermediates:0},93:{inputs:2,outputs:0,name:"TSTORE",intermediates:0},94:{inputs:3,outputs:0,name:"MCOPY",intermediates:0},95:{inputs:0,outputs:1,name:"PUSH0",intermediates:0},96:{inputs:0,outputs:1,name:"PUSH1",intermediates:1},97:{inputs:0,outputs:1,name:"PUSH2",intermediates:2},98:{inputs:0,outputs:1,name:"PUSH3",intermediates:3},99:{inputs:0,outputs:1,name:"PUSH4",intermediates:4},100:{inputs:0,outputs:1,name:"PUSH5",intermediates:5},101:{inputs:0,outputs:1,name:"PUSH6",intermediates:6},102:{inputs:0,outputs:1,name:"PUSH7",intermediates:7},103:{inputs:0,outputs:1,name:"PUSH8",intermediates:8},104:{inputs:0,outputs:1,name:"PUSH9",intermediates:9},105:{inputs:0,outputs:1,name:"PUSH10",intermediates:10},106:{inputs:0,outputs:1,name:"PUSH11",intermediates:11},107:{inputs:0,outputs:1,name:"PUSH12",intermediates:12},108:{inputs:0,outputs:1,name:"PUSH13",intermediates:13},109:{inputs:0,outputs:1,name:"PUSH14",intermediates:14},110:{inputs:0,outputs:1,name:"PUSH15",intermediates:15},111:{inputs:0,outputs:1,name:"PUSH16",intermediates:16},112:{inputs:0,outputs:1,name:"PUSH17",intermediates:17},113:{inputs:0,outputs:1,name:"PUSH18",intermediates:18},114:{inputs:0,outputs:1,name:"PUSH19",intermediates:19},115:{inputs:0,outputs:1,name:"PUSH20",intermediates:20},116:{inputs:0,outputs:1,name:"PUSH21",intermediates:21},117:{inputs:0,outputs:1,name:"PUSH22",intermediates:22},118:{inputs:0,outputs:1,name:"PUSH23",intermediates:23},119:{inputs:0,outputs:1,name:"PUSH24",intermediates:24},120:{inputs:0,outputs:1,name:"PUSH25",intermediates:25},121:{inputs:0,outputs:1,name:"PUSH26",intermediates:26},122:{inputs:0,outputs:1,name:"PUSH27",intermediates:27},123:{inputs:0,outputs:1,name:"PUSH28",intermediates:28},124:{inputs:0,outputs:1,name:"PUSH29",intermediates:29},125:{inputs:0,outputs:1,name:"PUSH30",intermediates:30},126:{inputs:0,outputs:1,name:"PUSH31",intermediates:31},127:{inputs:0,outputs:1,name:"PUSH32",intermediates:32},128:{inputs:1,outputs:2,name:"DUP1",intermediates:0},129:{inputs:2,outputs:3,name:"DUP2",intermediates:0},130:{inputs:3,outputs:4,name:"DUP3",intermediates:0},131:{inputs:4,outputs:5,name:"DUP4",intermediates:0},132:{inputs:5,outputs:6,name:"DUP5",intermediates:0},133:{inputs:6,outputs:7,name:"DUP6",intermediates:0},134:{inputs:7,outputs:8,name:"DUP7",intermediates:0},135:{inputs:8,outputs:9,name:"DUP8",intermediates:0},136:{inputs:9,outputs:10,name:"DUP9",intermediates:0},137:{inputs:10,outputs:11,name:"DUP10",intermediates:0},138:{inputs:11,outputs:12,name:"DUP11",intermediates:0},139:{inputs:12,outputs:13,name:"DUP12",intermediates:0},140:{inputs:13,outputs:14,name:"DUP13",intermediates:0},141:{inputs:14,outputs:15,name:"DUP14",intermediates:0},142:{inputs:15,outputs:16,name:"DUP15",intermediates:0},143:{inputs:16,outputs:17,name:"DUP16",intermediates:0},144:{inputs:2,outputs:2,name:"SWAP1",intermediates:0},145:{inputs:3,outputs:3,name:"SWAP2",intermediates:0},146:{inputs:4,outputs:4,name:"SWAP3",intermediates:0},147:{inputs:5,outputs:5,name:"SWAP4",intermediates:0},148:{inputs:6,outputs:6,name:"SWAP5",intermediates:0},149:{inputs:7,outputs:7,name:"SWAP6",intermediates:0},150:{inputs:8,outputs:8,name:"SWAP7",intermediates:0},151:{inputs:9,outputs:9,name:"SWAP8",intermediates:0},152:{inputs:10,outputs:10,name:"SWAP9",intermediates:0},153:{inputs:11,outputs:11,name:"SWAP10",intermediates:0},154:{inputs:12,outputs:12,name:"SWAP11",intermediates:0},155:{inputs:13,outputs:13,name:"SWAP12",intermediates:0},156:{inputs:14,outputs:14,name:"SWAP13",intermediates:0},157:{inputs:15,outputs:15,name:"SWAP14",intermediates:0},158:{inputs:16,outputs:16,name:"SWAP15",intermediates:0},159:{inputs:17,outputs:17,name:"SWAP16",intermediates:0},160:{inputs:2,outputs:0,name:"LOG0",intermediates:0},161:{inputs:3,outputs:0,name:"LOG1",intermediates:0},162:{inputs:4,outputs:0,name:"LOG2",intermediates:0},163:{inputs:5,outputs:0,name:"LOG3",intermediates:0},164:{inputs:6,outputs:0,name:"LOG4",intermediates:0},208:{inputs:1,outputs:1,name:"DATALOAD",intermediates:0},209:{inputs:0,outputs:1,name:"DATALOADN",intermediates:2},210:{inputs:0,outputs:1,name:"DATASIZE",intermediates:0},211:{inputs:3,outputs:0,name:"DATACOPY",intermediates:0},224:{inputs:0,outputs:0,name:"RJUMP",intermediates:2},225:{inputs:1,outputs:0,name:"RJUMPI",intermediates:2},226:{inputs:1,outputs:0,name:"RJUMPV",intermediates:0},227:{inputs:0,outputs:0,name:"CALLF",intermediates:2},228:{inputs:0,outputs:0,name:"RETF",intermediates:0,terminating:!0},229:{inputs:0,outputs:0,name:"JUMPF",intermediates:2,terminating:!0},230:{inputs:0,outputs:1,name:"DUPN",intermediates:1},231:{inputs:0,outputs:0,name:"SWAPN",intermediates:1},232:{inputs:0,outputs:0,name:"EXCHANGE",intermediates:1},236:{inputs:4,outputs:1,name:"EOFCREATE",intermediates:1},238:{inputs:2,outputs:0,name:"RETURNCONTRACT",intermediates:1,terminating:!0},243:{inputs:2,outputs:0,name:"RETURN",intermediates:0,terminating:!0},247:{inputs:1,outputs:1,name:"RETURNDATALOAD",intermediates:0},248:{inputs:4,outputs:1,name:"EXTCALL",intermediates:0},249:{inputs:3,outputs:1,name:"EXTDELEGATECALL",intermediates:0},251:{inputs:3,outputs:1,name:"EXTSTATICCALL",intermediates:0},253:{inputs:2,outputs:0,name:"REVERT",intermediates:0,terminating:!0},254:{inputs:0,outputs:0,name:"INVALID",intermediates:0,terminating:!0}},he="initCode",pe="deploymentCode",me="runtimeCode";function ge(e,t,n=me){return function(e,t,n=me){const r=new Map,s=t.getActiveOpcodes(),i=new Set;for(const[l]of s)i.add(l);i.add(254),i.delete(56),i.delete(57),i.delete(90),i.delete(59),i.delete(60),i.delete(63),i.delete(242),i.delete(255),i.delete(86),i.delete(87),i.delete(88),i.delete(240),i.delete(245);const o=new Set;o.add(0),o.add(243),o.add(253),o.add(254),o.add(238),o.add(228),o.add(229),o.add(224);for(const h of o)i.has(h)||o.delete(h);const a=new Set,c={};let u=-1;for(const p of e.body.codeSections){const m=new Set,g=new Set;function b(e){m.has(e)&&fe(j),g.add(e)}function y(e){g.has(e)&&fe(j),m.add(e)}u++,c[u]=new Set;const w=128===e.body.typeSections[u].outputs;let _=!1;const v=new Set;v.add(0);let C=0,E=0;const A=e.body.typeSections[u].inputs;let S=A;const I=[A],k=[A];for(;C<p.length;){const x=new Set;v.has(C)||fe(te),void 0!==I[C]&&void 0!==k[C]||fe(te),a.add(C);const N=p[C],B=I[C],U=k[C],R=le[N].inputs,O=le[N].outputs;B-R<0&&fe(se);const G=O-R;let T=B+G,$=U+G;if($>1024&&fe(ie),w&&228===N&&fe(Y),E=N,i.has(N)||fe(Z),224===N||225===N){const ce=be(p,C+1)+C+3;(ce<0||ce>=p.length)&&fe(j),x.add(ce),b(ce),v.add(ce),224===N&&!v.has(C+3)&&C+3<p.length&&fe(te)}else if(226===N){const ue=p[C+1]+1;void 0===ue?fe(W):0===ue&&fe(X),C+2*ue+2>=p.length&&fe(W);const de=C+2+2*ue;for(let ge=0;ge<ue;ge++){const we=C+2+2*ge;y(we),y(we+1);const _e=be(p,we)+de;(_e<0||_e>=p.length)&&fe(W),x.add(_e),b(_e),v.add(_e)}y(C+1),C+=2*ue+1}else if(227===N||229===N){const ve=ye(p,C+1);if(c[u].add(ve),ve>=e.header.codeSizes.length&&fe(q),227===N){const Ce=e.body.typeSections[ve].outputs,Ee=e.body.typeSections[ve].inputs;128===Ce&&fe(z),B<Ee&&fe(se),U+e.body.typeSections[ve].maxStackHeight-Ee>1024&&fe(ie),T+=Ce-Ee,$+=Ce-Ee}else{const Ae=e.body.typeSections[u].outputs,Se=e.body.typeSections[ve].outputs,Ie=e.body.typeSections[ve].inputs,ke=128===Se;if(Se>Ae&&!ke&&fe(K),w&&Se<=127&&fe(Y),ke)B<Ie&&fe(se);else{B===U&&U===Ae+Ie-Se||fe(Q),_=!0}U+e.body.typeSections[ve].maxStackHeight-Ie>1024&&fe(ie)}}else if(228===N){const xe=e.body.typeSections[u].outputs;B===U&&U===xe||fe(Q),_=!0}else if(230===N){p[C+1]+1>B&&fe(se)}else if(231===N){p[C+1]+2>B&&fe(se)}else if(232===N){const Ne=p[C+1];1+(Ne>>4)+(1+(15&Ne))+1>B&&fe(se)}else if(236===N){const Be=p[C+1];Be>=e.header.containerSizes.length&&fe(L),r.has(Be)&&r.get(Be)!==he&&fe(D),r.set(Be,he)}else if(238===N){n!==he&&fe(H);const Pe=p[C+1];Pe>=e.header.containerSizes.length&&fe(F),r.has(Pe)&&r.get(Pe)!==pe&&fe(D),r.set(Pe,pe)}else if(209===N){const Ue=ye(p,C+1)+32;e.header.dataSize<Ue&&fe(ne)}else 0!==N&&243!==N||n===he&&fe(H);const ae=le[N].intermediates;if(ae>0){for(let Re=1;Re<=ae;Re++)y(C+Re);C+=ae}C>=p.length&&fe(W),C++,void 0===le[N].terminating&&(v.add(C),224!==N&&x.add(C));for(const Oe of x)Oe<C&&(I[Oe]===T&&k[Oe]===$||fe(oe)),void 0===k[Oe]?(I[Oe]=T,k[Oe]=$):(I[Oe]=Math.min(I[Oe],T),k[Oe]=Math.max(k[Oe],$));S=Math.max($,S)}o.has(E)||fe(V),e.body.typeSections[u].maxStackHeight!==S&&fe(re),S>1024&&fe(P),_||w||fe(J)}const d=new Set;d.add(0);const f=[0];for(;f.length>0;){const Ge=c[f.pop()];for(const Te of Ge)d.has(Te)||(d.add(Te),f.push(Te))}d.size!==e.header.codeSizes.length&&fe(ee);r.size!==e.header.containerSizes.length&&fe(M);return r}(e,t,n)}function be(e,t){return new DataView(e.buffer).getInt16(t)}function ye(e,t){return new DataView(e.buffer).getUint16(t)}const we="default",_e="initMode",ve="txInitMode";class Ce{constructor(e){this.data=e,this.ptr=0}readBytes(e,t){const n=this.ptr+e;n>this.data.length&&fe(i,this.ptr,t);const r=this.ptr;return this.ptr+=e,this.data.slice(r,n)}readUint(e){return this.ptr>=this.data.length&&fe(i,this.ptr,e),this.data[this.ptr++]}verifyUint(e,t){this.readUint()!==e&&fe(o,this.ptr-1,t)}readUint16(e){this.ptr+2>this.data.length&&fe(i,this.ptr,e);const t=this.ptr;return this.ptr+=2,new DataView(this.data.buffer).getUint16(t)}getPtr(){return this.ptr}readRemainder(){return this.data.slice(this.ptr)}isAtEnd(){return this.ptr===this.data.length}}class Ee{constructor(e){if(e.length>49152)throw(0,r.mQ1)("err: container size more than maximum valid size");const t=new Ce(e);if(t.verifyUint(s,c),t.verifyUint(0,u),t.verifyUint(1,d),e.length<15)throw(0,r.mQ1)("err: container size less than minimum valid size");t.verifyUint(1,f);const n=t.readUint16(m);if(n<4&&fe(g,n),n%4!=0&&fe(g,n),n>4096)throw(0,r.mQ1)(`err: number of code sections must not exceed 1024 (got ${n})`);t.verifyUint(2,l);const i=t.readUint16(b);i<1&&fe(U),i!==n/4&&fe(E,n/4,i);const o=[];for(let r=0;r<i;r++){const e=t.readUint16(R);e<1&&fe(y),o.push(e)}let a=t.readUint();const w=[];if(3===a){const e=t.readUint16(v);e<1&&fe(C),e>256&&fe(C);for(let n=0;n<e;n++){const e=t.readUint16(G);e<1&&fe(T),w.push(e)}a=t.readUint()}4!==a&&fe(h),this.dataSizePtr=t.getPtr();const A=t.readUint16(_);t.verifyUint(0,p),this.typeSize=n,this.codeSizes=o,this.containerSizes=w,this.dataSize=A,this.buffer=e.slice(0,t.getPtr());const S=this.buffer.length+this.typeSize;this.codeStartPos=[S]}sections(){return[this.typeSize,this.codeSizes,this.containerSizes,this.dataSize]}sectionSizes(){return[1,this.codeSizes.length,this.containerSizes.length,1]}getCodePosition(e){if(this.codeStartPos[e])return this.codeStartPos[e];const t=this.codeStartPos.length;let n=this.codeStartPos[t-1];for(let r=t;r<=e;r++)n+=this.codeSizes[r-1],this.codeStartPos[r]=n;return n}getSectionFromProgramCounter(e){const t=this.codeSizes.length-1,n=this.getCodePosition(t)+this.codeSizes[t];if(e<0||e>n)throw(0,r.mQ1)("program counter out of bounds");this.codeStartPos.length<this.codeSizes.length&&this.getCodePosition(this.codeSizes.length-1);for(let r=0;r<this.codeSizes.length;r++)if(e<this.codeStartPos[r]+this.codeSizes[r])return r;throw(0,r.mQ1)(`Invalid program counter value: ${e}`)}}class Ae{constructor(e,t,n=we,r=!1){const s=new Ce(e),i=[];for(let f=0;f<t.typeSize/4;f++){const e=s.readUint(A),t=s.readUint(S),n=s.readUint16(B);0===f&&(0!==e&&fe(x),128!==t&&fe(N)),e>127&&fe(I,f,e),t>128&&fe(k,f,t),n>1023&&fe(P,f,n),i.push({inputs:e,outputs:t,maxStackHeight:n})}const o=s.getPtr(),a=[];for(const[f,l]of t.codeSizes.entries())try{const e=s.readBytes(l);a.push(e)}catch{fe(R,f)}const c=e.slice(o,s.getPtr()),u=[];for(const[f,l]of t.containerSizes.entries())try{const e=s.readBytes(l);u.push(e)}catch{fe(G,f)}let d;n===_e||r?(d=s.readRemainder(),d.length>t.dataSize&&fe($)):(d=s.readBytes(t.dataSize,O),n===we?s.isAtEnd()||fe($):this.txCallData=s.readRemainder()),this.typeSections=i,this.codeSections=a,this.containerSections=u,this.entireCode=c,this.dataSection=d,this.buffer=e}sections(){return[this.typeSections,this.codeSections,this.dataSection]}size(){return{typeSize:this.typeSections.length,codeSize:this.codeSections.length,dataSize:this.dataSection.length}}sectionSizes(){return[this.typeSections.map((()=>4)),this.codeSections.map((e=>e.length)),this.dataSection.length]}}class Se{constructor(e,t=we,n=!1){this.eofMode=t,this.header=new Ee(e),this.body=new Ae(e.slice(this.header.buffer.length),this.header,t,n),this.buffer=e}}function Ie(e,t,n=me,r=we){const s=new Se(e,r,n===pe),i=ge(s,t,n);for(let o=0;o<s.body.containerSections.length;o++){Ie(s.body.containerSections[o],t,i.get(o))}return s}const ke="EVMError";class xe{constructor(e){this.error=e,this.errorType=ke}}xe.errorMessages={OUT_OF_GAS:"out of gas",CODESTORE_OUT_OF_GAS:"code store out of gas",CODESIZE_EXCEEDS_MAXIMUM:"code size to deposit exceeds maximum code size",STACK_UNDERFLOW:"stack underflow",STACK_OVERFLOW:"stack overflow",INVALID_JUMP:"invalid JUMP",INVALID_OPCODE:"invalid opcode",OUT_OF_RANGE:"value out of range",REVERT:"revert",STATIC_STATE_CHANGE:"static state change",INTERNAL_ERROR:"internal error",CREATE_COLLISION:"create collision",STOP:"stop",REFUND_EXHAUSTED:"refund exhausted",VALUE_OVERFLOW:"value overflow",INSUFFICIENT_BALANCE:"insufficient balance",INVALID_BYTECODE_RESULT:"invalid bytecode deployed",INITCODE_SIZE_VIOLATION:"initcode exceeds max initcode size",INVALID_INPUT_LENGTH:"invalid input length",INVALID_EOF_FORMAT:"invalid EOF format",BLS_12_381_INVALID_INPUT_LENGTH:"invalid input length",BLS_12_381_POINT_NOT_ON_CURVE:"point not on curve",BLS_12_381_INPUT_EMPTY:"input is empty",BLS_12_381_FP_NOT_IN_FIELD:"fp point not in field",BN254_FP_NOT_IN_FIELD:"fp point not in field",INVALID_COMMITMENT:"kzg commitment does not match versioned hash",INVALID_INPUTS:"kzg inputs invalid",INVALID_PROOF:"kzg proof invalid"};var Ne=n(22772),Be=n(68261),Pe=n(27429),Ue=n(51329);const Re=new Uint8Array([s,0]),Oe=(0,Ue.So)(Re);function Ge(e){const t=e.subarray(0,Re.length);return(0,r.NDp)(Re,t)}class Te{constructor(e){this.runTime=0,this.tag=e,this.startTime=performance.now()}pause(){this.runTime=this.runTime+performance.now()-this.startTime}unpause(){this.startTime=performance.now()}time(){return(performance.now()-this.startTime+this.runTime)/1e3}}class Le{constructor(){this.clear()}clear(){this.opcodes={},this.precompiles={}}getLogs(){function e(e){const t=[];for(const n in e){const r=e[n],s=r.gasUsed/r.time,i={calls:r.calls,totalTime:Math.round(1e6*r.time)/1e3,avgTimePerCall:Math.round(r.time/r.calls*1e6)/1e3,gasUsed:r.gasUsed,millionGasPerSecond:Math.round(s/1e3)/1e3,blocksPerSlot:Math.round(s/25e5*1e3)/1e3,tag:n};void 0!==r.dynamicGasUsed&&(i.staticGas=r.staticGas,i.staticGasUsed=r.staticGas*r.calls,i.dynamicGasUsed=r.dynamicGasUsed),t.push(i)}return t.sort(((e,t)=>t.millionGasPerSecond-e.millionGasPerSecond)),t}return{opcodes:e(this.opcodes),precompiles:e(this.precompiles)}}hasTimer(){return void 0!==this.currentTimer}startTimer(e){if(void 0!==this.currentTimer)throw(0,r.mQ1)("Cannot have two timers running at the same time");return this.currentTimer=new Te(e),this.currentTimer}pauseTimer(){const e=this.currentTimer;if(void 0===e)throw(0,r.mQ1)("No timer to pause");return e.pause(),this.currentTimer=void 0,e}unpauseTimer(e){if(void 0!==this.currentTimer)throw(0,r.mQ1)("Cannot unpause timer: another timer is already running");e.unpause(),this.currentTimer=e}stopTimer(e,t,n="opcodes",s,i){if(void 0===this.currentTimer||this.currentTimer!==e)throw(0,r.mQ1)("Cannot stop timer: another timer is already running");const o=e.time(),a=e.tag;this.currentTimer=void 0;const c=this[n];void 0===c[a]&&(c[a]={calls:0,time:0,gasUsed:0});const u=c[a];u.calls++,u.time+=o,u.gasUsed+=t,"opcodes"===n&&(u.staticGas=s,u.dynamicGasUsed=(u.dynamicGasUsed??0)+i)}}const Fe=8192;class De{constructor(){this._store=new Uint8Array(Fe)}extend(e,t){if(0===t)return;const n=((e,t)=>{const n=e%t;return 0===n?e:e+t-n})(e+t,32)-this._store.length;if(n>0){const e=Math.ceil(n/Fe)*Fe;this._store=(0,r.Idy)(this._store,new Uint8Array(e))}}write(e,t,n){if(0!==t){if(this.extend(e,t),n.length!==t)throw(0,r.mQ1)("Invalid value size");if(e+t>this._store.length)throw(0,r.mQ1)("Value exceeds memory capacity");this._store.set(n,e)}}read(e,t,n){this.extend(e,t);const r=this._store.subarray(e,e+t);if(!0===n)return r;const s=new Uint8Array(t);return s.set(r),s}}const Me={value:r.ZUg,caller:(0,r.hMq)(),data:new Uint8Array(0),depth:0,isStatic:!1,isCompiled:!1,delegatecall:!1,gasRefund:r.ZUg};class He{constructor(e){if(this.to=e.to,this.value=e.value??Me.value,this.caller=e.caller??Me.caller,this.gasLimit=e.gasLimit,this.data=e.data??Me.data,this.eofCallData=e.eofCallData,this.depth=e.depth??Me.depth,this.code=e.code,this._codeAddress=e.codeAddress,this.isStatic=e.isStatic??Me.isStatic,this.isCompiled=e.isCompiled??Me.isCompiled,this.salt=e.salt,this.selfdestruct=e.selfdestruct,this.createdAddresses=e.createdAddresses,this.delegatecall=e.delegatecall??Me.delegatecall,this.gasRefund=e.gasRefund??Me.gasRefund,this.blobVersionedHashes=e.blobVersionedHashes,this.accessWitness=e.accessWitness,this.value<0)throw(0,r.mQ1)(`value field cannot be negative, received ${this.value}`)}get codeAddress(){const e=this._codeAddress??this.to;if(!e)throw(0,r.mQ1)("Missing codeAddress");return e}}const $e=(r.exu<<r._4Z)-r.exu;function Ze(e,t){let n=e%t;return n<r.ZUg&&(n=t+n),n}function Ve(e){return BigInt.asIntN(256,e)}function We(e){return BigInt.asUintN(256,e)}const je=BigInt(1157920892373162e62);function qe(e){const t=e&$e;return(0,r.i8i)(t)}function ze(e){return(0,r.NDp)(e,new Uint8Array(e.length))?new Uint8Array(0):(0,r.cgR)(e,32)}function Qe(e){throw new xe(e)}function Ke(e){const t=e.interpreter._evm.common.customCrypto.keccak256??Ue.So;return`${(0,r.MyA)(t(e.interpreter.getCode()))}/${e.interpreter.getAddress().toString()}:${e.programCounter-1}`}function Ye(e,t){const n=e/t;return Ze(e,t)===r.ZUg?n:n<r.ZUg?n-r.exu:n+r.exu}function Je(e,t,n){const s=BigInt(e.length);t>s&&(t=s);let i=t+n;return i>s&&(i=s),e=e.subarray(Number(t),Number(i)),e=(0,r.rs2)(e,Number(n))}function Xe(e,t){switch(t){case"LOG":t+=e-160;break;case"PUSH":t+=e-95;break;case"DUP":t+=e-127;break;case"SWAP":t+=e-143}return t}function et(e,t){return 1===e.validJumps[t]}function tt(e,t,n,s){if(s.gteHardfork(Ne.sr.TangerineWhistle)){const n=t-t/r.hyx;return e>n?n:e}return e}function nt(e,t,n,s){if(n===r.ZUg)return r.ZUg;const i=Ye(t+n,r.ES$);if(i<=e.memoryWordCount)return r.ZUg;const o=i;let a=o*s.param("memoryGas")+o*o/s.param("quadCoefficientDivGas");if(a>e.highestMemCost){const t=e.highestMemCost;e.highestMemCost=a,a-=t}return e.memoryWordCount=i,a}function rt(e,t,n){const s=e.interpreter.getReturnData();if(s.length>0){const i=Number(t);let o=Number(n);BigInt(s.length)<o&&(o=s.length);const a=Je(s,r.ZUg,BigInt(o));e.memory.extend(i,o),e.memory.write(i,o,a)}}const st=new Map([[0,function(){Qe(xe.errorMessages.STOP)}],[1,function(e){const[t,n]=e.stack.popN(2),s=Ze(t+n,r.nT$);e.stack.push(s)}],[2,function(e){const[t,n]=e.stack.popN(2),s=Ze(t*n,r.nT$);e.stack.push(s)}],[3,function(e){const[t,n]=e.stack.popN(2),s=Ze(t-n,r.nT$);e.stack.push(s)}],[4,function(e){const[t,n]=e.stack.popN(2);let s;s=n===r.ZUg?r.ZUg:Ze(t/n,r.nT$),e.stack.push(s)}],[5,function(e){const[t,n]=e.stack.popN(2);let s;s=n===r.ZUg?r.ZUg:We(Ve(t)/Ve(n)),e.stack.push(s)}],[6,function(e){const[t,n]=e.stack.popN(2);let s;s=n===r.ZUg?n:Ze(t,n),e.stack.push(s)}],[7,function(e){const[t,n]=e.stack.popN(2);let s;s=n===r.ZUg?n:Ve(t)%Ve(n),e.stack.push(We(s))}],[8,function(e){const[t,n,s]=e.stack.popN(3);let i;i=s===r.ZUg?r.ZUg:Ze(t+n,s),e.stack.push(i)}],[9,function(e){const[t,n,s]=e.stack.popN(3);let i;i=s===r.ZUg?r.ZUg:Ze(t*n,s),e.stack.push(i)}],[10,function(e){const[t,n]=e.stack.popN(2);if(t===r.l$H)switch(n){case r.OkS:return void e.stack.push(r.$z4);case r._4Z:return void e.stack.push(r.N7g);case r.JaW:return void e.stack.push(r.Y2o)}if(n===r.ZUg)return void e.stack.push(r.exu);if(t===r.ZUg)return void e.stack.push(t);const s=function(e,t){let n=r.exu;for(;t>r.ZUg;)t%r.l$H!==r.ZUg&&(n=n*e%je),e=e*e%je,t/=r.l$H;return n}(t,n);e.stack.push(s)}],[11,function(e){let[t,n]=e.stack.popN(2);if(t<r.xPH){const e=t*r.loQ+r.eMC,s=(r.exu<<e)-r.exu;n>>e&r.exu?n|=BigInt.asUintN(256,~s):n&=s}e.stack.push(n)}],[16,function(e){const[t,n]=e.stack.popN(2),s=t<n?r.exu:r.ZUg;e.stack.push(s)}],[17,function(e){const[t,n]=e.stack.popN(2),s=t>n?r.exu:r.ZUg;e.stack.push(s)}],[18,function(e){const[t,n]=e.stack.popN(2),s=Ve(t)<Ve(n)?r.exu:r.ZUg;e.stack.push(s)}],[19,function(e){const[t,n]=e.stack.popN(2),s=Ve(t)>Ve(n)?r.exu:r.ZUg;e.stack.push(s)}],[20,function(e){const[t,n]=e.stack.popN(2),s=t===n?r.exu:r.ZUg;e.stack.push(s)}],[21,function(e){const t=e.stack.pop()===r.ZUg?r.exu:r.ZUg;e.stack.push(t)}],[22,function(e){const[t,n]=e.stack.popN(2),r=t&n;e.stack.push(r)}],[23,function(e){const[t,n]=e.stack.popN(2),r=t|n;e.stack.push(r)}],[24,function(e){const[t,n]=e.stack.popN(2),r=t^n;e.stack.push(r)}],[25,function(e){const t=e.stack.pop(),n=BigInt.asUintN(256,~t);e.stack.push(n)}],[26,function(e){const[t,n]=e.stack.popN(2);if(t>r.ES$)return void e.stack.push(r.ZUg);const s=n>>(r.xPH-t)*r.loQ&r.fjF;e.stack.push(s)}],[27,function(e){const[t,n]=e.stack.popN(2);if(t>r.Abi)return void e.stack.push(r.ZUg);const s=n<<t&r.Sbr;e.stack.push(s)}],[28,function(e){const[t,n]=e.stack.popN(2);if(t>256)return void e.stack.push(r.ZUg);const s=n>>t;e.stack.push(s)}],[29,function(e){const[t,n]=e.stack.popN(2);let s;const i=BigInt.asIntN(256,n)<0;if(t>256)return s=i?r.Sbr:r.ZUg,void e.stack.push(s);const o=n>>t;if(i){const e=r.fjF-t;s=o|r.Sbr>>e<<e}else s=o;e.stack.push(s)}],[30,function(e){const t=e.stack.pop();if(t===r.ZUg)return void e.stack.push(r.Abi);const n=256-t.toString(2).length;e.stack.push(BigInt(n))}],[32,function(e,t){const[n,s]=e.stack.popN(2);let i=new Uint8Array(0);s!==r.ZUg&&(i=e.memory.read(Number(n),Number(s)));const o=BigInt((0,r.MyA)((t.customCrypto.keccak256??Ue.So)(i)));e.stack.push(o)}],[48,function(e){const t=(0,r.U8W)(e.interpreter.getAddress().bytes);e.stack.push(t)}],[49,async function(e){const t=qe(e.stack.pop()),n=await e.interpreter.getExternalBalance(t);e.stack.push(n)}],[50,function(e){e.stack.push(e.interpreter.getTxOrigin())}],[51,function(e){e.stack.push(e.interpreter.getCaller())}],[52,function(e){e.stack.push(e.interpreter.getCallValue())}],[53,function(e){const t=e.stack.pop();if(t>e.interpreter.getCallDataSize())return void e.stack.push(r.ZUg);const n=Number(t);let s=e.interpreter.getCallData().subarray(n,n+32);s=s.length?s:Uint8Array.from([0]);let i=(0,r.U8W)(s);s.length<32&&(i<<=r.loQ*BigInt(32-s.length)),e.stack.push(i)}],[54,function(e){const t=e.interpreter.getCallDataSize();e.stack.push(t)}],[55,function(e){const[t,n,s]=e.stack.popN(3);if(s!==r.ZUg){const r=Je(e.interpreter.getCallData(),n,s),i=Number(t),o=Number(s);e.memory.write(i,o,r)}}],[56,function(e){e.stack.push(e.interpreter.getCodeSize())}],[57,function(e){const[t,n,s]=e.stack.popN(3);if(s!==r.ZUg){const r=Je(e.interpreter.getCode(),n,s),i=Number(t),o=Number(s);e.memory.write(i,o,r)}}],[59,async function(e){const t=qe(e.stack.pop()),n=await e.stateManager.getCode(t);if(Ge(n))return void e.stack.push(BigInt(Re.length));const r=BigInt(n.length);e.stack.push(r)}],[60,async function(e){const[t,n,s,i]=e.stack.popN(4);if(i!==r.ZUg){const r=qe(t);let o=await e.stateManager.getCode(r);Ge(o)&&(o=Re);const a=Je(o,s,i),c=Number(n),u=Number(i);e.memory.write(c,u,a)}}],[63,async function(e){const t=qe(e.stack.pop());if(Ge(await e.stateManager.getCode(t)))return void e.stack.push((0,r.U8W)(Oe));const n=await e.stateManager.getAccount(t);n&&!n.isEmpty()?e.stack.push(BigInt((0,r.MyA)(n.codeHash))):e.stack.push(r.ZUg)}],[61,function(e){e.stack.push(e.interpreter.getReturnDataSize())}],[62,function(e){const[t,n,s]=e.stack.popN(3);if(s!==r.ZUg){const r=Je(e.interpreter.getReturnData(),n,s),i=Number(t),o=Number(s);e.memory.write(i,o,r)}}],[58,function(e){e.stack.push(e.interpreter.getTxGasPrice())}],[64,async function(e,t){const n=e.stack.pop();if(t.isActivatedEIP(7709)){if(n>=e.interpreter.getBlockNumber())return void e.stack.push(r.ZUg);const s=e.interpreter.getBlockNumber()-n;if(s>r.Abi||s<=r.ZUg)return void e.stack.push(r.ZUg);const i=new r.pVw((0,r.wTE)(t.param("historyStorageAddress"))),o=t.param("historyServeWindow"),a=(0,r.cgR)((0,r.CZI)(n%o),32);if(t.isActivatedEIP(6800)||t.isActivatedEIP(7864)){const t=e.env.accessWitness.readAccountStorage(i,n);e.interpreter.useGas(t,"BLOCKHASH")}const c=await e.stateManager.getStorage(i,a);e.stack.push((0,r.U8W)(c))}else{const t=e.interpreter.getBlockNumber()-n;if(t>r.Abi||t<=r.ZUg)return void e.stack.push(r.ZUg);const s=await e.blockchain.getBlock(Number(n));e.stack.push((0,r.U8W)(s.hash()))}}],[65,function(e){e.stack.push(e.interpreter.getBlockCoinbase())}],[66,function(e){e.stack.push(e.interpreter.getBlockTimestamp())}],[67,function(e){e.stack.push(e.interpreter.getBlockNumber())}],[68,function(e,t){t.isActivatedEIP(4399)?e.stack.push(e.interpreter.getBlockPrevRandao()):e.stack.push(e.interpreter.getBlockDifficulty())}],[69,function(e){e.stack.push(e.interpreter.getBlockGasLimit())}],[70,function(e){e.stack.push(e.interpreter.getChainId())}],[71,function(e){e.stack.push(e.interpreter.getSelfBalance())}],[72,function(e){e.stack.push(e.interpreter.getBlockBaseFee())}],[73,function(e){const t=e.stack.pop();e.env.blobVersionedHashes.length>Number(t)?e.stack.push(BigInt(e.env.blobVersionedHashes[Number(t)])):e.stack.push(r.ZUg)}],[74,function(e){e.stack.push(e.interpreter.getBlobBaseFee())}],[80,function(e){e.stack.pop()}],[81,function(e){const t=e.stack.pop(),n=e.memory.read(Number(t),32,!0);e.stack.push((0,r.U8W)(n))}],[82,function(e){const[t,n]=e.stack.popN(2),s=(0,r.cgR)((0,r.CZI)(n),32),i=Number(t);e.memory.write(i,32,s)}],[83,function(e){const[t,n]=e.stack.popN(2),s=(0,r.CZI)(n&r.fjF),i=Number(t);e.memory.write(i,1,s)}],[84,async function(e){const t=e.stack.pop(),n=(0,r.cgR)((0,r.CZI)(t),32),s=await e.interpreter.storageLoad(n),i=s.length?(0,r.U8W)(s):r.ZUg;e.stack.push(i)}],[85,async function(e){const[t,n]=e.stack.popN(2),s=(0,r.cgR)((0,r.CZI)(t),32);let i;i=n===r.ZUg?Uint8Array.from([]):(0,r.CZI)(n),await e.interpreter.storageStore(s,i)}],[86,function(e){const t=e.stack.pop();t>e.interpreter.getCodeSize()&&Qe(xe.errorMessages.INVALID_JUMP+" at "+Ke(e));const n=Number(t);et(e,n)||Qe(xe.errorMessages.INVALID_JUMP+" at "+Ke(e)),e.programCounter=n}],[87,function(e){const[t,n]=e.stack.popN(2);if(n!==r.ZUg){t>e.interpreter.getCodeSize()&&Qe(xe.errorMessages.INVALID_JUMP+" at "+Ke(e));const n=Number(t);et(e,n)||Qe(xe.errorMessages.INVALID_JUMP+" at "+Ke(e)),e.programCounter=n}}],[88,function(e){e.stack.push(BigInt(e.programCounter-1))}],[89,function(e){e.stack.push(e.memoryWordCount*r.ES$)}],[90,function(e){e.stack.push(e.interpreter.getGasLeft())}],[91,function(){}],[92,function(e){const t=e.stack.pop(),n=(0,r.cgR)((0,r.CZI)(t),32),s=e.interpreter.transientStorageLoad(n),i=s.length?(0,r.U8W)(s):r.ZUg;e.stack.push(i)}],[93,function(e){e.interpreter.isStatic()&&Qe(xe.errorMessages.STATIC_STATE_CHANGE);const[t,n]=e.stack.popN(2),s=(0,r.cgR)((0,r.CZI)(t),32);let i;i=n===r.ZUg?Uint8Array.from([]):(0,r.CZI)(n),e.interpreter.transientStorageStore(s,i)}],[94,function(e){const[t,n,r]=e.stack.popN(3),s=e.memory.read(Number(n),Number(r),!0);e.memory.write(Number(t),Number(r),s)}],[95,function(e){e.stack.push(r.ZUg)}],[96,function(e,t){const n=e.opCode-95;if((t.isActivatedEIP(6800)||t.isActivatedEIP(7864))&&!0===e.env.chargeCodeAccesses){const t=e.interpreter.getAddress(),r=Math.min(e.code.length,e.programCounter+1),s=Math.min(e.code.length,r+n-1),i=e.env.accessWitness.readAccountCodeChunks(t,r,s);e.interpreter.useGas(i,"PUSH")}if(e.shouldDoJumpAnalysis){let t=e.code.subarray(e.programCounter,e.programCounter+n);t.length<n&&(t=(0,r.rs2)(t,n)),e.programCounter+=n,e.stack.push((0,r.U8W)(t))}else e.stack.push(e.cachedPushes[e.programCounter]),e.programCounter+=n}],[128,function(e){const t=e.opCode-127;e.stack.dup(t)}],[144,function(e){const t=e.opCode-143;e.stack.swap(t)}],[160,function(e){const[t,n]=e.stack.popN(2),s=e.opCode-160,i=e.stack.popN(s).map((function(e){return(0,r.cgR)((0,r.CZI)(e),32)}));let o=new Uint8Array(0);n!==r.ZUg&&(o=e.memory.read(Number(t),Number(n))),e.interpreter.log(o,s,i)}],[208,function(e){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const t=e.stack.pop();if(t>e.env.eof.container.body.dataSection.length)return void e.stack.push(r.ZUg);const n=Number(t);let s=e.env.eof.container.body.dataSection.subarray(n,n+32);s=s.length?s:Uint8Array.from([0]);let i=(0,r.U8W)(s);s.length<32&&(i<<=r.loQ*BigInt(32-s.length)),e.stack.push(i)}],[209,function(e){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const t=Number((0,r.U8W)(e.code.subarray(e.programCounter,e.programCounter+2))),n=(0,r.U8W)(e.env.eof.container.body.dataSection.subarray(t,t+32));e.stack.push(n),e.programCounter+=2}],[210,function(e){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE),e.stack.push(BigInt(e.env.eof.container.body.dataSection.length))}],[211,function(e){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const[t,n,s]=e.stack.popN(3);if(s!==r.ZUg){const r=Je(e.env.eof.container.body.dataSection,n,s),i=Number(t),o=Number(s);e.memory.write(i,o,r)}}],[224,function(e){if(void 0===e.env.eof)Qe(xe.errorMessages.INVALID_OPCODE);else{const t=e.env.code,n=new DataView(t.buffer).getInt16(e.programCounter);e.programCounter+=2+n}}],[225,function(e){if(void 0===e.env.eof)Qe(xe.errorMessages.INVALID_OPCODE);else{if(e.stack.pop()>0){const t=e.env.code,n=new DataView(t.buffer).getInt16(e.programCounter);e.programCounter+=n}e.programCounter+=2}}],[226,function(e){if(void 0===e.env.eof)Qe(xe.errorMessages.INVALID_OPCODE);else{const t=e.env.code,n=t[e.programCounter],r=2*(n+1);e.programCounter+=1;const s=e.stack.pop();if(s<=n){const n=new DataView(t.buffer).getInt16(e.programCounter+2*Number(s));e.programCounter+=r+n}else e.programCounter+=r}}],[227,function(e){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const t=(0,r.Iy3)(e.code.slice(e.programCounter,e.programCounter+2)),n=e.stack.length,s=e.env.eof.container.body.typeSections[t];n>1024-s.maxStackHeight+s.inputs&&Qe(ie),e.env.eof.eofRunState.returnStack.length>=1024&&Qe(ce),e.env.eof?.eofRunState.returnStack.push(e.programCounter+2),e.programCounter=e.env.eof.container.header.getCodePosition(t)}],[228,function(e){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const t=e.env.eof.eofRunState.returnStack.pop();void 0===t&&Qe(ae),e.programCounter=t}],[229,function(e){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const t=(0,r.Iy3)(e.code.slice(e.programCounter,e.programCounter+2)),n=e.stack.length,s=e.env.eof.container.body.typeSections[t];n>1024-s.maxStackHeight+s.inputs&&Qe(ie),e.programCounter=e.env.eof.container.header.getCodePosition(t)}],[230,function(e){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const t=Number((0,r.U8W)(e.code.subarray(e.programCounter,e.programCounter+1)))+1;e.stack.dup(t),e.programCounter++}],[231,function(e){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const t=Number((0,r.U8W)(e.code.subarray(e.programCounter,e.programCounter+1)))+1;e.stack.swap(t),e.programCounter++}],[232,function(e){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const t=Number((0,r.U8W)(e.code.subarray(e.programCounter,e.programCounter+1))),n=1+(t>>4),s=1+(15&t);e.stack.exchange(n,n+s),e.programCounter++}],[236,async function(e){if(void 0===e.env.eof)Qe(xe.errorMessages.INVALID_OPCODE);else{e.interpreter.isStatic()&&Qe(xe.errorMessages.STATIC_STATE_CHANGE);const t=e.env.code[e.programCounter],n=e.env.eof.container.body.containerSections[t],[s,i,o,a]=e.stack.popN(4),c=e.messageGasLimit;e.messageGasLimit=void 0;let u=new Uint8Array(0);a!==r.ZUg&&(u=e.memory.read(Number(o),Number(a),!0)),e.programCounter++;const d=await e.interpreter.eofcreate(c,s,n,(0,r.cgR)((0,r.CZI)(i),32),u);e.stack.push(d)}}],[238,async function(e){if(void 0===e.env.eof)Qe(xe.errorMessages.INVALID_OPCODE);else{const t=e.env.code[e.programCounter],n=e.env.eof.container.body.containerSections[t],s=new Se(n,_e),[i,o]=e.stack.popN(2);let a=new Uint8Array(0);o!==r.ZUg&&(a=e.memory.read(Number(i),Number(o)));const c=s.header.dataSize,u=s.body.dataSection.length+Number(o);u<c&&Qe(de),u>65535&&Qe(xe.errorMessages.OUT_OF_GAS);const d=(0,r.cgR)((0,r.CZI)(BigInt(u)),2),f=s.header.dataSizePtr;n[f]=d[0],n[f+1]=d[1];const l=(0,r.Idy)(n,a);e.interpreter.finish(l)}}],[240,async function(e,t){const[n,s,i]=e.stack.popN(3);t.isActivatedEIP(3860)&&i>Number(t.param("maxInitCodeSize"))&&!e.interpreter._evm.allowUnlimitedInitCodeSize&&Qe(xe.errorMessages.INITCODE_SIZE_VIOLATION);const o=e.messageGasLimit;e.messageGasLimit=void 0;let a=new Uint8Array(0);if(i!==r.ZUg&&(a=e.memory.read(Number(s),Number(i),!0)),Ge(a))return void e.stack.push(r.ZUg);const c=await e.interpreter.create(o,n,a);e.stack.push(c)}],[245,async function(e,t){e.interpreter.isStatic()&&Qe(xe.errorMessages.STATIC_STATE_CHANGE);const[n,s,i,o]=e.stack.popN(4);t.isActivatedEIP(3860)&&i>Number(t.param("maxInitCodeSize"))&&!e.interpreter._evm.allowUnlimitedInitCodeSize&&Qe(xe.errorMessages.INITCODE_SIZE_VIOLATION);const a=e.messageGasLimit;e.messageGasLimit=void 0;let c=new Uint8Array(0);if(i!==r.ZUg&&(c=e.memory.read(Number(s),Number(i),!0)),Ge(c))return void e.stack.push(r.ZUg);const u=await e.interpreter.create2(a,n,c,(0,r.cgR)((0,r.CZI)(o),32));e.stack.push(u)}],[241,async function(e,t){const[n,s,i,o,a,c,u]=e.stack.popN(7),d=qe(s);let f=new Uint8Array(0);a!==r.ZUg&&(f=e.memory.read(Number(o),Number(a),!0));let l=e.messageGasLimit;if(i!==r.ZUg){const n=t.param("callStipendGas");e.interpreter.addStipend(n),l+=n}e.messageGasLimit=void 0;const h=await e.interpreter.call(l,d,i,f);rt(e,c,u),e.stack.push(h)}],[242,async function(e,t){const[n,s,i,o,a,c,u]=e.stack.popN(7),d=qe(s);let f=e.messageGasLimit;if(i!==r.ZUg){const n=t.param("callStipendGas");e.interpreter.addStipend(n),f+=n}e.messageGasLimit=void 0;let l=new Uint8Array(0);a!==r.ZUg&&(l=e.memory.read(Number(o),Number(a),!0));const h=await e.interpreter.callCode(f,d,i,l);rt(e,c,u),e.stack.push(h)}],[244,async function(e){const t=e.interpreter.getCallValue(),[n,s,i,o,a,c]=e.stack.popN(6),u=qe(s);let d=new Uint8Array(0);o!==r.ZUg&&(d=e.memory.read(Number(i),Number(o),!0));const f=e.messageGasLimit;e.messageGasLimit=void 0;const l=await e.interpreter.callDelegate(f,u,t,d);rt(e,a,c),e.stack.push(l)}],[247,function(e){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const t=e.stack.pop();if(t>e.interpreter.getReturnDataSize())return void e.stack.push(r.ZUg);const n=Number(t);let s=e.interpreter.getReturnData().subarray(n,n+32);s=s.length?s:Uint8Array.from([0]);let i=(0,r.U8W)(s);s.length<32&&(i<<=r.loQ*BigInt(32-s.length)),e.stack.push(i)}],[248,async function(e){if(void 0===e.env.eof)Qe(xe.errorMessages.INVALID_OPCODE);else{const[t,n,s,i]=e.stack.popN(4),o=e.messageGasLimit;if(e.messageGasLimit=void 0,o===-r.exu)return e.stack.push(r.exu),void(e.returnBytes=new Uint8Array(0));const a=qe(t);let c=new Uint8Array(0);s!==r.ZUg&&(c=e.memory.read(Number(n),Number(s),!0));const u=await e.interpreter.call(o,a,i,c);e.stack.push(u)}}],[249,async function(e){if(void 0===e.env.eof)Qe(xe.errorMessages.INVALID_OPCODE);else{const t=e.interpreter.getCallValue(),[n,s,i]=e.stack.popN(3),o=e.messageGasLimit;if(e.messageGasLimit=void 0,o===-r.exu)return e.stack.push(r.exu),void(e.returnBytes=new Uint8Array(0));const a=qe(n);if(!Ge(await e.stateManager.getCode(a)))return e.stack.push(r.exu),void(e.returnBytes=new Uint8Array(0));let c=new Uint8Array(0);i!==r.ZUg&&(c=e.memory.read(Number(s),Number(i),!0));const u=await e.interpreter.callDelegate(o,a,t,c);e.stack.push(u)}}],[250,async function(e){const t=r.ZUg,[n,s,i,o,a,c]=e.stack.popN(6),u=qe(s),d=e.messageGasLimit;e.messageGasLimit=void 0;let f=new Uint8Array(0);o!==r.ZUg&&(f=e.memory.read(Number(i),Number(o),!0));const l=await e.interpreter.callStatic(d,u,t,f);rt(e,a,c),e.stack.push(l)}],[251,async function(e){if(void 0===e.env.eof)Qe(xe.errorMessages.INVALID_OPCODE);else{const t=r.ZUg,[n,s,i]=e.stack.popN(3),o=e.messageGasLimit;if(e.messageGasLimit=void 0,o===-r.exu)return e.stack.push(r.exu),void(e.returnBytes=new Uint8Array(0));const a=qe(n);let c=new Uint8Array(0);i!==r.ZUg&&(c=e.memory.read(Number(s),Number(i),!0));const u=await e.interpreter.callStatic(o,a,t,c);e.stack.push(u)}}],[243,function(e){const[t,n]=e.stack.popN(2);let s=new Uint8Array(0);n!==r.ZUg&&(s=e.memory.read(Number(t),Number(n))),e.interpreter.finish(s)}],[253,function(e){const[t,n]=e.stack.popN(2);let s=new Uint8Array(0);n!==r.ZUg&&(s=e.memory.read(Number(t),Number(n))),e.interpreter.revert(s)}],[255,async function(e){const t=qe(e.stack.pop());return e.interpreter.selfDestruct(t)}]]),it=st.get(96);for(let oo=97;oo<=127;oo++)st.set(oo,it);const ot=st.get(128);for(let oo=129;oo<=143;oo++)st.set(oo,ot);const at=st.get(144);for(let oo=145;oo<=159;oo++)st.set(oo,at);const ct=st.get(160);for(let oo=161;oo<=164;oo++)st.set(oo,ct);const ut=new Uint8Array([239,1,0]);function dt(e,t,n,s=!0,i=!1){if(!n.isActivatedEIP(2929))return r.ZUg;if(e.interpreter.journal.isWarmedAddress(t)){if(s&&!i)return n.param("warmstoragereadGas")}else{if(e.interpreter.journal.addWarmedAddress(t),s&&!n.isActivatedEIP(7864))return n.param("coldaccountaccessGas");if(s&&n.isActivatedEIP(7864))return n.param("warmstoragereadGas")}return r.ZUg}function ft(e,t,n,s,i=!0){if(!s.isActivatedEIP(2929))return r.ZUg;const o=e.interpreter.getAddress().bytes;if(!e.interpreter.journal.isWarmedStorage(o,t)){if(e.interpreter.journal.addWarmedStorage(o,t),i&&!s.isActivatedEIP(6800)&&!s.isActivatedEIP(7864))return s.param("coldsloadGas")}else if(i&&(!n||s.isActivatedEIP(6800)||s.isActivatedEIP(7864)))return s.param("warmstoragereadGas");return r.ZUg}function lt(e,t,n,r,s){if(!s.isActivatedEIP(2929))return n;const i=e.interpreter.getAddress().bytes,o=s.param("warmstoragereadGas"),a=s.param("coldsloadGas");if(e.interpreter.journal.isWarmedStorage(i,t))switch(r){case"noop":return o;case"initRefund":return s.param("sstoreInitEIP2200Gas")-o;case"cleanRefund":return s.param("sstoreResetGas")-a-o}return n}const ht=BigInt(2)**BigInt(160)-BigInt(1);async function pt(e,t,n,s){const i=await e.stateManager.getCode(n);return(0,r.NDp)(i.slice(0,3),ut)?dt(e,i.slice(3,24),t,s):r.ZUg}const mt=new Map([[10,async function(e,t,n){const[s,i]=e.stack.peek(2);if(i===r.ZUg)return t;let o=i.toString(2).length/8;o>Math.trunc(o)&&(o=Math.trunc(o)+1),(o<1||o>32)&&Qe(xe.errorMessages.OUT_OF_RANGE);const a=n.param("expByteGas");return t+=BigInt(o)*a}],[32,async function(e,t,n){const[s,i]=e.stack.peek(2);return t+=nt(e,s,i,n),t+=n.param("keccak256WordGas")*Ye(i,r.ES$)}],[49,async function(e,t,n){const s=qe(e.stack.peek()[0]);let i=!0;if(n.isActivatedEIP(6800)||n.isActivatedEIP(7864)){const n=e.env.accessWitness.readAccountBasicData(s);t+=n,i=n===r.ZUg}return n.isActivatedEIP(2929)&&(t+=dt(e,s.bytes,n,i)),t}],[55,async function(e,t,n){const[s,i,o]=e.stack.peek(3);return t+=nt(e,s,o,n),o!==r.ZUg&&(t+=n.param("copyGas")*Ye(o,r.ES$)),t}],[57,async function(e,t,n){const[s,i,o]=e.stack.peek(3);if(t+=nt(e,s,o,n),o!==r.ZUg&&(t+=n.param("copyGas")*Ye(o,r.ES$),(n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&!0===e.env.chargeCodeAccesses)){const n=e.interpreter.getAddress();let r=i+o;const s=e.interpreter.getCodeSize();r>s&&(r=s),t+=e.env.accessWitness.readAccountCodeChunks(n,Number(i),Number(r))}return t}],[59,async function(e,t,n){const s=qe(e.stack.peek()[0]);let i=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&void 0===e.interpreter._evm.getPrecompile(s)&&!s.equals(qe(n.param("systemAddress")))){let n=r.ZUg;n+=e.env.accessWitness.readAccountBasicData(s),t+=n,i=n===r.ZUg}return n.isActivatedEIP(2929)&&(t+=dt(e,s.bytes,n,i)),t}],[60,async function(e,t,n){const[s,i,o,a]=e.stack.peek(4),c=qe(s);t+=nt(e,i,a,n);let u=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&void 0===e.interpreter._evm.getPrecompile(c)&&!c.equals(qe(n.param("systemAddress")))){let n=r.ZUg;n+=e.env.accessWitness.readAccountBasicData(c),t+=n,u=n===r.ZUg}if(n.isActivatedEIP(2929)&&(t+=dt(e,c.bytes,n,u)),a!==r.ZUg&&(t+=n.param("copyGas")*Ye(a,r.ES$),n.isActivatedEIP(6800)||n.isActivatedEIP(7864))){let n=o+a;const r=BigInt((await e.stateManager.getCode(c)).length);n>r&&(n=r),t+=e.env.accessWitness.readAccountCodeChunks(c,Number(o),Number(n))}return t}],[62,async function(e,t,n){const[s,i,o]=e.stack.peek(3);return i+o>e.interpreter.getReturnDataSize()&&void 0===e.env.eof&&Qe(xe.errorMessages.OUT_OF_GAS),t+=nt(e,s,o,n),o!==r.ZUg&&(t+=n.param("copyGas")*Ye(o,r.ES$)),t}],[63,async function(e,t,n){const s=qe(e.stack.peek()[0]);let i=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&void 0===e.interpreter._evm.getPrecompile(s)&&!s.equals(qe(n.param("systemAddress")))){let n=r.ZUg;n+=e.env.accessWitness.readAccountCodeHash(s),t+=n,i=n===r.ZUg}return n.isActivatedEIP(2929)&&(t+=dt(e,s.bytes,n,i)),t}],[81,async function(e,t,n){const s=e.stack.peek()[0];return t+=nt(e,s,r.ES$,n)}],[82,async function(e,t,n){const s=e.stack.peek()[0];return t+=nt(e,s,r.ES$,n)}],[83,async function(e,t,n){const s=e.stack.peek()[0];return t+=nt(e,s,r.exu,n)}],[84,async function(e,t,n){const s=e.stack.peek()[0],i=(0,r.cgR)((0,r.CZI)(s),32);let o=!0;if(n.isActivatedEIP(6800)||n.isActivatedEIP(7864)){const n=e.interpreter.getAddress(),i=e.env.accessWitness.readAccountStorage(n,s);t+=i,o=i===r.ZUg}return n.isActivatedEIP(2929)&&(t+=ft(e,i,!1,n,o)),t}],[85,async function(e,t,n){e.interpreter.isStatic()&&Qe(xe.errorMessages.STATIC_STATE_CHANGE);const[s,i]=e.stack.peek(2),o=(0,r.cgR)((0,r.CZI)(s),32);let a;a=i===r.ZUg?Uint8Array.from([]):(0,r.CZI)(i);const c=ze(await e.interpreter.storageLoad(o)),u=ze(await e.interpreter.storageLoad(o,!0));n.hardfork()===Ne.sr.Constantinople?t+=function(e,t,n,s,i){return(0,r.NDp)(t,s)?i.param("netSstoreNoopGas"):(0,r.NDp)(n,t)?0===n.length?i.param("netSstoreInitGas"):(0===s.length&&e.interpreter.refundGas(i.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund"),i.param("netSstoreCleanGas")):(0!==n.length&&(0===t.length?e.interpreter.subRefund(i.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund"):0===s.length&&e.interpreter.refundGas(i.param("netSstoreClearRefundGas"),"EIP-1283 -> netSstoreClearRefund")),(0,r.NDp)(n,s)&&(0===n.length?e.interpreter.refundGas(i.param("netSstoreResetClearRefundGas"),"EIP-1283 -> netSstoreResetClearRefund"):e.interpreter.refundGas(i.param("netSstoreResetRefundGas"),"EIP-1283 -> netSstoreResetRefund")),i.param("netSstoreDirtyGas"))}(e,c,u,ze(a),n):n.gteHardfork(Ne.sr.Istanbul)?n.isActivatedEIP(6800)||n.isActivatedEIP(7864)||(t+=function(e,t,n,s,i,o){if(e.interpreter.getGasLeft()<=o.param("sstoreSentryEIP2200Gas")&&Qe(xe.errorMessages.OUT_OF_GAS),(0,r.NDp)(t,s))return lt(e,i,o.param("sstoreNoopEIP2200Gas"),"noop",o);if((0,r.NDp)(n,t))return 0===n.length?o.param("sstoreInitEIP2200Gas"):(0===s.length&&e.interpreter.refundGas(o.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200"),o.param("sstoreCleanEIP2200Gas"));if(n.length>0&&(0===t.length?e.interpreter.subRefund(o.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200"):0===s.length&&e.interpreter.refundGas(o.param("sstoreClearRefundEIP2200Gas"),"EIP-2200 -> sstoreClearRefundEIP2200")),(0,r.NDp)(n,s))if(0===n.length){const t=o.param("sstoreInitRefundEIP2200Gas");e.interpreter.refundGas(lt(e,i,t,"initRefund",o),"EIP-2200 -> initRefund")}else{const t=o.param("sstoreCleanRefundEIP2200Gas");e.interpreter.refundGas(BigInt(lt(e,i,t,"cleanRefund",o)),"EIP-2200 -> cleanRefund")}return o.param("sstoreDirtyEIP2200Gas")}(e,c,u,ze(a),o,n)):t+=function(e,t,n,r){if(0===n.length&&0===t.length||n.length>0&&t.length>0)return r.param("sstoreResetGas");if(0===n.length&&t.length>0){const t=r.param("sstoreResetGas");return e.interpreter.refundGas(r.param("sstoreRefundGas"),"updateSstoreGas"),t}return r.param("sstoreSetGas")}(e,c,ze(a),n);let d=!0;if(n.isActivatedEIP(6800)||n.isActivatedEIP(7864)){const n=e.interpreter.getAddress(),i=e.env.accessWitness.writeAccountStorage(n,s);t+=i,d=i===r.ZUg}return n.isActivatedEIP(2929)&&(t+=ft(e,o,!0,n,d)),t}],[94,async function(e,t,n){const[s,i,o]=e.stack.peek(3),a=(o+r.xPH)/r.ES$;return t+=r.eSG*a,t+=nt(e,i,o,n),t+=nt(e,s,o,n)}],[160,async function(e,t,n){e.interpreter.isStatic()&&Qe(xe.errorMessages.STATIC_STATE_CHANGE);const[r,s]=e.stack.peek(2),i=e.opCode-160;return(i<0||i>4)&&Qe(xe.errorMessages.OUT_OF_RANGE),t+=nt(e,r,s,n),t+=n.param("logTopicGas")*BigInt(i)+s*n.param("logDataGas")}],[211,async function(e,t,n){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const[s,i,o]=e.stack.peek(3);return t+=nt(e,s,o,n),o!==r.ZUg&&(t+=n.param("copyGas")*Ye(o,r.ES$)),t}],[236,async function(e,t,n){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const s=e.env.code[e.programCounter+1],[i,o,a,c]=e.stack.peek(4);t+=nt(e,a,c,n);const u=e.env.eof.container.body.containerSections[s];t+=n.param("keccak256WordGas")*Ye(BigInt(u.length),r.ES$);const d=e.interpreter.getGasLeft()-t;return e.messageGasLimit=tt(d,d,0,n),t}],[238,async function(e,t,n){const[r,s]=e.stack.peek(2);return t+=nt(e,r,s,n)}],[240,async function(e,t,n){e.interpreter.isStatic()&&Qe(xe.errorMessages.STATIC_STATE_CHANGE);const[s,i,o]=e.stack.peek(3);n.isActivatedEIP(2929)&&(t+=dt(e,e.interpreter.getAddress().bytes,n,!1)),n.isActivatedEIP(3860)&&(t+=(o+r.xPH)/r.ES$*n.param("initCodeWordGas")),t+=nt(e,i,o,n);let a=BigInt(e.interpreter.getGasLeft())-t;return a=tt(a,a,0,n),e.messageGasLimit=a,t}],[241,async function(e,t,n){const[s,i,o,a,c,u,d]=e.stack.peek(7),f=qe(i);e.interpreter.isStatic()&&o!==r.ZUg&&Qe(xe.errorMessages.STATIC_STATE_CHANGE),t+=nt(e,a,c,n),t+=nt(e,u,d,n);let l=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&void 0===e.interpreter._evm.getPrecompile(f)){const n=e.env.accessWitness.readAccountBasicData(f);if(o!==r.ZUg){const n=e.interpreter.getAddress();t+=e.env.accessWitness.writeAccountBasicData(n),t+=e.env.accessWitness.writeAccountBasicData(f)}t+=n,l=n===r.ZUg}if(n.isActivatedEIP(2929)&&(t+=dt(e,f.bytes,n,l)),n.isActivatedEIP(7702)&&(t+=await pt(e,n,f,l)),o===r.ZUg||n.isActivatedEIP(6800)||n.isActivatedEIP(7864)||(t+=n.param("callValueTransferGas")),n.gteHardfork(Ne.sr.SpuriousDragon)){const s=await e.stateManager.getAccount(f);let i=!1;(void 0===s||s.isEmpty())&&(i=!0),i&&o!==r.ZUg&&(t+=n.param("callNewAccountGas"))}else void 0===await e.stateManager.getAccount(f)&&(t+=n.param("callNewAccountGas"));const h=tt(s,e.interpreter.getGasLeft()-t,0,n);return h>e.interpreter.getGasLeft()-t&&Qe(xe.errorMessages.OUT_OF_GAS),t>e.interpreter.getGasLeft()&&Qe(xe.errorMessages.OUT_OF_GAS),e.messageGasLimit=h,t}],[242,async function(e,t,n){const[s,i,o,a,c,u,d]=e.stack.peek(7),f=qe(i);t+=nt(e,a,c,n),t+=nt(e,u,d,n);let l=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&void 0===e.interpreter._evm.getPrecompile(f)){const n=e.env.accessWitness.readAccountBasicData(f);t+=n,l=n===r.ZUg}n.isActivatedEIP(2929)&&(t+=dt(e,qe(i).bytes,n,l)),n.isActivatedEIP(7702)&&(t+=await pt(e,n,f,l)),o!==r.ZUg&&(t+=n.param("callValueTransferGas"));const h=tt(s,e.interpreter.getGasLeft()-t,0,n);return h>e.interpreter.getGasLeft()-t&&Qe(xe.errorMessages.OUT_OF_GAS),e.messageGasLimit=h,t}],[243,async function(e,t,n){const[r,s]=e.stack.peek(2);return t+=nt(e,r,s,n)}],[244,async function(e,t,n){const[s,i,o,a,c,u]=e.stack.peek(6),d=qe(i);t+=nt(e,o,a,n),t+=nt(e,c,u,n);let f=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&void 0===e.interpreter._evm.getPrecompile(d)){const n=e.env.accessWitness.readAccountBasicData(d);t+=n,f=n===r.ZUg}n.isActivatedEIP(2929)&&(t+=dt(e,qe(i).bytes,n,f)),n.isActivatedEIP(7702)&&(t+=await pt(e,n,d,f));const l=tt(s,e.interpreter.getGasLeft()-t,0,n);return l>e.interpreter.getGasLeft()-t&&Qe(xe.errorMessages.OUT_OF_GAS),e.messageGasLimit=l,t}],[245,async function(e,t,n){e.interpreter.isStatic()&&Qe(xe.errorMessages.STATIC_STATE_CHANGE);const[s,i,o,a]=e.stack.peek(4);t+=nt(e,i,o,n),n.isActivatedEIP(2929)&&(t+=dt(e,e.interpreter.getAddress().bytes,n,!1)),n.isActivatedEIP(3860)&&(t+=(o+r.xPH)/r.ES$*n.param("initCodeWordGas")),t+=n.param("keccak256WordGas")*Ye(o,r.ES$);let c=e.interpreter.getGasLeft()-t;return c=tt(c,c,0,n),e.messageGasLimit=c,t}],[248,async function(e,t,n){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const[s,i,o,a]=e.stack.peek(4);e.interpreter.isStatic()&&a!==r.ZUg&&Qe(xe.errorMessages.STATIC_STATE_CHANGE),a>r.ZUg&&(t+=n.param("callValueTransferGas")),s>ht&&Qe(ue),t+=nt(e,i,o,n);const c=qe(s);if(t+=dt(e,c.bytes,n),a>r.ZUg){const r=await e.stateManager.getAccount(c);(void 0===r||r.isEmpty())&&(t+=n.param("callNewAccountGas"))}const u=n.param("minRetainedGas"),d=n.param("minCalleeGas"),f=e.interpreter.getGasLeft()-t,l=f/r.hyx;let h;return h=l<u?f-u:f-l,(e.env.depth>=Number(n.param("stackLimit"))||e.env.contract.balance<a||h<d)&&(h=-r.exu),e.messageGasLimit=h,t}],[249,async function(e,t,n){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const[s,i,o]=e.stack.peek(3);s>ht&&Qe(ue),t+=nt(e,i,o,n);t+=dt(e,qe(s).bytes,n);const a=n.param("minRetainedGas"),c=n.param("minCalleeGas"),u=e.interpreter.getGasLeft()-t,d=u/r.hyx;let f;return f=d<a?u-a:u-d,(e.env.depth>=Number(n.param("stackLimit"))||f<c)&&(f=-r.exu),e.messageGasLimit=f,t}],[250,async function(e,t,n){const[s,i,o,a,c,u]=e.stack.peek(6);t+=nt(e,o,a,n),t+=nt(e,c,u,n);let d=!0;const f=qe(i);if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&void 0===e.interpreter._evm.getPrecompile(f)){const n=e.env.accessWitness.readAccountBasicData(f);t+=n,d=n===r.ZUg}n.isActivatedEIP(2929)&&(t+=dt(e,qe(i).bytes,n,d)),n.isActivatedEIP(7702)&&(t+=await pt(e,n,qe(i),d));const l=tt(s,e.interpreter.getGasLeft()-t,0,n);return e.messageGasLimit=l,t}],[251,async function(e,t,n){void 0===e.env.eof&&Qe(xe.errorMessages.INVALID_OPCODE);const[s,i,o]=e.stack.peek(3);s>ht&&Qe(ue),t+=nt(e,i,o,n);t+=dt(e,qe(s).bytes,n);const a=n.param("minRetainedGas"),c=n.param("minCalleeGas"),u=e.interpreter.getGasLeft()-t,d=u/r.hyx;let f;return f=d<a?u-a:u-d,(e.env.depth>=Number(n.param("stackLimit"))||f<c)&&(f=-r.exu),e.messageGasLimit=f,t}],[253,async function(e,t,n){const[r,s]=e.stack.peek(2);return t+=nt(e,r,s,n)}],[255,async function(e,t,n){e.interpreter.isStatic()&&Qe(xe.errorMessages.STATIC_STATE_CHANGE);const s=qe(e.stack.peek()[0]),i=e.interpreter.getAddress();let o=!1;const a=await e.interpreter.getExternalBalance(i);if(n.gteHardfork(Ne.sr.SpuriousDragon)){if(a>r.ZUg){const t=await e.stateManager.getAccount(s);(void 0===t||t.isEmpty())&&(o=!0)}}else if(n.gteHardfork(Ne.sr.TangerineWhistle)){void 0!==await e.stateManager.getAccount(s)||(o=!0)}o&&(t+=n.param("callNewAccountGas"));let c=!0;if((n.isActivatedEIP(6800)||n.isActivatedEIP(7864))&&!0===e.env.chargeCodeAccesses){t+=e.env.accessWitness.readAccountBasicData(i),a>r.ZUg&&(t+=e.env.accessWitness.writeAccountBasicData(i));let n=e.env.accessWitness.readAccountBasicData(s);a>r.ZUg&&(n+=e.env.accessWitness.writeAccountBasicData(s)),t+=n,c=n===r.ZUg}return n.isActivatedEIP(2929)&&(t+=dt(e,s.bytes,n,c,!0)),t}]]),gt=mt.get(160);for(let oo=161;oo<=164;oo++)mt.set(oo,gt);class bt{constructor({code:e,name:t,fullName:n,fee:r,isAsync:s,dynamicGas:i}){this.code=e,this.name=t,this.fullName=n,this.fee=r,this.feeBigInt=BigInt(r),this.isAsync=s,this.dynamicGas=i,this.isInvalid="INVALID"===this.name,Object.freeze(this)}}const yt=e=>({name:e,isAsync:!1,dynamicGas:!1}),wt=e=>({name:e,isAsync:!1,dynamicGas:!0}),_t=e=>({name:e,isAsync:!0,dynamicGas:!1}),vt=e=>({name:e,isAsync:!0,dynamicGas:!0}),Ct={0:yt("STOP"),1:yt("ADD"),2:yt("MUL"),3:yt("SUB"),4:yt("DIV"),5:yt("SDIV"),6:yt("MOD"),7:yt("SMOD"),8:yt("ADDMOD"),9:yt("MULMOD"),10:wt("EXP"),11:yt("SIGNEXTEND"),16:yt("LT"),17:yt("GT"),18:yt("SLT"),19:yt("SGT"),20:yt("EQ"),21:yt("ISZERO"),22:yt("AND"),23:yt("OR"),24:yt("XOR"),25:yt("NOT"),26:yt("BYTE"),32:wt("KECCAK256"),48:_t("ADDRESS"),49:vt("BALANCE"),50:_t("ORIGIN"),51:_t("CALLER"),52:_t("CALLVALUE"),53:_t("CALLDATALOAD"),54:_t("CALLDATASIZE"),55:vt("CALLDATACOPY"),56:yt("CODESIZE"),57:wt("CODECOPY"),58:yt("GASPRICE"),59:vt("EXTCODESIZE"),60:vt("EXTCODECOPY"),64:_t("BLOCKHASH"),65:_t("COINBASE"),66:_t("TIMESTAMP"),67:_t("NUMBER"),68:_t("DIFFICULTY"),69:_t("GASLIMIT"),80:yt("POP"),81:wt("MLOAD"),82:wt("MSTORE"),83:wt("MSTORE8"),84:vt("SLOAD"),85:vt("SSTORE"),86:yt("JUMP"),87:yt("JUMPI"),88:yt("PC"),89:yt("MSIZE"),90:yt("GAS"),91:yt("JUMPDEST"),96:yt("PUSH"),97:yt("PUSH"),98:yt("PUSH"),99:yt("PUSH"),100:yt("PUSH"),101:yt("PUSH"),102:yt("PUSH"),103:yt("PUSH"),104:yt("PUSH"),105:yt("PUSH"),106:yt("PUSH"),107:yt("PUSH"),108:yt("PUSH"),109:yt("PUSH"),110:yt("PUSH"),111:yt("PUSH"),112:yt("PUSH"),113:yt("PUSH"),114:yt("PUSH"),115:yt("PUSH"),116:yt("PUSH"),117:yt("PUSH"),118:yt("PUSH"),119:yt("PUSH"),120:yt("PUSH"),121:yt("PUSH"),122:yt("PUSH"),123:yt("PUSH"),124:yt("PUSH"),125:yt("PUSH"),126:yt("PUSH"),127:yt("PUSH"),128:yt("DUP"),129:yt("DUP"),130:yt("DUP"),131:yt("DUP"),132:yt("DUP"),133:yt("DUP"),134:yt("DUP"),135:yt("DUP"),136:yt("DUP"),137:yt("DUP"),138:yt("DUP"),139:yt("DUP"),140:yt("DUP"),141:yt("DUP"),142:yt("DUP"),143:yt("DUP"),144:yt("SWAP"),145:yt("SWAP"),146:yt("SWAP"),147:yt("SWAP"),148:yt("SWAP"),149:yt("SWAP"),150:yt("SWAP"),151:yt("SWAP"),152:yt("SWAP"),153:yt("SWAP"),154:yt("SWAP"),155:yt("SWAP"),156:yt("SWAP"),157:yt("SWAP"),158:yt("SWAP"),159:yt("SWAP"),160:wt("LOG"),161:wt("LOG"),162:wt("LOG"),163:wt("LOG"),164:wt("LOG"),240:vt("CREATE"),241:vt("CALL"),242:vt("CALLCODE"),243:wt("RETURN"),254:yt("INVALID"),255:vt("SELFDESTRUCT")},Et=[{hardfork:Ne.sr.Homestead,opcodes:{244:vt("DELEGATECALL")}},{hardfork:Ne.sr.TangerineWhistle,opcodes:{84:vt("SLOAD"),241:vt("CALL"),242:vt("CALLCODE"),59:vt("EXTCODESIZE"),60:vt("EXTCODECOPY"),244:vt("DELEGATECALL"),255:vt("SELFDESTRUCT"),49:vt("BALANCE")}},{hardfork:Ne.sr.Byzantium,opcodes:{253:wt("REVERT"),250:vt("STATICCALL"),61:_t("RETURNDATASIZE"),62:vt("RETURNDATACOPY")}},{hardfork:Ne.sr.Constantinople,opcodes:{27:yt("SHL"),28:yt("SHR"),29:yt("SAR"),63:vt("EXTCODEHASH"),245:vt("CREATE2")}},{hardfork:Ne.sr.Istanbul,opcodes:{70:yt("CHAINID"),71:yt("SELFBALANCE")}},{hardfork:Ne.sr.Paris,opcodes:{68:_t("PREVRANDAO")}}],At=[{eip:663,opcodes:{230:yt("DUPN"),231:yt("SWAPN"),232:yt("EXCHANGE")}},{eip:1153,opcodes:{92:yt("TLOAD"),93:yt("TSTORE")}},{eip:3198,opcodes:{72:yt("BASEFEE")}},{eip:3855,opcodes:{95:yt("PUSH0")}},{eip:4200,opcodes:{224:yt("RJUMP"),225:yt("RJUMPI"),226:yt("RJUMPV")}},{eip:4750,opcodes:{227:yt("CALLF"),228:yt("RETF")}},{eip:4844,opcodes:{73:yt("BLOBHASH")}},{eip:5656,opcodes:{94:wt("MCOPY")}},{eip:6206,opcodes:{229:yt("JUMPF")}},{eip:7069,opcodes:{247:yt("RETURNDATALOAD"),248:vt("EXTCALL"),249:vt("EXTDELEGATECALL"),251:vt("EXTSTATICCALL")}},{eip:7480,opcodes:{208:yt("DATALOAD"),209:yt("DATALOADN"),210:yt("DATASIZE"),211:wt("DATACOPY")}},{eip:7516,opcodes:{74:yt("BLOBBASEFEE")}},{eip:7620,opcodes:{236:vt("EOFCREATE"),238:vt("RETURNCONTRACT")}},{eip:7939,opcodes:{30:yt("CLZ")}}];function St(e,t){let n={...Ct};const s=new Map(st),i=new Map(mt);for(let r=0;r<Et.length;r++)e.gteHardfork(Et[r].hardfork)&&(n={...n,...Et[r].opcodes});for(const r of At)e.isActivatedEIP(r.eip)&&(n={...n,...r.opcodes});for(const d in n){const t=Number(e.param(`${n[d].name.toLowerCase()}Gas`));if(void 0===t)throw(0,r.mQ1)(`base fee not defined for: ${n[d].name}`);n[d].fee=t}if(t)for(const r of t){const e=r;if(!("opcode"in(o=e)&&"opcodeName"in o&&"baseFee"in o&&"logicFunction"in o)){delete n[e.opcode];continue}const t={[e.opcode]:{name:e.opcodeName,isAsync:!0,dynamicGas:void 0!==e.gasFunction,fee:e.baseFee,feeBigInt:BigInt(e.baseFee)}};n={...n,...t},void 0!==e.gasFunction&&i.set(e.opcode,e.gasFunction),s.set(e.opcode,e.logicFunction)}var o;const a=function(e){const t=new Map;for(const[n,r]of Object.entries(e)){const e=parseInt(n,10);isNaN(r.fee)&&(r.fee=0),t.set(e,new bt({code:e,fullName:Xe(e,r.name),...r}))}return t}(n),c=[];for(const[r,d]of a){const e=i.get(r),t=s.get(r);c[r]={opcodeInfo:d,opHandler:t,gasHandler:e}}const u=c[254];for(let r=0;r<=255;r++)void 0===c[r]&&(c[r]=u);return{dynamicGasHandlers:i,handlers:s,opcodes:a,opcodeMap:c}}class It{constructor(e){this._len=0,this._store=[],this._maxHeight=e??1024}get length(){return this._len}push(e){if(this._len>=this._maxHeight)throw new xe(xe.errorMessages.STACK_OVERFLOW);this._store[this._len++]=e}pop(){if(this._len<1)throw new xe(xe.errorMessages.STACK_UNDERFLOW);return this._store[--this._len]}popN(e=1){if(this._len<e)throw new xe(xe.errorMessages.STACK_UNDERFLOW);if(0===e)return[];const t=Array(e),n=this._store;for(let r=0;r<e;r++)t[r]=n[--this._len];return t}peek(e=1){const t=Array(e);let n=this._len;for(let r=0;r<e;r++){const e=--n;if(e<0)throw new xe(xe.errorMessages.STACK_UNDERFLOW);t[r]=this._store[e]}return t}swap(e){if(this._len<=e)throw new xe(xe.errorMessages.STACK_UNDERFLOW);const t=this._len-1,n=t-e,r=this._store,s=r[t];r[t]=r[n],r[n]=s}dup(e){const t=this._len;if(t<e)throw new xe(xe.errorMessages.STACK_UNDERFLOW);if(t>=this._maxHeight)throw new xe(xe.errorMessages.STACK_OVERFLOW);const n=t-e;this._store[this._len++]=this._store[n]}exchange(e,t){const n=this._len-1,r=n-e,s=n-t;if(r<0||s<0)throw new xe(xe.errorMessages.STACK_UNDERFLOW);const i=this._store[s];this._store[s]=this._store[r],this._store[r]=i}getStack(){return this._store.slice(0,this._len)}}const kt=Be("evm:gas");class xt{constructor(e,t,n,s,i,o,a,c){if(this.opDebuggers={},this._evm=e,this._stateManager=t,this.common=this._evm.common,"poa"===this.common.consensusType()&&void 0===this._evm._optsCached.cliqueSigner)throw(0,r.mQ1)("Must include cliqueSigner function if clique/poa is being used for consensus type");this._runState={programCounter:0,opCode:254,memory:new De,memoryWordCount:r.ZUg,highestMemCost:r.ZUg,stack:new It,code:new Uint8Array(0),validJumps:Uint8Array.from([]),cachedPushes:{},stateManager:this._stateManager,blockchain:n,env:s,shouldDoJumpAnalysis:!0,interpreter:this,gasRefund:s.gasRefund,gasLeft:i,returnBytes:new Uint8Array(0)},this.journal=o,this._env=s,this._result={logs:[],returnValue:void 0,selfdestruct:new Set},this.profilerOpts=c,this.performanceLogger=a}async run(e,t={}){if(this.common.isActivatedEIP(3540)&&e[0]===s){if(this.common.isActivatedEIP(3540)){if(0!==e[1])return{runState:this._runState,exceptionError:new xe(xe.errorMessages.INVALID_BYTECODE_RESULT)};if(1!==e[2])return{runState:this._runState,exceptionError:new xe(xe.errorMessages.INVALID_EOF_FORMAT)};this._runState.code=e;const t=this._env.isCreate&&0===this._env.depth,n=t?ve:we;try{!function(e,t=we){e.env.eof={container:new Se(e.code,t),eofRunState:{returnStack:[]}},void 0!==e.env.eof.container.body.txCallData&&(e.env.callData=e.env.eof.container.body.txCallData);const n=e.env.eof.container.header.getCodePosition(0);e.programCounter=n}(this._runState,n)}catch{return{runState:this._runState,exceptionError:new xe(xe.errorMessages.INVALID_EOF_FORMAT)}}if(t)try{Ie(this._runState.code,this._evm,he,ve)}catch{return{runState:this._runState,exceptionError:new xe(xe.errorMessages.INVALID_EOF_FORMAT)}}}}else this._runState.code=e;this._runState.programCounter=t.pc??this._runState.programCounter;const n=this._runState.programCounter;if(0!==n&&(n<0||n>=this._runState.code.length))throw(0,r.mQ1)("Internal error: program counter not in range");let i,o,a,c,u=!0;for(!0===this.profilerOpts?.enabled&&this.performanceLogger.hasTimer()&&(a=this.performanceLogger.pauseTimer(),c=this.performanceLogger.startTimer("Overhead"));this._runState.programCounter<this._runState.code.length;){const e=this._runState.programCounter;let t,n;if(u){if(t=this._runState.code[e],86===t||87===t||94===t){const{jumps:e,pushes:t,opcodesCached:n}=this._getValidJumpDestinations(this._runState.code);this._runState.validJumps=e,this._runState.cachedPushes=t,this._runState.shouldDoJumpAnalysis=!1,o=n,u=!1}}else n=o[e],t=n.opcodeInfo.code;if(254===t&&this.common.isActivatedEIP(7864)&&!0===this._runState.env.chargeCodeAccesses){const t=this._runState.interpreter.getAddress();if(!await this._runState.stateManager.checkChunkWitnessPresent(t,e))throw Error(`Invalid witness with missing codeChunk for pc=${e}`)}this._runState.opCode=t;try{void 0!==c&&this.performanceLogger.pauseTimer(),await this.runStep(n),void 0!==c&&this.performanceLogger.unpauseTimer(c)}catch(d){if(this._runState.env.accessWitness?.revert(),void 0!==c&&this.performanceLogger.unpauseTimer(c),!("errorType"in d)||d.errorType!==ke)throw d;d.error!==xe.errorMessages.STOP&&(i=d);break}}return void 0!==a&&(this.performanceLogger.stopTimer(c,0),this.performanceLogger.unpauseTimer(a)),{runState:this._runState,exceptionError:i}}async runStep(e){const t=e??this.lookupOpInfo(this._runState.opCode),n=t.opcodeInfo;let r;!0===this.profilerOpts?.enabled&&(r=this.performanceLogger.startTimer(n.name));let s=n.feeBigInt;const i=this._runState.memoryWordCount;try{if(n.dynamicGas&&(s=await t.gasHandler(this._runState,s,this.common)),(this._evm.events.listenerCount("step")>0||this._evm.DEBUG)&&await this._runStepHook(s,this.getGasLeft(),i),(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))&&!0===this._env.chargeCodeAccesses){const e=this._runState.interpreter.getAddress(),t=this._runState.env.accessWitness.readAccountCodeChunks(e,this._runState.programCounter,this._runState.programCounter);s+=t,kt(`codechunk accessed statelessGas=${t} (-> ${s})`)}if(n.isInvalid)throw new xe(xe.errorMessages.INVALID_OPCODE);this.useGas(s,n),this._runState.programCounter++;const e=t.opHandler;n.isAsync?await e.apply(null,[this._runState,this.common]):e.apply(null,[this._runState,this.common]),this._runState.env.accessWitness?.commit()}finally{!0===this.profilerOpts?.enabled&&this.performanceLogger.stopTimer(r,Number(s),"opcodes",n.fee,Number(s)-n.fee)}}lookupOpInfo(e){return this._evm._opcodeMap[e]}async _runStepHook(e,t,n){const s=this.lookupOpInfo(this._runState.opCode).opcodeInfo,i=this._env.eof?.container.header.getSectionFromProgramCounter(this._runState.programCounter);let o,a;if(253===s.code){const[e,t]=this._runState.stack.peek(2);o=new Uint8Array(0),t!==r.ZUg&&(o=this._runState.memory.read(Number(e),Number(t)))}void 0!==le[s.code]&&le[s.code].intermediates>0&&(a=this._runState.code.slice(this._runState.programCounter+1,this._runState.programCounter+1+le[s.code].intermediates));const c={pc:this._runState.programCounter,gasLeft:t,gasRefund:this._runState.gasRefund,opcode:{name:s.fullName,fee:s.fee,dynamicFee:e,isAsync:s.isAsync,code:s.code},stack:this._runState.stack.getStack(),depth:this._env.depth,address:this._env.address,account:this._env.contract,memory:this._runState.memory._store.subarray(0,32*Number(n)),memoryWordCount:n,codeAddress:this._env.codeAddress,stateManager:this._runState.stateManager,eofSection:i,immediate:a,error:o,eofFunctionDepth:void 0!==this._env.eof?this._env.eof?.eofRunState.returnStack.length+1:void 0};if(this._evm.DEBUG){let t=[];t=c.stack.map((e=>(0,r.Q9U)(BigInt(e))));const n=c.opcode.name,s={pc:c.pc,op:n,gas:(0,r.Q9U)(c.gasLeft),gasCost:(0,r.Q9U)(e),stack:t,depth:c.depth};n in this.opDebuggers||(this.opDebuggers[n]=Be(`evm:ops:${n}`)),this.opDebuggers[n](JSON.stringify(s))}await this._evm._emit("step",c)}_getValidJumpDestinations(e){const t=new Uint8Array(e.length),n={},s=Array(e.length);for(let i=0;i<e.length;i++){const o=e[i];if(s[i]=this.lookupOpInfo(o),o<=127)if(o>=96){const t=o-95;let s=e.subarray(i+1,i+o-94);s.length<t&&(s=(0,r.rs2)(s,t));const a=(0,r.U8W)(s);n[i+1]=a,i+=t}else 91===o&&(t[i]=1)}return{jumps:t,pushes:n,opcodesCached:s}}useGas(e,t){if(this._runState.gasLeft-=e,this._evm.DEBUG){let n="";"string"==typeof t?n=t+": ":void 0!==t&&(n=`${t.name} fee: `),kt(`${n}used ${e} gas (-> ${this._runState.gasLeft})`)}this._runState.gasLeft<r.ZUg&&(this._runState.gasLeft=r.ZUg,Qe(xe.errorMessages.OUT_OF_GAS))}refundGas(e,t){this._evm.DEBUG&&kt(`${"string"==typeof t?t+": ":""}refund ${e} gas (-> ${this._runState.gasRefund})`),this._runState.gasRefund+=e}subRefund(e,t){this._evm.DEBUG&&kt(`${"string"==typeof t?t+": ":""}sub gas refund ${e} (-> ${this._runState.gasRefund})`),this._runState.gasRefund-=e,this._runState.gasRefund<r.ZUg&&(this._runState.gasRefund=r.ZUg,Qe(xe.errorMessages.REFUND_EXHAUSTED))}addStipend(e){this._evm.DEBUG&&kt(`add stipend ${e} (-> ${this._runState.gasLeft})`),this._runState.gasLeft+=e}async getExternalBalance(e){if(e.equals(this._env.address))return this._env.contract.balance;let t=await this._stateManager.getAccount(e);return t||(t=new r.gDM),t.balance}async storageStore(e,t){await this._stateManager.putStorage(this._env.address,e,t);const n=await this._stateManager.getAccount(this._env.address);if(!n)throw(0,r.mQ1)("could not read account while persisting memory");this._env.contract=n}async storageLoad(e,t=!1){return t?this._stateManager.originalStorageCache.get(this._env.address,e):this._stateManager.getStorage(this._env.address,e)}transientStorageStore(e,t){return this._evm.transientStorage.put(this._env.address,e,t)}transientStorageLoad(e){return this._evm.transientStorage.get(this._env.address,e)}finish(e){this._result.returnValue=e,Qe(xe.errorMessages.STOP)}revert(e){this._result.returnValue=e,Qe(xe.errorMessages.REVERT)}getAddress(){return this._env.address}getSelfBalance(){return this._env.contract.balance}getCallValue(){return this._env.callValue}getCallData(){return this._env.callData}getCallDataSize(){return BigInt(this._env.callData.length)}getCaller(){return(0,r.U8W)(this._env.caller.bytes)}getCodeSize(){return BigInt(this._env.code.length)}getCode(){return this._env.code}getGasLeft(){return this._runState.gasLeft}getReturnDataSize(){return BigInt(this._runState.returnBytes.length)}getReturnData(){return this._runState.returnBytes}isStatic(){return this._env.isStatic}getTxGasPrice(){return this._env.gasPrice}getTxOrigin(){return(0,r.U8W)(this._env.origin.bytes)}getBlockNumber(){return this._env.block.header.number}getBlockCoinbase(){let e;return e=this.common.consensusAlgorithm()===Ne.Bi.Clique?this._evm._optsCached.cliqueSigner(this._env.block.header):this._env.block.header.coinbase,(0,r.U8W)(e.toBytes())}getBlockTimestamp(){return this._env.block.header.timestamp}getBlockDifficulty(){return this._env.block.header.difficulty}getBlockPrevRandao(){return(0,r.U8W)(this._env.block.header.prevRandao)}getBlockGasLimit(){return this._env.block.header.gasLimit}getBlockBaseFee(){const e=this._env.block.header.baseFeePerGas;if(void 0===e)throw(0,r.mQ1)("Block has no Base Fee");return e}getBlobBaseFee(){const e=this._env.block.header.getBlobGasPrice();if(void 0===e)throw(0,r.mQ1)("Block has no Blob Base Fee");return e}getChainId(){return this.common.chainId()}async call(e,t,n,r){const s=new He({caller:this._env.address,gasLimit:e,to:t,value:n,data:r,isStatic:this._env.isStatic,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(s)}async callCode(e,t,n,r){const s=new He({caller:this._env.address,gasLimit:e,to:this._env.address,codeAddress:t,value:n,data:r,isStatic:this._env.isStatic,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(s)}async callStatic(e,t,n,r){const s=new He({caller:this._env.address,gasLimit:e,to:t,value:n,data:r,isStatic:!0,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(s)}async callDelegate(e,t,n,r){const s=new He({caller:this._env.caller,gasLimit:e,to:this._env.address,codeAddress:t,value:n,data:r,isStatic:this._env.isStatic,delegatecall:!0,depth:this._env.depth+1,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});return this._baseCall(s)}async _baseCall(e){const t=new Set(this._result.selfdestruct);let n;if(e.selfdestruct=t,e.gasRefund=this._runState.gasRefund,this._runState.returnBytes=new Uint8Array(0),this.common.isActivatedEIP(6780)&&(n=new Set(this._result.createdAddresses),e.createdAddresses=n),this._runState.returnBytes=new Uint8Array(0),this._env.depth>=Number(this.common.param("stackLimit"))||!0!==e.delegatecall&&this._env.contract.balance<e.value)return r.ZUg;const s=await this._evm.runCall({message:e});if(s.execResult.logs&&(this._result.logs=this._result.logs.concat(s.execResult.logs)),this.useGas(s.execResult.executionGasUsed,"CALL, STATICCALL, DELEGATECALL, CALLCODE"),void 0===s.execResult.returnValue||s.execResult.exceptionError&&s.execResult.exceptionError.error!==xe.errorMessages.REVERT||(this._runState.returnBytes=s.execResult.returnValue),!s.execResult.exceptionError){for(const n of t)this._result.selfdestruct.add(n);if(this.common.isActivatedEIP(6780))for(const t of n)this._result.createdAddresses.add(t);const e=await this._stateManager.getAccount(this._env.address);if(!e)throw(0,r.mQ1)("could not read contract account");this._env.contract=e,this._runState.gasRefund=s.execResult.gasRefund??r.ZUg}return this._getReturnCode(s)}async create(e,t,n,s,i){const o=new Set(this._result.selfdestruct),a=this._env.address,c=this._env.depth+1;if(this._runState.returnBytes=new Uint8Array(0),this._env.depth>=Number(this.common.param("stackLimit"))||this._env.contract.balance<t)return r.ZUg;if(this._env.contract.nonce>=r.ETD)return r.ZUg;if(this._env.contract.nonce+=r.exu,await this.journal.putAccount(this._env.address,this._env.contract),this.common.isActivatedEIP(3860)&&n.length>Number(this.common.param("maxInitCodeSize"))&&!1===this._evm.allowUnlimitedInitCodeSize)return r.ZUg;const u=new He({caller:a,gasLimit:e,value:t,data:n,eofCallData:i,salt:s,depth:c,selfdestruct:o,gasRefund:this._runState.gasRefund,blobVersionedHashes:this._env.blobVersionedHashes,accessWitness:this._env.accessWitness});let d;this.common.isActivatedEIP(6780)&&(d=new Set(this._result.createdAddresses),u.createdAddresses=d);const f=await this._evm.runCall({message:u});if(f.execResult.logs&&(this._result.logs=this._result.logs.concat(f.execResult.logs)),this.useGas(f.execResult.executionGasUsed,"CREATE"),f.execResult.exceptionError&&f.execResult.exceptionError.error===xe.errorMessages.REVERT&&(this._runState.returnBytes=f.execResult.returnValue),!f.execResult.exceptionError||f.execResult.exceptionError.error===xe.errorMessages.CODESTORE_OUT_OF_GAS){for(const t of o)this._result.selfdestruct.add(t);if(this.common.isActivatedEIP(6780))for(const t of d)this._result.createdAddresses.add(t);const e=await this._stateManager.getAccount(this._env.address);if(!e)throw(0,r.mQ1)("could not read contract account");if(this._env.contract=e,this._runState.gasRefund=f.execResult.gasRefund??r.ZUg,f.createdAddress)return(0,r.U8W)(f.createdAddress.bytes)}return this._getReturnCode(f,!0)}async create2(e,t,n,r){return this.create(e,t,n,r)}async eofcreate(e,t,n,r,s){return this.create(e,t,n,r,s)}async selfDestruct(e){return this._selfDestruct(e)}async _selfDestruct(e){this._result.selfdestruct.has((0,r.MyA)(this._env.address.bytes))||this.refundGas(this.common.param("selfdestructRefundGas")),this._result.selfdestruct.add((0,r.MyA)(this._env.address.bytes));const t=(0,r.NDp)(e.bytes,this._env.address.bytes);if(!t){let t=await this._stateManager.getAccount(e);t||(t=new r.gDM),t.balance+=this._env.contract.balance,await this.journal.putAccount(e,t)}let n=!this.common.isActivatedEIP(6780);n||(n=this._env.createdAddresses.has(this._env.address.toString()),n||(n=!t)),n&&await this._stateManager.modifyAccountFields(this._env.address,{balance:r.ZUg}),Qe(xe.errorMessages.STOP)}log(e,t,n){(t<0||t>4)&&Qe(xe.errorMessages.OUT_OF_RANGE),n.length!==t&&Qe(xe.errorMessages.INTERNAL_ERROR);const r=[this._env.address.bytes,n,e];this._result.logs.push(r)}_getReturnCode(e,t=!1){return void 0===this._runState.env.eof||t?e.execResult.exceptionError?r.ZUg:r.exu:void 0!==e.execResult.exceptionError?e.execResult.exceptionError.error===xe.errorMessages.REVERT?r.exu:r.l$H:r.ZUg}}class Nt{constructor(e,t){this.DEBUG="undefined"==typeof window&&(process?.env?.DEBUG?.includes("ethjs")??!1),this._debug=Be("evm:journal"),this.cleanJournal(),this.journalHeight=0,this.stateManager=e,this.common=t}startReportingAccessList(){this.accessList=new Map}startReportingPreimages(){this.preimages=new Map}async putAccount(e,t){return this.touchAddress(e),this.stateManager.putAccount(e,t)}async deleteAccount(e){this.touchAddress(e),await this.stateManager.deleteAccount(e)}touchAddress(e){const t=e.toString().slice(2);this.touchAccount(t)}touchAccount(e){if(void 0!==this.preimages){const t=(0,r.A1F)(e);if(void 0===this.stateManager.getAppliedKey)throw(0,r.mQ1)("touchAccount: stateManager.getAppliedKey can not be undefined if preimage storing is enabled");const n=this.stateManager.getAppliedKey(t);this.preimages.set((0,r.MyA)(n),t)}if(!this.touched.has(e)){this.touched.add(e);this.journalDiff[this.journalDiff.length-1][1][2].add(e)}}async commit(){this.journalHeight--,this.journalDiff.push([this.journalHeight,[new Set,new Map,new Set]]),await this.stateManager.commit()}async checkpoint(){this.journalHeight++,this.journalDiff.push([this.journalHeight,[new Set,new Map,new Set]]),await this.stateManager.checkpoint()}async revert(){let e;for(let t=this.journalDiff.length-1;t>=0;t--){e=t;const[n,s]=this.journalDiff[t];if(n<this.journalHeight)break;const i=s[0],o=s[1],a=s[2];for(const e of i)this.journal.has(e)&&this.journal.delete(e);for(const[e,t]of o)if(this.journal.has(e)){const n=this.journal.get(e);for(const e of t)n.delete(e)}for(const e of a)e!==r.eo8&&this.touched.delete(e)}this.journalDiff=this.journalDiff.slice(0,e+1),this.journalHeight--,await this.stateManager.revert()}cleanJournal(){this.journalHeight=0,this.journal=new Map,this.alwaysWarmJournal=new Map,this.touched=new Set,this.journalDiff=[[0,[new Set,new Map,new Set]]]}async cleanup(){if(this.common.gteHardfork(Ne.sr.SpuriousDragon))for(const e of this.touched){const t=new r.pVw((0,r.aTq)(`0x${e}`)),n=await this.stateManager.getAccount(t);(void 0===n||n.isEmpty())&&(await this.deleteAccount(t),this.DEBUG&&this._debug(`Cleanup touched account address=${t} (>= SpuriousDragon)`))}this.cleanJournal(),delete this.accessList,delete this.preimages}addAlwaysWarmAddress(e,t=!1){const n=(0,r.Agw)(e);this.alwaysWarmJournal.has(n)||this.alwaysWarmJournal.set(n,new Set),t&&void 0!==this.accessList&&(this.accessList.has(n)||this.accessList.set(n,new Set))}addAlwaysWarmSlot(e,t,n=!1){const s=(0,r.Agw)(e);this.addAlwaysWarmAddress(s,n);const i=this.alwaysWarmJournal.get(s),o=(0,r.Agw)(t);i.add(o),n&&void 0!==this.accessList&&this.accessList.get(s).add(o)}isWarmedAddress(e){const t=(0,r.od$)(e);return this.journal.has(t)||this.alwaysWarmJournal.has(t)}addWarmedAddress(e){const t=(0,r.od$)(e);if(!this.journal.has(t)){this.journal.set(t,new Set);this.journalDiff[this.journalDiff.length-1][1][0].add(t)}void 0!==this.accessList&&(this.accessList.has(t)||this.accessList.set(t,new Set))}isWarmedStorage(e,t){const n=(0,r.od$)(e),s=this.journal.get(n);return void 0===s?!!this.alwaysWarmJournal.has(n)&&this.alwaysWarmJournal.get(n).has((0,r.od$)(t)):!!s.has((0,r.od$)(t))||!!this.alwaysWarmJournal.has(n)&&this.alwaysWarmJournal.get(n).has((0,r.od$)(t))}addWarmedStorage(e,t){const n=(0,r.od$)(e);let s=this.journal.get(n);void 0===s&&(this.addWarmedAddress(e),s=this.journal.get(n));const i=(0,r.od$)(t);if(!s.has(i)){s.add(i);const e=this.journalDiff[this.journalDiff.length-1][1][1];e.has(n)||e.set(n,new Set);e.get(n).add(i)}if(void 0!==this.accessList){this.accessList.get(n).add(i)}}}const Bt={1:{maxRefundQuotient:2,basefeeGas:2,expGas:10,expByteGas:10,keccak256Gas:30,keccak256WordGas:6,sloadGas:50,sstoreSetGas:2e4,sstoreResetGas:5e3,sstoreRefundGas:15e3,jumpdestGas:1,logGas:375,logDataGas:8,logTopicGas:375,createGas:32e3,callGas:40,callStipendGas:2300,callValueTransferGas:9e3,callNewAccountGas:25e3,selfdestructRefundGas:24e3,memoryGas:3,quadCoefficientDivGas:512,createDataGas:200,copyGas:3,ecRecoverGas:3e3,sha256Gas:60,sha256WordGas:12,ripemd160Gas:600,ripemd160WordGas:120,identityGas:15,identityWordGas:3,stopGas:0,addGas:3,mulGas:5,subGas:3,divGas:5,sdivGas:5,modGas:5,smodGas:5,addmodGas:8,mulmodGas:8,signextendGas:5,ltGas:3,gtGas:3,sltGas:3,sgtGas:3,eqGas:3,iszeroGas:3,andGas:3,orGas:3,xorGas:3,notGas:3,byteGas:3,addressGas:2,balanceGas:20,originGas:2,callerGas:2,callvalueGas:2,calldataloadGas:3,calldatasizeGas:2,calldatacopyGas:3,codesizeGas:2,codecopyGas:3,gaspriceGas:2,extcodesizeGas:20,extcodecopyGas:20,blockhashGas:20,coinbaseGas:2,timestampGas:2,numberGas:2,difficultyGas:2,gaslimitGas:2,popGas:2,mloadGas:3,mstoreGas:3,mstore8Gas:3,sstoreGas:0,jumpGas:8,jumpiGas:10,pcGas:2,msizeGas:2,gasGas:2,pushGas:3,dupGas:3,swapGas:3,callcodeGas:40,returnGas:0,invalidGas:0,selfdestructGas:0,prevrandaoGas:0,stackLimit:1024},606:{delegatecallGas:40},608:{sloadGas:200,callGas:700,extcodesizeGas:700,extcodecopyGas:700,balanceGas:400,delegatecallGas:700,callcodeGas:700,selfdestructGas:5e3},607:{expByteGas:50,maxCodeSize:24576},609:{modexpGquaddivisorGas:20,bn254AddGas:500,bn254MulGas:4e4,bn254PairingGas:1e5,bn254PairingWordGas:8e4,revertGas:0,staticcallGas:700,returndatasizeGas:2,returndatacopyGas:3},1013:{netSstoreNoopGas:200,netSstoreInitGas:2e4,netSstoreCleanGas:5e3,netSstoreDirtyGas:200,netSstoreClearRefundGas:15e3,netSstoreResetRefundGas:4800,netSstoreResetClearRefundGas:19800,shlGas:3,shrGas:3,sarGas:3,extcodehashGas:400,create2Gas:32e3},1716:{netSstoreNoopGas:null,netSstoreInitGas:null,netSstoreCleanGas:null,netSstoreDirtyGas:null,netSstoreClearRefundGas:null,netSstoreResetRefundGas:null,netSstoreResetClearRefundGas:null},1679:{blake2RoundGas:1,bn254AddGas:150,bn254MulGas:6e3,bn254PairingGas:45e3,bn254PairingWordGas:34e3,sstoreSentryEIP2200Gas:2300,sstoreNoopEIP2200Gas:800,sstoreDirtyEIP2200Gas:800,sstoreInitEIP2200Gas:2e4,sstoreInitRefundEIP2200Gas:19200,sstoreCleanEIP2200Gas:5e3,sstoreCleanRefundEIP2200Gas:4200,sstoreClearRefundEIP2200Gas:15e3,balanceGas:700,extcodehashGas:700,chainidGas:2,selfbalanceGas:5,sloadGas:800},663:{dupnGas:3,swapnGas:3,exchangeGas:3},1153:{tstoreGas:100,tloadGas:100},1559:{elasticityMultiplier:2},2565:{modexpGquaddivisorGas:3},2537:{bls12381G1AddGas:375,bls12381G1MulGas:12e3,bls12381G2AddGas:600,bls12381G2MulGas:22500,bls12381PairingBaseGas:37700,bls12381PairingPerPairGas:32600,bls12381MapG1Gas:5500,bls12381MapG2Gas:23800},2929:{coldsloadGas:2100,coldaccountaccessGas:2600,warmstoragereadGas:100,sstoreCleanEIP2200Gas:2900,sstoreNoopEIP2200Gas:100,sstoreDirtyEIP2200Gas:100,sstoreInitRefundEIP2200Gas:19900,sstoreCleanRefundEIP2200Gas:4900,callGas:0,callcodeGas:0,delegatecallGas:0,staticcallGas:0,balanceGas:0,extcodesizeGas:0,extcodecopyGas:0,extcodehashGas:0,sloadGas:0,sstoreGas:0},2935:{historyStorageAddress:"0x0000F90827F1C53A10CB7A02335B175320002935",historyServeWindow:8192,systemAddress:"0xfffffffffffffffffffffffffffffffffffffffe"},3198:{basefeeGas:2},3529:{maxRefundQuotient:5,selfdestructRefundGas:0,sstoreClearRefundEIP2200Gas:4800},3855:{push0Gas:2},3860:{initCodeWordGas:2,maxInitCodeSize:49152},4200:{rjumpGas:2,rjumpiGas:4,rjumpvGas:4},4399:{prevrandaoGas:2},4750:{callfGas:5,retfGas:3},4844:{kzgPointEvaluationPrecompileGas:5e4,blobhashGas:3,blobCommitmentVersionKzg:1,fieldElementsPerBlob:4096},5656:{mcopyGas:3},6206:{jumpfGas:5},7069:{extcallGas:0,extdelegatecallGas:0,extstaticcallGas:0,returndataloadGas:3,minRetainedGas:5e3,minCalleeGas:2300},7480:{dataloadGas:4,dataloadnGas:3,datasizeGas:2,datacopyGas:3},7516:{blobbasefeeGas:2},7620:{eofcreateGas:32e3,returncontractGas:0},7939:{clzGas:5}},Pt=(e,t,n)=>(void 0!==e._debug&&e._debug(`Run ${n} precompile data=${(0,r.h0N)(e.data)} length=${e.data.length} gasLimit=${e.gasLimit} gasUsed=${t}`),!(e.gasLimit<t)||(void 0!==e._debug&&e._debug(`${n} failed: OOG`),!1)),Ut=(e,t,n)=>e.data.length===t||(void 0!==e._debug&&e._debug(`${n} failed: Invalid input length length=${e.data.length} (expected: ${t})`),!1),Rt=(e,t,n)=>e.data.length%t==0||(void 0!==e._debug&&e._debug(`${n} failed: Invalid input length length=${e.data.length} (expected: ${t}*k bytes)`),!1),Ot=BigInt("52435875175126190479447740508185965837690552500527637822603658699938581184513"),Gt=(0,r.cgR)((0,r.CZI)(Ot),32);async function Tt(e){const t=Ki("0a");if(void 0===e.common.customCrypto?.kzg)throw(0,r.mQ1)("kzg not initialized");const n=e.common.param("kzgPointEvaluationPrecompileGas");if(!Pt(e,n,t))return to(e.gasLimit);if(192!==e.data.length)return ro(new xe(xe.errorMessages.INVALID_INPUT_LENGTH),e.gasLimit);const s=Number(e.common.param("blobCommitmentVersionKzg")),i=e.common.param("fieldElementsPerBlob"),o=(0,r.MyA)(e.data.subarray(0,32)),a=(0,r.MyA)(e.data.subarray(32,64)),c=(0,r.MyA)(e.data.subarray(64,96)),u=(0,r.MyA)(e.data.subarray(96,144)),d=(0,r.MyA)(e.data.subarray(144,192));if((0,r.lxx)(u,s)!==o)return void 0!==e._debug&&e._debug(`${t} failed: INVALID_COMMITMENT`),ro(new xe(xe.errorMessages.INVALID_COMMITMENT),e.gasLimit);void 0!==e._debug&&e._debug(`${t}: proof verification with commitment=${u} z=${a} y=${c} kzgProof=${d}`);try{const t=e.common.customCrypto?.kzg?.verifyProof(u,a,c,d);if(!1===t)return ro(new xe(xe.errorMessages.INVALID_PROOF),e.gasLimit)}catch(l){return!0===l.message.includes("C_KZG_BADARGS")==!0==!0?(void 0!==e._debug&&e._debug(`${t} failed: INVALID_INPUTS`),ro(new xe(xe.errorMessages.INVALID_INPUTS),e.gasLimit)):(void 0!==e._debug&&e._debug(`${t} failed: Unknown error - ${l.message}`),ro(new xe(xe.errorMessages.REVERT),e.gasLimit))}const f=(0,r.cgR)((0,r.CZI)(i),32);return void 0!==e._debug&&e._debug(`${t} return fieldElements=${(0,r.MyA)(f)} modulus=${(0,r.MyA)(Gt)}`),{executionGasUsed:n,returnValue:(0,r.Idy)(f,Gt)}}const Lt=BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),Ft=128,Dt=256,Mt=new Uint8Array(Ft),Ht=new Uint8Array(Dt),$t=new Uint8Array(32),Zt=(0,r.Idy)(new Uint8Array(31),(0,r.aTq)("0x01")),Vt=[[1,1e3],[2,949],[3,848],[4,797],[5,764],[6,750],[7,738],[8,728],[9,719],[10,712],[11,705],[12,698],[13,692],[14,687],[15,682],[16,677],[17,673],[18,669],[19,665],[20,661],[21,658],[22,654],[23,651],[24,648],[25,645],[26,642],[27,640],[28,637],[29,635],[30,632],[31,630],[32,627],[33,625],[34,623],[35,621],[36,619],[37,617],[38,615],[39,613],[40,611],[41,609],[42,608],[43,606],[44,604],[45,603],[46,601],[47,599],[48,598],[49,596],[50,595],[51,593],[52,592],[53,591],[54,589],[55,588],[56,586],[57,585],[58,584],[59,582],[60,581],[61,580],[62,579],[63,577],[64,576],[65,575],[66,574],[67,573],[68,572],[69,570],[70,569],[71,568],[72,567],[73,566],[74,565],[75,564],[76,563],[77,562],[78,561],[79,560],[80,559],[81,558],[82,557],[83,556],[84,555],[85,554],[86,553],[87,552],[88,551],[89,550],[90,549],[91,548],[92,547],[93,547],[94,546],[95,545],[96,544],[97,543],[98,542],[99,541],[100,540],[101,540],[102,539],[103,538],[104,537],[105,536],[106,536],[107,535],[108,534],[109,533],[110,532],[111,532],[112,531],[113,530],[114,529],[115,528],[116,528],[117,527],[118,526],[119,525],[120,525],[121,524],[122,523],[123,522],[124,522],[125,521],[126,520],[127,520],[128,519]],Wt=[[1,1e3],[2,1e3],[3,923],[4,884],[5,855],[6,832],[7,812],[8,796],[9,782],[10,770],[11,759],[12,749],[13,740],[14,732],[15,724],[16,717],[17,711],[18,704],[19,699],[20,693],[21,688],[22,683],[23,679],[24,674],[25,670],[26,666],[27,663],[28,659],[29,655],[30,652],[31,649],[32,646],[33,643],[34,640],[35,637],[36,634],[37,632],[38,629],[39,627],[40,624],[41,622],[42,620],[43,618],[44,615],[45,613],[46,611],[47,609],[48,607],[49,606],[50,604],[51,602],[52,600],[53,598],[54,597],[55,595],[56,593],[57,592],[58,590],[59,589],[60,587],[61,586],[62,584],[63,583],[64,582],[65,580],[66,579],[67,578],[68,576],[69,575],[70,574],[71,573],[72,571],[73,570],[74,569],[75,568],[76,567],[77,566],[78,565],[79,563],[80,562],[81,561],[82,560],[83,559],[84,558],[85,557],[86,556],[87,555],[88,554],[89,553],[90,552],[91,552],[92,551],[93,550],[94,549],[95,548],[96,547],[97,546],[98,545],[99,545],[100,544],[101,543],[102,542],[103,541],[104,541],[105,540],[106,539],[107,538],[108,537],[109,537],[110,536],[111,535],[112,535],[113,534],[114,533],[115,532],[116,532],[117,531],[118,530],[119,530],[120,529],[121,528],[122,528],[123,527],[124,526],[125,526],[126,525],[127,524],[128,524]];var jt=n(76210),qt=n(38628);const zt=BigInt(0),Qt=BigInt(1);function Kt(e,t=""){if("boolean"!=typeof e){throw new Error((t&&`"${t}"`)+"expected boolean, got type="+typeof e)}return e}function Yt(e,t,n=""){const r=(0,qt.aY)(e),s=e?.length,i=void 0!==t;if(!r||i&&s!==t){throw new Error((n&&`"${n}" `)+"expected Uint8Array"+(i?` of length ${t}`:"")+", got "+(r?`length=${s}`:"type="+typeof e))}return e}function Jt(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function Xt(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?zt:BigInt("0x"+e)}function en(e){return Xt((0,qt.My)(e))}function tn(e){return(0,qt.DO)(e),Xt((0,qt.My)(Uint8Array.from(e).reverse()))}function nn(e,t){return(0,qt.aT)(e.toString(16).padStart(2*t,"0"))}function rn(e,t){return nn(e,t).reverse()}function sn(e,t,n){let r;if("string"==typeof t)try{r=(0,qt.aT)(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else{if(!(0,qt.aY)(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}const s=r.length;if("number"==typeof n&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}const on=e=>"bigint"==typeof e&&zt<=e;function an(e,t,n){return on(e)&&on(t)&&on(n)&&t<=e&&e<n}function cn(e){let t;for(t=0;e>zt;e>>=Qt,t+=1);return t}function un(e,t){return e>>BigInt(t)&Qt}const dn=e=>(Qt<<BigInt(e))-Qt;function fn(e,t,n={}){if(!e||"object"!=typeof e)throw new Error("expected valid options object");function r(t,n,r){const s=e[t];if(r&&void 0===s)return;const i=typeof s;if(i!==n||null===s)throw new Error(`param "${t}" is invalid: expected ${n}, got ${i}`)}Object.entries(t).forEach((([e,t])=>r(e,t,!1))),Object.entries(n).forEach((([e,t])=>r(e,t,!0)))}const ln=()=>{throw new Error("not implemented")};function hn(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(void 0!==s)return s;const i=e(n,...r);return t.set(n,i),i}}const pn=BigInt(0),mn=BigInt(1),gn=BigInt(2),bn=BigInt(3),yn=BigInt(4),wn=BigInt(5),_n=BigInt(7),vn=BigInt(8),Cn=BigInt(9),En=BigInt(16);function An(e,t){const n=e%t;return n>=pn?n:t+n}function Sn(e,t){if(e===pn)throw new Error("invert: expected non-zero number");if(t<=pn)throw new Error("invert: expected positive modulus, got "+t);let n=An(e,t),r=t,s=pn,i=mn,o=mn,a=pn;for(;n!==pn;){const e=r/n,t=r%n,c=s-o*e,u=i-a*e;r=n,n=t,s=o,i=a,o=c,a=u}if(r!==mn)throw new Error("invert: does not exist");return An(s,t)}function In(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function kn(e,t){const n=(e.ORDER+mn)/yn,r=e.pow(t,n);return In(e,r,t),r}function xn(e,t){const n=(e.ORDER-wn)/vn,r=e.mul(t,gn),s=e.pow(r,n),i=e.mul(t,s),o=e.mul(e.mul(i,gn),s),a=e.mul(i,e.sub(o,e.ONE));return In(e,a,t),a}function Nn(e){if(e<bn)throw new Error("sqrt is not defined for small field");let t=e-mn,n=0;for(;t%gn===pn;)t/=gn,n++;let r=gn;const s=Ln(e);for(;1===Gn(s,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return kn;let i=s.pow(r,t);const o=(t+mn)/gn;return function(e,r){if(e.is0(r))return r;if(1!==Gn(e,r))throw new Error("Cannot find square root");let s=n,a=e.mul(e.ONE,i),c=e.pow(r,t),u=e.pow(r,o);for(;!e.eql(c,e.ONE);){if(e.is0(c))return e.ZERO;let t=1,n=e.sqr(c);for(;!e.eql(n,e.ONE);)if(t++,n=e.sqr(n),t===s)throw new Error("Cannot find square root");const r=mn<<BigInt(s-t-1),i=e.pow(a,r);s=t,a=e.sqr(i),c=e.mul(c,a),u=e.mul(u,i)}return u}}function Bn(e){return e%yn===bn?kn:e%vn===wn?xn:e%En===Cn?function(e){const t=Ln(e),n=Nn(e),r=n(t,t.neg(t.ONE)),s=n(t,r),i=n(t,t.neg(r)),o=(e+_n)/En;return(e,t)=>{let n=e.pow(t,o),a=e.mul(n,r);const c=e.mul(n,s),u=e.mul(n,i),d=e.eql(e.sqr(a),t),f=e.eql(e.sqr(c),t);n=e.cmov(n,a,d),a=e.cmov(u,c,f);const l=e.eql(e.sqr(a),t),h=e.cmov(n,a,l);return In(e,h,t),h}}(e):Nn(e)}const Pn=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Un(e){return fn(e,Pn.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),e}function Rn(e,t,n){if(n<pn)throw new Error("invalid exponent, negatives unsupported");if(n===pn)return e.ONE;if(n===mn)return t;let r=e.ONE,s=t;for(;n>pn;)n&mn&&(r=e.mul(r,s)),s=e.sqr(s),n>>=mn;return r}function On(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce(((t,n,s)=>e.is0(n)?t:(r[s]=t,e.mul(t,n))),e.ONE),i=e.inv(s);return t.reduceRight(((t,n,s)=>e.is0(n)?t:(r[s]=e.mul(t,r[s]),e.mul(t,n))),i),r}function Gn(e,t){const n=(e.ORDER-mn)/gn,r=e.pow(t,n),s=e.eql(r,e.ONE),i=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Tn(e,t){void 0!==t&&(0,qt.Fe)(t);const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Ln(e,t,n=!1,r={}){if(e<=pn)throw new Error("invalid field: expected ORDER > 0, got "+e);let s,i,o,a=!1;if("object"==typeof t&&null!=t){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const e=t;e.BITS&&(s=e.BITS),e.sqrt&&(i=e.sqrt),"boolean"==typeof e.isLE&&(n=e.isLE),"boolean"==typeof e.modFromBytes&&(a=e.modFromBytes),o=e.allowedLengths}else"number"==typeof t&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:u}=Tn(e,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const f=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:u,MASK:dn(c),ZERO:pn,ONE:mn,allowedLengths:o,create:t=>An(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return pn<=t&&t<e},is0:e=>e===pn,isValidNot0:e=>!f.is0(e)&&f.isValid(e),isOdd:e=>(e&mn)===mn,neg:t=>An(-t,e),eql:(e,t)=>e===t,sqr:t=>An(t*t,e),add:(t,n)=>An(t+n,e),sub:(t,n)=>An(t-n,e),mul:(t,n)=>An(t*n,e),pow:(e,t)=>Rn(f,e,t),div:(t,n)=>An(t*Sn(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Sn(t,e),sqrt:i||(t=>(d||(d=Bn(e)),d(f,t))),toBytes:e=>n?rn(e,u):nn(e,u),fromBytes:(t,r=!0)=>{if(o){if(!o.includes(t.length)||t.length>u)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+t.length);const e=new Uint8Array(u);e.set(t,n?0:e.length-t.length),t=e}if(t.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+t.length);let s=n?tn(t):en(t);if(a&&(s=An(s,e)),!r&&!f.isValid(s))throw new Error("invalid field element: outside of range 0..ORDER");return s},invertBatch:e=>On(f,e),cmov:(e,t,n)=>n?t:e});return Object.freeze(f)}function Fn(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Dn(e){const t=Fn(e);return t+Math.ceil(t/2)}function Mn(e,t,n=!1){const r=e.length,s=Fn(t),i=Dn(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=An(n?tn(e):en(e),t-mn)+mn;return n?rn(o,s):nn(o,s)}const Hn=BigInt(0),$n=BigInt(1);function Zn(e,t){const n=t.negate();return e?n:t}function Vn(e,t){const n=On(e.Fp,t.map((e=>e.Z)));return t.map(((t,r)=>e.fromAffine(t.toAffine(n[r]))))}function Wn(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function jn(e,t){Wn(e,t);const n=2**e;return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1),mask:dn(e),maxNumber:n,shiftBy:BigInt(e)}}function qn(e,t,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(e&s),c=e>>o;a>r&&(a-=i,c+=$n);const u=t*r;return{nextN:c,offset:u+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:t%2!=0,offsetF:u}}function zn(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)}))}function Qn(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)}))}const Kn=new WeakMap,Yn=new WeakMap;function Jn(e){return Yn.get(e)||1}function Xn(e){if(e!==Hn)throw new Error("invalid wNAF")}class er{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let r=e;for(;t>Hn;)t&$n&&(n=n.add(r)),r=r.double(),t>>=$n;return n}precomputeWindow(e,t){const{windows:n,windowSize:r}=jn(t,this.bits),s=[];let i=e,o=i;for(let a=0;a<n;a++){o=i,s.push(o);for(let e=1;e<r;e++)o=o.add(i),s.push(o);i=o.double()}return s}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let r=this.ZERO,s=this.BASE;const i=jn(e,this.bits);for(let o=0;o<i.windows;o++){const{nextN:e,offset:a,isZero:c,isNeg:u,isNegF:d,offsetF:f}=qn(n,o,i);n=e,c?s=s.add(Zn(d,t[f])):r=r.add(Zn(u,t[a]))}return Xn(n),{p:r,f:s}}wNAFUnsafe(e,t,n,r=this.ZERO){const s=jn(e,this.bits);for(let i=0;i<s.windows&&n!==Hn;i++){const{nextN:e,offset:o,isZero:a,isNeg:c}=qn(n,i,s);if(n=e,!a){const e=t[o];r=r.add(c?e.negate():e)}}return Xn(n),r}getPrecomputes(e,t,n){let r=Kn.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&("function"==typeof n&&(r=n(r)),Kn.set(t,r))),r}cached(e,t,n){const r=Jn(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)}unsafe(e,t,n,r){const s=Jn(e);return 1===s?this._unsafeLadder(e,t,r):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),t,r)}createCache(e,t){Wn(t,this.bits),Yn.set(e,t),Kn.delete(e)}hasCache(e){return 1!==Jn(e)}}function tr(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Un(t),t}return Ln(e,{isLE:n})}const nr=en;function rr(e,t){if(ir(e),ir(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function sr(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function ir(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function or(e){if(!(0,qt.aY)(e)&&"string"!=typeof e)throw new Error("DST must be Uint8Array or string");return"string"==typeof e?(0,qt.AI)(e):e}function ar(e,t,n){fn(n,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:r,k:s,m:i,hash:o,expand:a,DST:c}=n;if("function"!=typeof(u=n.hash)||!Number.isSafeInteger(u.outputLen))throw new Error("expected valid hash");var u;(0,qt.DO)(e),ir(t);const d=r.toString(2).length,f=Math.ceil((d+s)/8),l=t*i*f;let h;if("xmd"===a)h=function(e,t,n,r){(0,qt.DO)(e),ir(n),(t=or(t)).length>255&&(t=r((0,qt.Id)((0,qt.AI)("H2C-OVERSIZE-DST-"),t)));const{outputLen:s,blockLen:i}=r,o=Math.ceil(n/s);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=(0,qt.Id)(t,rr(t.length,1)),c=rr(0,i),u=rr(n,2),d=new Array(o),f=r((0,qt.Id)(c,e,u,rr(0,1),a));d[0]=r((0,qt.Id)(f,rr(1,1),a));for(let l=1;l<=o;l++){const e=[sr(f,d[l-1]),rr(l+1,1),a];d[l]=r((0,qt.Id)(...e))}return(0,qt.Id)(...d).slice(0,n)}(e,c,l,o);else if("xof"===a)h=function(e,t,n,r,s){if((0,qt.DO)(e),ir(n),(t=or(t)).length>255){const e=Math.ceil(2*r/8);t=s.create({dkLen:e}).update((0,qt.AI)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:n}).update(e).update(rr(n,2)).update(t).update(rr(t.length,1)).digest()}(e,c,l,s,o);else{if("_internal_pass"!==a)throw new Error('expand must be "xmd" or "xof"');h=e}const p=new Array(t);for(let m=0;m<t;m++){const e=new Array(i);for(let t=0;t<i;t++){const n=f*(t+m*i),s=h.subarray(n,n+f);e[t]=An(nr(s),r)}p[m]=e}return p}function cr(e,t){const n=t.map((e=>Array.from(e).reverse()));return(t,r)=>{const[s,i,o,a]=n.map((n=>n.reduce(((n,r)=>e.add(e.mul(n,t),r))))),[c,u]=On(e,[i,a],!0);return t=e.mul(s,c),r=e.mul(r,e.mul(o,u)),{x:t,y:r}}}const ur=(0,qt.AI)("HashToScalar-");function dr(e,t,n){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");function r(n){return e.fromAffine(t(n))}function s(t){const n=t.clearCofactor();return n.equals(e.ZERO)?e.ZERO:(n.assertValidity(),n)}return{defaults:n,hashToCurve(e,t){const i=ar(e,2,Object.assign({},n,t)),o=r(i[0]),a=r(i[1]);return s(o.add(a))},encodeToCurve(e,t){const i=n.encodeDST?{DST:n.encodeDST}:{};return s(r(ar(e,1,Object.assign({},n,i,t))[0]))},mapToCurve(e){if(!Array.isArray(e))throw new Error("expected array of bigints");for(const t of e)if("bigint"!=typeof t)throw new Error("expected array of bigints");return s(r(e))},hashToScalar(t,r){const s=e.Fn.ORDER;return ar(t,1,Object.assign({},n,{p:s,m:1,DST:ur},r))[0][0]}}}var fr=n(97713);const lr=(e,t)=>(e+(e>=0?t:-t)/wr)/t;function hr(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function pr(e,t){const n={};for(let r of Object.keys(t))n[r]=void 0===e[r]?t[r]:e[r];return Kt(n.lowS,"lowS"),Kt(n.prehash,"prehash"),void 0!==n.format&&hr(n.format),n}class mr extends Error{constructor(e=""){super(e)}}const gr={Err:mr,_tlv:{encode:(e,t)=>{const{Err:n}=gr;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Jt(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Jt(s.length/2|128):"";return Jt(e)+i+s+t},decode(e,t){const{Err:n}=gr;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++];let i=0;if(!!(128&s)){const e=127&s;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const o=t.subarray(r,r+e);if(o.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===o[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of o)i=i<<8|t;if(r+=e,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=s;const o=t.subarray(r,r+i);if(o.length!==i)throw new n("tlv.decode: wrong value length");return{v:o,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=gr;if(e<br)throw new t("integer: negative integers are not allowed");let n=Jt(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=gr;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return en(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=gr,s=sn("signature",e),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l:d}=r.decode(2,c);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=gr,r=t.encode(2,n.encode(e.r))+t.encode(2,n.encode(e.s));return t.encode(48,r)}},br=BigInt(0),yr=BigInt(1),wr=BigInt(2),_r=BigInt(3),vr=BigInt(4);function Cr(e,t){const{BYTES:n}=e;let r;if("bigint"==typeof t)r=t;else{let i=sn("private key",t);try{r=e.fromBytes(i)}catch(s){throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Er(e,t={}){const n=function(e,t,n={},r){if(void 0===r&&(r="edwards"===e),!t||"object"!=typeof t)throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const e=t[a];if(!("bigint"==typeof e&&e>Hn))throw new Error(`CURVE.${a} must be positive bigint`)}const s=tr(t.p,n.Fp,r),i=tr(t.n,n.Fn,r),o=["Gx","Gy","a","weierstrass"===e?"b":"d"];for(const a of o)if(!s.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:s,Fn:i}}("weierstrass",e,t),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;fn(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!r.is0(i.a)||"bigint"!=typeof c.beta||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=Ir(r,s);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}const f=t.toBytes||function(e,t,n){const{x:s,y:i}=t.toAffine(),o=r.toBytes(s);if(Kt(n,"isCompressed"),n){d();const e=!r.isOdd(i);return(0,qt.Id)(Ar(e),o)}return(0,qt.Id)(Uint8Array.of(4),o,r.toBytes(i))},l=t.fromBytes||function(e){Yt(e,void 0,"Point");const{publicKey:t,publicKeyUncompressed:n}=u,s=e.length,i=e[0],o=e.subarray(1);if(s!==t||2!==i&&3!==i){if(s===n&&4===i){const e=r.BYTES,t=r.fromBytes(o.subarray(0,e)),n=r.fromBytes(o.subarray(e,2*e));if(!p(t,n))throw new Error("bad point: is not on curve");return{x:t,y:n}}throw new Error(`bad point: got length ${s}, expected compressed=${t} or uncompressed=${n}`)}{const e=r.fromBytes(o);if(!r.isValid(e))throw new Error("bad point: is not on curve, wrong x");const t=h(e);let n;try{n=r.sqrt(t)}catch(a){const e=a instanceof Error?": "+a.message:"";throw new Error("bad point: is not on curve, sqrt error"+e)}d();return 1==(1&i)!==r.isOdd(n)&&(n=r.neg(n)),{x:e,y:n}}};function h(e){const t=r.sqr(e),n=r.mul(t,e);return r.add(r.add(n,r.mul(e,i.a)),i.b)}function p(e,t){const n=r.sqr(t),s=h(e);return r.eql(n,s)}if(!p(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const m=r.mul(r.pow(i.a,_r),vr),g=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(m,g)))throw new Error("bad curve params: a or b");function b(e,t,n=!1){if(!r.isValid(t)||n&&r.is0(t))throw new Error(`bad point coordinate ${e}`);return t}function y(e){if(!(e instanceof E))throw new Error("ProjectivePoint expected")}function w(e){if(!c||!c.basises)throw new Error("no endo");return function(e,t,n){const[[r,s],[i,o]]=t,a=lr(o*e,n),c=lr(-s*e,n);let u=e-a*r-c*i,d=-a*s-c*o;const f=u<br,l=d<br;f&&(u=-u),l&&(d=-d);const h=dn(Math.ceil(cn(n)/2))+yr;if(u<br||u>=h||d<br||d>=h)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:f,k1:u,k2neg:l,k2:d}}(e,c.basises,s.ORDER)}const _=hn(((e,t)=>{const{X:n,Y:s,Z:i}=e;if(r.eql(i,r.ONE))return{x:n,y:s};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(i));const a=r.mul(n,t),c=r.mul(s,t),u=r.mul(i,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),v=hn((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.Y))return;throw new Error("bad point: ZERO")}const{x:n,y:s}=e.toAffine();if(!r.isValid(n)||!r.isValid(s))throw new Error("bad point: x or y not field elements");if(!p(n,s))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));function C(e,t,n,s,i){return n=new E(r.mul(n.X,e),n.Y,n.Z),t=Zn(s,t),n=Zn(i,n),t.add(n)}class E{constructor(e,t,n){this.X=b("x",e),this.Y=b("y",t,!0),this.Z=b("z",n),Object.freeze(this)}static CURVE(){return i}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof E)throw new Error("projective point not allowed");return r.is0(t)&&r.is0(n)?E.ZERO:new E(t,n,r.ONE)}static fromBytes(e){const t=E.fromAffine(l(Yt(e,void 0,"point")));return t.assertValidity(),t}static fromHex(e){return E.fromBytes(sn("pointHex",e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return S.createCache(this,e),t||this.multiply(_r),this}assertValidity(){v(this)}hasEvenY(){const{y:e}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(e)}equals(e){y(e);const{X:t,Y:n,Z:s}=this,{X:i,Y:o,Z:a}=e,c=r.eql(r.mul(t,a),r.mul(i,s)),u=r.eql(r.mul(n,a),r.mul(o,s));return c&&u}negate(){return new E(this.X,r.neg(this.Y),this.Z)}double(){const{a:e,b:t}=i,n=r.mul(t,_r),{X:s,Y:o,Z:a}=this;let c=r.ZERO,u=r.ZERO,d=r.ZERO,f=r.mul(s,s),l=r.mul(o,o),h=r.mul(a,a),p=r.mul(s,o);return p=r.add(p,p),d=r.mul(s,a),d=r.add(d,d),c=r.mul(e,d),u=r.mul(n,h),u=r.add(c,u),c=r.sub(l,u),u=r.add(l,u),u=r.mul(c,u),c=r.mul(p,c),d=r.mul(n,d),h=r.mul(e,h),p=r.sub(f,h),p=r.mul(e,p),p=r.add(p,d),d=r.add(f,f),f=r.add(d,f),f=r.add(f,h),f=r.mul(f,p),u=r.add(u,f),h=r.mul(o,a),h=r.add(h,h),f=r.mul(h,p),c=r.sub(c,f),d=r.mul(h,l),d=r.add(d,d),d=r.add(d,d),new E(c,u,d)}add(e){y(e);const{X:t,Y:n,Z:s}=this,{X:o,Y:a,Z:c}=e;let u=r.ZERO,d=r.ZERO,f=r.ZERO;const l=i.a,h=r.mul(i.b,_r);let p=r.mul(t,o),m=r.mul(n,a),g=r.mul(s,c),b=r.add(t,n),w=r.add(o,a);b=r.mul(b,w),w=r.add(p,m),b=r.sub(b,w),w=r.add(t,s);let _=r.add(o,c);return w=r.mul(w,_),_=r.add(p,g),w=r.sub(w,_),_=r.add(n,s),u=r.add(a,c),_=r.mul(_,u),u=r.add(m,g),_=r.sub(_,u),f=r.mul(l,w),u=r.mul(h,g),f=r.add(u,f),u=r.sub(m,f),f=r.add(m,f),d=r.mul(u,f),m=r.add(p,p),m=r.add(m,p),g=r.mul(l,g),w=r.mul(h,w),m=r.add(m,g),g=r.sub(p,g),g=r.mul(l,g),w=r.add(w,g),p=r.mul(m,w),d=r.add(d,p),p=r.mul(_,w),u=r.mul(b,u),u=r.sub(u,p),p=r.mul(b,m),f=r.mul(_,f),f=r.add(f,p),new E(u,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(E.ZERO)}multiply(e){const{endo:n}=t;if(!s.isValidNot0(e))throw new Error("invalid scalar: out of range");let r,i;const o=e=>S.cached(this,e,(e=>Vn(E,e)));if(n){const{k1neg:t,k1:s,k2neg:a,k2:c}=w(e),{p:u,f:d}=o(s),{p:f,f:l}=o(c);i=d.add(l),r=C(n.beta,u,f,t,a)}else{const{p:t,f:n}=o(e);r=t,i=n}return Vn(E,[r,i])[0]}multiplyUnsafe(e){const{endo:n}=t,r=this;if(!s.isValid(e))throw new Error("invalid scalar: out of range");if(e===br||r.is0())return E.ZERO;if(e===yr)return r;if(S.hasCache(this))return this.multiply(e);if(n){const{k1neg:t,k1:s,k2neg:i,k2:o}=w(e),{p1:a,p2:c}=function(e,t,n,r){let s=t,i=e.ZERO,o=e.ZERO;for(;n>Hn||r>Hn;)n&$n&&(i=i.add(s)),r&$n&&(o=o.add(s)),s=s.double(),n>>=$n,r>>=$n;return{p1:i,p2:o}}(E,r,s,o);return C(n.beta,a,c,t,i)}return S.unsafe(r,e)}multiplyAndAddUnsafe(e,t,n){const r=this.multiplyUnsafe(t).add(e.multiplyUnsafe(n));return r.is0()?void 0:r}toAffine(e){return _(this,e)}isTorsionFree(){const{isTorsionFree:e}=t;return o===yr||(e?e(E,this):S.unsafe(this,a).is0())}clearCofactor(){const{clearCofactor:e}=t;return o===yr?this:e?e(E,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(e=!0){return Kt(e,"isCompressed"),this.assertValidity(),f(E,this,e)}toHex(e=!0){return(0,qt.My)(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(e=!0){return this.toBytes(e)}_setWindowSize(e){this.precompute(e)}static normalizeZ(e){return Vn(E,e)}static msm(e,t){return function(e,t,n,r){zn(n,e),Qn(r,t);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=cn(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=dn(c),d=new Array(Number(u)+1).fill(o);let f=o;for(let l=Math.floor((t.BITS-1)/c)*c;l>=0;l-=c){d.fill(o);for(let t=0;t<i;t++){const e=r[t],s=Number(e>>BigInt(l)&u);d[s]=d[s].add(n[t])}let e=o;for(let t=d.length-1,n=o;t>0;t--)n=n.add(d[t]),e=e.add(n);if(f=f.add(e),0!==l)for(let t=0;t<c;t++)f=f.double()}return f}(E,s,e,t)}static fromPrivateKey(e){return E.BASE.multiply(Cr(s,e))}}E.BASE=new E(i.Gx,i.Gy,r.ONE),E.ZERO=new E(r.ZERO,r.ONE,r.ZERO),E.Fp=r,E.Fn=s;const A=s.BITS,S=new er(E,t.endo?Math.ceil(A/2):A);return E.BASE.precompute(8),E}function Ar(e){return Uint8Array.of(e?2:3)}function Sr(e,t){Un(e);const{A:n,B:r,Z:s}=t;if(!e.isValid(n)||!e.isValid(r)||!e.isValid(s))throw new Error("mapToCurveSimpleSWU: invalid opts");const i=function(e,t){const n=e.ORDER;let r=br;for(let p=n-yr;p%wr===br;p/=wr)r+=yr;const s=r,i=wr<<s-yr-yr,o=i*wr,a=(n-yr)/o,c=(a-yr)/wr,u=o-yr,d=i,f=e.pow(t,a),l=e.pow(t,(a+yr)/wr);let h=(t,n)=>{let r=f,i=e.pow(n,u),o=e.sqr(i);o=e.mul(o,n);let a=e.mul(t,o);a=e.pow(a,c),a=e.mul(a,i),i=e.mul(a,n),o=e.mul(a,t);let h=e.mul(o,i);a=e.pow(h,d);let p=e.eql(a,e.ONE);i=e.mul(o,l),a=e.mul(h,r),o=e.cmov(i,o,p),h=e.cmov(a,h,p);for(let c=s;c>yr;c--){let t=c-wr;t=wr<<t-yr;let n=e.pow(h,t);const s=e.eql(n,e.ONE);i=e.mul(o,r),r=e.mul(r,r),n=e.mul(h,r),o=e.cmov(i,o,s),h=e.cmov(n,h,s)}return{isValid:p,value:o}};if(e.ORDER%vr===_r){const n=(e.ORDER-_r)/vr,r=e.sqrt(e.neg(t));h=(t,s)=>{let i=e.sqr(s);const o=e.mul(t,s);i=e.mul(i,o);let a=e.pow(i,n);a=e.mul(a,o);const c=e.mul(a,r),u=e.mul(e.sqr(a),s),d=e.eql(u,t);return{isValid:d,value:e.cmov(c,a,d)}}}return h}(e,s);if(!e.isOdd)throw new Error("Field does not have .isOdd()");return t=>{let o,a,c,u,d,f,l,h;o=e.sqr(t),o=e.mul(o,s),a=e.sqr(o),a=e.add(a,o),c=e.add(a,e.ONE),c=e.mul(c,r),u=e.cmov(s,e.neg(a),!e.eql(a,e.ZERO)),u=e.mul(u,n),a=e.sqr(c),f=e.sqr(u),d=e.mul(f,n),a=e.add(a,d),a=e.mul(a,c),f=e.mul(f,u),d=e.mul(f,r),a=e.add(a,d),l=e.mul(o,c);const{isValid:p,value:m}=i(a,f);h=e.mul(o,t),h=e.mul(h,m),l=e.cmov(l,c,p),h=e.cmov(h,m,p);const g=e.isOdd(t)===e.isOdd(h);h=e.cmov(e.neg(h),h,g);const b=On(e,[u],!0)[0];return l=e.mul(l,b),{x:l,y:h}}}function Ir(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function kr(e,t,n={}){(0,qt.sd)(t),fn(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||qt.po,s=n.hmac||((e,...n)=>(0,fr.w)(t,e,(0,qt.Id)(...n))),{Fp:i,Fn:o}=e,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:d,getSharedSecret:f,utils:l,lengths:h}=function(e,t={}){const{Fn:n}=e,r=t.randomBytes||qt.po,s=Object.assign(Ir(e.Fp,n),{seed:Dn(n.ORDER)});function i(e){try{return!!Cr(n,e)}catch(t){return!1}}function o(e=r(s.seed)){return Mn(Yt(e,s.seed,"seed"),n.ORDER)}function a(t,r=!0){return e.BASE.multiply(Cr(n,t)).toBytes(r)}function c(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;const{secretKey:r,publicKey:i,publicKeyUncompressed:o}=s;if(n.allowedLengths||r===i)return;const a=sn("key",t).length;return a===i||a===o}const u={isValidSecretKey:i,isValidPublicKey:function(t,n){const{publicKey:r,publicKeyUncompressed:i}=s;try{const s=t.length;return!(!0===n&&s!==r||!1===n&&s!==i||!e.fromBytes(t))}catch(o){return!1}},randomSecretKey:o,isValidPrivateKey:i,randomPrivateKey:o,normPrivateKeyToScalar:e=>Cr(n,e),precompute:(t=8,n=e.BASE)=>n.precompute(t,!1)};return Object.freeze({getPublicKey:a,getSharedSecret:function(t,r,s=!0){if(!0===c(t))throw new Error("first arg must be private key");if(!1===c(r))throw new Error("second arg must be public key");const i=Cr(n,t);return e.fromHex(r).multiply(i).toBytes(s)},keygen:function(e){const t=o(e);return{secretKey:t,publicKey:a(t)}},Point:e,utils:u,lengths:s})}(e,n),p={prehash:!1,lowS:"boolean"==typeof n.lowS&&n.lowS,format:void 0,extraEntropy:!1},m="compact";function g(e){return e>a>>yr}function b(e,t){if(!o.isValidNot0(t))throw new Error(`invalid signature ${e}: out of range 1..Point.Fn.ORDER`);return t}class y{constructor(e,t,n){this.r=b("r",e),this.s=b("s",t),null!=n&&(this.recovery=n),Object.freeze(this)}static fromBytes(e,t=m){let n;if(function(e,t){hr(t);const n=h.signature;Yt(e,"compact"===t?n:"recovered"===t?n+1:void 0,`${t} signature`)}(e,t),"der"===t){const{r:t,s:n}=gr.toSig(Yt(e));return new y(t,n)}"recovered"===t&&(n=e[0],t="compact",e=e.subarray(1));const r=o.BYTES,s=e.subarray(0,r),i=e.subarray(r,2*r);return new y(o.fromBytes(s),o.fromBytes(i),n)}static fromHex(e,t){return this.fromBytes((0,qt.aT)(e),t)}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(t){const n=i.ORDER,{r:r,s:s,recovery:c}=this;if(null==c||![0,1,2,3].includes(c))throw new Error("recovery id invalid");if(a*wr<n&&c>1)throw new Error("recovery id is ambiguous for h>1 curve");const u=2===c||3===c?r+a:r;if(!i.isValid(u))throw new Error("recovery id 2 or 3 invalid");const d=i.toBytes(u),f=e.fromBytes((0,qt.Id)(Ar(0==(1&c)),d)),l=o.inv(u),h=_(sn("msgHash",t)),p=o.create(-h*l),m=o.create(s*l),g=e.BASE.multiplyUnsafe(p).add(f.multiplyUnsafe(m));if(g.is0())throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return g(this.s)}toBytes(e=m){if(hr(e),"der"===e)return(0,qt.aT)(gr.hexFromSig(this));const t=o.toBytes(this.r),n=o.toBytes(this.s);if("recovered"===e){if(null==this.recovery)throw new Error("recovery bit must be present");return(0,qt.Id)(Uint8Array.of(this.recovery),t,n)}return(0,qt.Id)(t,n)}toHex(e){return(0,qt.My)(this.toBytes(e))}assertValidity(){}static fromCompact(e){return y.fromBytes(sn("sig",e),"compact")}static fromDER(e){return y.fromBytes(sn("sig",e),"der")}normalizeS(){return this.hasHighS()?new y(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,qt.My)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,qt.My)(this.toBytes("compact"))}}const w=n.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const t=en(e),n=8*e.length-c;return n>0?t>>BigInt(n):t},_=n.bits2int_modN||function(e){return o.create(w(e))},v=dn(c);function C(e){return function(e,t,n,r){if(!an(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}("num < 2^"+c,e,br,v),o.toBytes(e)}function E(e,n){return Yt(e,void 0,"message"),n?Yt(t(e),void 0,"prehashed message"):e}return Object.freeze({keygen:u,getPublicKey:d,getSharedSecret:f,utils:l,lengths:h,Point:e,sign:function(n,i,a={}){n=sn("message",n);const{seed:c,k2sig:u}=function(t,n,s){if(["recovered","canonical"].some((e=>e in s)))throw new Error("sign() legacy options not supported");const{lowS:i,prehash:a,extraEntropy:c}=pr(s,p);t=E(t,a);const u=_(t),d=Cr(o,n),f=[C(d),C(u)];if(null!=c&&!1!==c){const e=!0===c?r(h.secretKey):c;f.push(sn("extraEntropy",e))}const l=(0,qt.Id)(...f),m=u;return{seed:l,k2sig:function(t){const n=w(t);if(!o.isValidNot0(n))return;const r=o.inv(n),s=e.BASE.multiply(n).toAffine(),a=o.create(s.x);if(a===br)return;const c=o.create(r*o.create(m+a*d));if(c===br)return;let u=(s.x===a?0:2)|Number(s.y&yr),f=c;return i&&g(c)&&(f=o.neg(c),u^=1),new y(a,f,u)}}}(n,i,a);return function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");const r=e=>new Uint8Array(e),s=e=>Uint8Array.of(e);let i=r(e),o=r(e),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...e)=>n(o,i,...e),d=(e=r(0))=>{o=u(s(0),e),i=u(),0!==e.length&&(o=u(s(1),e),i=u())},f=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){i=u();const t=i.slice();n.push(t),e+=i.length}return(0,qt.Id)(...n)};return(e,t)=>{let n;for(c(),d(e);!(n=t(f()));)d();return c(),n}}(t.outputLen,o.BYTES,s)(c,u)},verify:function(t,n,r,s={}){const{lowS:i,prehash:a,format:c}=pr(s,p);if(r=sn("publicKey",r),n=E(sn("message",n),a),"strict"in s)throw new Error("options.strict was renamed to lowS");const u=void 0===c?function(e){let t;const n="string"==typeof e||(0,qt.aY)(e),r=!n&&null!==e&&"object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!n&&!r)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(r)t=new y(e.r,e.s);else if(n){try{t=y.fromBytes(sn("sig",e),"der")}catch(s){if(!(s instanceof gr.Err))throw s}if(!t)try{t=y.fromBytes(sn("sig",e),"compact")}catch(i){return!1}}return t||!1}(t):y.fromBytes(sn("sig",t),c);if(!1===u)return!1;try{const t=e.fromBytes(r);if(i&&u.hasHighS())return!1;const{r:s,s:a}=u,c=_(n),d=o.inv(a),f=o.create(c*d),l=o.create(s*d),h=e.BASE.multiplyUnsafe(f).add(t.multiplyUnsafe(l));if(h.is0())return!1;return o.create(h.x)===s}catch(d){return!1}},recoverPublicKey:function(e,t,n={}){const{prehash:r}=pr(n,p);return t=E(t,r),y.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:y,hash:t})}function xr(e){const{CURVE:t,curveOpts:n}=Nr(e);return function(e,t){const{Fp:n,Fn:r}=t;function s(e){return an(e,yr,r.ORDER)}const i=function(e,t,n){function r(r){const s=e.sqr(r),i=e.mul(s,r);return e.add(e.add(i,e.mul(r,t)),n)}return r}(n,e.a,e.b);return Object.assign({},{CURVE:e,Point:t,ProjectivePoint:t,normPrivateKeyToScalar:e=>Cr(r,e),weierstrassEquation:i,isWithinCurveOrder:s})}(e,Er(t,n))}function Nr(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map((e=>Math.ceil(e/2))))):void 0;return{CURVE:t,curveOpts:{Fp:n,Fn:Ln(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes}}}function Br(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:s}=function(e){const{CURVE:t,curveOpts:n}=Nr(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}(e);return function(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,Tn(n.Fn.ORDER,n.Fn.BITS))})}(e,kr(Er(t,n),r,s))}const Pr=BigInt(0),Ur=BigInt(1),Rr=BigInt(2),Or=BigInt(3);function Gr(e){if(!Array.isArray(e)||0===e.length)throw new Error("expected non-empty array")}function Tr(e,t,n,r){const{Fp2:s,Fp12:i}=e,{twistType:o,ateLoopSize:a,xNegative:c,postPrecompute:u}=r;let d;if("multiplicative"===o)d=(e,t,n,r,o,a)=>i.mul014(r,e,s.mul(t,o),s.mul(n,a));else{if("divisive"!==o)throw new Error("bls: unknown twist type");d=(e,t,n,r,o,a)=>i.mul034(r,s.mul(n,a),s.mul(t,o),e)}const f=s.div(s.ONE,s.mul(s.ONE,Rr));function l(e,t,n,r){const i=s.sqr(n),o=s.sqr(r),a=s.mulByB(s.mul(o,Or)),c=s.mul(a,Or),u=s.sub(s.sub(s.sqr(s.add(n,r)),o),i),d=s.sub(a,i),l=s.mul(s.sqr(t),Or),h=s.neg(u);return e.push([d,l,h]),{Rx:t=s.mul(s.mul(s.mul(s.sub(i,c),t),n),f),Ry:n=s.sub(s.sqr(s.mul(s.add(i,c),f)),s.mul(s.sqr(a),Or)),Rz:r=s.mul(i,u)}}function h(e,t,n,r,i,o){const a=s.sub(n,s.mul(o,r)),c=s.sub(t,s.mul(i,r)),u=s.sub(s.mul(a,i),s.mul(c,o)),d=s.neg(a),f=c;e.push([u,d,f]);const l=s.sqr(c),h=s.mul(l,c),p=s.mul(l,t),m=s.add(s.sub(h,s.mul(p,Rr)),s.mul(s.sqr(a),r));return{Rx:t=s.mul(c,m),Ry:n=s.sub(s.mul(s.sub(p,m),a),s.mul(h,n)),Rz:r=s.mul(r,h)}}const p=function(e){const t=[];for(;e>Ur;e>>=Ur)(e&Ur)===Pr?t.unshift(0):(e&Or)===Or?(t.unshift(-1),e+=Ur):t.unshift(1);return t}(a),m=hn((e=>{const t=e,{x:n,y:r}=t.toAffine(),i=n,o=r,a=s.neg(r);let c=i,d=o,f=s.ONE;const m=[];for(const s of p){const e=[];({Rx:c,Ry:d,Rz:f}=l(e,c,d,f)),s&&({Rx:c,Ry:d,Rz:f}=h(e,c,d,f,i,-1===s?a:o)),m.push(e)}if(u){const e=m[m.length-1];u(c,d,f,i,o,h.bind(null,e))}return m}));function g(e,t=!1){let n=i.ONE;if(e.length){const t=e[0][0].length;for(let r=0;r<t;r++){n=i.sqr(n);for(const[t,s,i]of e)for(const[e,o,a]of t[r])n=d(e,o,a,n,s,i)}}return c&&(n=i.conjugate(n)),t?i.finalExponentiate(n):n}function b(e,r=!0){const s=[];Vn(t,e.map((({g1:e})=>e))),Vn(n,e.map((({g2:e})=>e)));for(const{g1:t,g2:n}of e){if(t.is0()||n.is0())throw new Error("pairing is not available for ZERO point");t.assertValidity(),n.assertValidity();const e=t.toAffine();s.push([m(n),e.x,e.y])}return g(s,r)}return{Fp12:i,millerLoopBatch:g,pairing:function(e,t,n=!0){return b([{g1:e,g2:t}],n)},pairingBatch:b,calcPairingPrecomputes:m}}function Lr(e,t,n,r,s){const{Fp12:i,pairingBatch:o}=e;function a(e){return e instanceof t.Point?e:t.Point.fromHex(e)}function c(e){return e instanceof n.Point?e:n.Point.fromHex(e)}function u(e){if(!(e instanceof n.Point))throw new Error(`expected valid message hashed to ${s?"G1":"G2"} curve`);return e}const d=s?(e,t)=>({g1:t,g2:e}):(e,t)=>({g1:e,g2:t});return{getPublicKey(e){const n=Cr(t.Point.Fn,e);return t.Point.BASE.multiply(n)},sign(e,n,r){if(null!=r)throw new Error("sign() expects 2 arguments");const s=Cr(t.Point.Fn,n);return u(e).assertValidity(),e.multiply(s)},verify(e,n,r,s){if(null!=s)throw new Error("verify() expects 3 arguments");e=c(e);const f=(r=a(r)).negate(),l=t.Point.BASE,h=u(n),p=e,m=o([d(f,h),d(l,p)]);return i.eql(m,i.ONE)},verifyBatch(e,n,r){if(Gr(n),r.length!==n.length)throw new Error("amount of public keys and messages should be equal");const s=c(e),u=n,f=r.map(a),l=new Map;for(let t=0;t<f.length;t++){const e=f[t],n=u[t];let r=l.get(n);void 0===r&&(r=[],l.set(n,r)),r.push(e)}const h=[],p=t.Point.BASE;try{for(const[e,t]of l){const n=t.reduce(((e,t)=>e.add(t)));h.push(d(n,e))}return h.push(d(p.negate(),s)),i.eql(o(h),i.ONE)}catch{return!1}},aggregatePublicKeys(e){Gr(e);const n=(e=e.map((e=>a(e)))).reduce(((e,t)=>e.add(t)),t.Point.ZERO);return n.assertValidity(),n},aggregateSignatures(e){Gr(e);const t=(e=e.map((e=>c(e)))).reduce(((e,t)=>e.add(t)),n.Point.ZERO);return t.assertValidity(),t},hash(e,t){(0,qt.DO)(e);const r=t?{DST:t}:void 0;return n.hashToCurve(e,r)},Signature:r}}const Fr=BigInt(0),Dr=BigInt(1),Mr=BigInt(2),Hr=BigInt(3);function $r(e,t,n,r,s=1,i){const o=BigInt(void 0===i?r:i),a=n**BigInt(r),c=[];for(let u=0;u<s;u++){const s=BigInt(u+1),i=[];for(let c=0,u=Dr;c<r;c++){const r=(s*u-s)/o%a;i.push(e.pow(t,r)),u*=n}c.push(i)}return c}const Zr=(e,t)=>{if(2!==t.length)throw new Error("invalid tuple");const n=t.map((t=>e.create(t)));return{c0:n[0],c1:n[1]}};class Vr{constructor(e,t={}){this.MASK=Dr;const n=e.ORDER,r=n*n;this.Fp=e,this.ORDER=r,this.BITS=cn(r),this.BYTES=Math.ceil(cn(r)/8),this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO},this.Fp_NONRESIDUE=e.create(t.NONRESIDUE||BigInt(-1)),this.Fp_div2=e.div(e.ONE,Mr),this.NONRESIDUE=Zr(e,t.FP2_NONRESIDUE),this.FROBENIUS_COEFFICIENTS=$r(e,this.Fp_NONRESIDUE,e.ORDER,2)[0],this.mulByB=t.Fp2mulByB,Object.seal(this)}fromBigTuple(e){return Zr(this.Fp,e)}create(e){return e}isValid({c0:e,c1:t}){function n(e,t){return"bigint"==typeof e&&Fr<=e&&e<t}return n(e,this.ORDER)&&n(t,this.ORDER)}is0({c0:e,c1:t}){return this.Fp.is0(e)&&this.Fp.is0(t)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}eql({c0:e,c1:t},{c0:n,c1:r}){return this.Fp.eql(e,n)&&this.Fp.eql(t,r)}neg({c0:e,c1:t}){return{c0:this.Fp.neg(e),c1:this.Fp.neg(t)}}pow(e,t){return Rn(this,e,t)}invertBatch(e){return On(this,e)}add(e,t){const{c0:n,c1:r}=e,{c0:s,c1:i}=t;return{c0:this.Fp.add(n,s),c1:this.Fp.add(r,i)}}sub({c0:e,c1:t},{c0:n,c1:r}){return{c0:this.Fp.sub(e,n),c1:this.Fp.sub(t,r)}}mul({c0:e,c1:t},n){const{Fp:r}=this;if("bigint"==typeof n)return{c0:r.mul(e,n),c1:r.mul(t,n)};const{c0:s,c1:i}=n;let o=r.mul(e,s),a=r.mul(t,i);return{c0:r.sub(o,a),c1:r.sub(r.mul(r.add(e,t),r.add(s,i)),r.add(o,a))}}sqr({c0:e,c1:t}){const{Fp:n}=this,r=n.add(e,t),s=n.sub(e,t),i=n.add(e,e);return{c0:n.mul(r,s),c1:n.mul(i,t)}}addN(e,t){return this.add(e,t)}subN(e,t){return this.sub(e,t)}mulN(e,t){return this.mul(e,t)}sqrN(e){return this.sqr(e)}div(e,t){const{Fp:n}=this;return this.mul(e,"bigint"==typeof t?n.inv(n.create(t)):this.inv(t))}inv({c0:e,c1:t}){const{Fp:n}=this,r=n.inv(n.create(e*e+t*t));return{c0:n.mul(r,n.create(e)),c1:n.mul(r,n.create(-t))}}sqrt(e){const{Fp:t}=this,n=this,{c0:r,c1:s}=e;if(t.is0(s))return 1===Gn(t,r)?n.create({c0:t.sqrt(r),c1:t.ZERO}):n.create({c0:t.ZERO,c1:t.sqrt(t.div(r,this.Fp_NONRESIDUE))});const i=t.sqrt(t.sub(t.sqr(r),t.mul(t.sqr(s),this.Fp_NONRESIDUE)));let o=t.mul(t.add(i,r),this.Fp_div2);-1===Gn(t,o)&&(o=t.sub(o,i));const a=t.sqrt(o),c=n.create({c0:a,c1:t.div(t.mul(s,this.Fp_div2),a)});if(!n.eql(n.sqr(c),e))throw new Error("Cannot find square root");const u=c,d=n.neg(u),{re:f,im:l}=n.reim(u),{re:h,im:p}=n.reim(d);return l>p||l===p&&f>h?u:d}isOdd(e){const{re:t,im:n}=this.reim(e);return BigInt(t%Mr||t===Fr&&n%Mr)==Dr}fromBytes(e){const{Fp:t}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);return{c0:t.fromBytes(e.subarray(0,t.BYTES)),c1:t.fromBytes(e.subarray(t.BYTES))}}toBytes({c0:e,c1:t}){return(0,qt.Id)(this.Fp.toBytes(e),this.Fp.toBytes(t))}cmov({c0:e,c1:t},{c0:n,c1:r},s){return{c0:this.Fp.cmov(e,n,s),c1:this.Fp.cmov(t,r,s)}}reim({c0:e,c1:t}){return{re:e,im:t}}Fp4Square(e,t){const n=this,r=n.sqr(e),s=n.sqr(t);return{first:n.add(n.mulByNonresidue(s),r),second:n.sub(n.sub(n.sqr(n.add(e,t)),r),s)}}mulByNonresidue({c0:e,c1:t}){return this.mul({c0:e,c1:t},this.NONRESIDUE)}frobeniusMap({c0:e,c1:t},n){return{c0:e,c1:this.Fp.mul(t,this.FROBENIUS_COEFFICIENTS[n%2])}}}class Wr{constructor(e){this.MASK=Dr,this.Fp2=e,this.ORDER=e.ORDER,this.BITS=3*e.BITS,this.BYTES=3*e.BYTES,this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO,c2:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO,c2:e.ZERO};const{Fp:t}=e,n=$r(e,e.NONRESIDUE,t.ORDER,6,2,3);this.FROBENIUS_COEFFICIENTS_1=n[0],this.FROBENIUS_COEFFICIENTS_2=n[1],Object.seal(this)}add({c0:e,c1:t,c2:n},{c0:r,c1:s,c2:i}){const{Fp2:o}=this;return{c0:o.add(e,r),c1:o.add(t,s),c2:o.add(n,i)}}sub({c0:e,c1:t,c2:n},{c0:r,c1:s,c2:i}){const{Fp2:o}=this;return{c0:o.sub(e,r),c1:o.sub(t,s),c2:o.sub(n,i)}}mul({c0:e,c1:t,c2:n},r){const{Fp2:s}=this;if("bigint"==typeof r)return{c0:s.mul(e,r),c1:s.mul(t,r),c2:s.mul(n,r)};const{c0:i,c1:o,c2:a}=r,c=s.mul(e,i),u=s.mul(t,o),d=s.mul(n,a);return{c0:s.add(c,s.mulByNonresidue(s.sub(s.mul(s.add(t,n),s.add(o,a)),s.add(u,d)))),c1:s.add(s.sub(s.mul(s.add(e,t),s.add(i,o)),s.add(c,u)),s.mulByNonresidue(d)),c2:s.sub(s.add(u,s.mul(s.add(e,n),s.add(i,a))),s.add(c,d))}}sqr({c0:e,c1:t,c2:n}){const{Fp2:r}=this;let s=r.sqr(e),i=r.mul(r.mul(e,t),Mr),o=r.mul(r.mul(t,n),Mr),a=r.sqr(n);return{c0:r.add(r.mulByNonresidue(o),s),c1:r.add(r.mulByNonresidue(a),i),c2:r.sub(r.sub(r.add(r.add(i,r.sqr(r.add(r.sub(e,t),n))),o),s),a)}}addN(e,t){return this.add(e,t)}subN(e,t){return this.sub(e,t)}mulN(e,t){return this.mul(e,t)}sqrN(e){return this.sqr(e)}create(e){return e}isValid({c0:e,c1:t,c2:n}){const{Fp2:r}=this;return r.isValid(e)&&r.isValid(t)&&r.isValid(n)}is0({c0:e,c1:t,c2:n}){const{Fp2:r}=this;return r.is0(e)&&r.is0(t)&&r.is0(n)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}neg({c0:e,c1:t,c2:n}){const{Fp2:r}=this;return{c0:r.neg(e),c1:r.neg(t),c2:r.neg(n)}}eql({c0:e,c1:t,c2:n},{c0:r,c1:s,c2:i}){const{Fp2:o}=this;return o.eql(e,r)&&o.eql(t,s)&&o.eql(n,i)}sqrt(e){return ln()}div(e,t){const{Fp2:n}=this,{Fp:r}=n;return this.mul(e,"bigint"==typeof t?r.inv(r.create(t)):this.inv(t))}pow(e,t){return Rn(this,e,t)}invertBatch(e){return On(this,e)}inv({c0:e,c1:t,c2:n}){const{Fp2:r}=this;let s=r.sub(r.sqr(e),r.mulByNonresidue(r.mul(n,t))),i=r.sub(r.mulByNonresidue(r.sqr(n)),r.mul(e,t)),o=r.sub(r.sqr(t),r.mul(e,n)),a=r.inv(r.add(r.mulByNonresidue(r.add(r.mul(n,i),r.mul(t,o))),r.mul(e,s)));return{c0:r.mul(a,s),c1:r.mul(a,i),c2:r.mul(a,o)}}fromBytes(e){const{Fp2:t}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);const n=t.BYTES;return{c0:t.fromBytes(e.subarray(0,n)),c1:t.fromBytes(e.subarray(n,2*n)),c2:t.fromBytes(e.subarray(2*n))}}toBytes({c0:e,c1:t,c2:n}){const{Fp2:r}=this;return(0,qt.Id)(r.toBytes(e),r.toBytes(t),r.toBytes(n))}cmov({c0:e,c1:t,c2:n},{c0:r,c1:s,c2:i},o){const{Fp2:a}=this;return{c0:a.cmov(e,r,o),c1:a.cmov(t,s,o),c2:a.cmov(n,i,o)}}fromBigSix(e){const{Fp2:t}=this;if(!Array.isArray(e)||6!==e.length)throw new Error("invalid Fp6 usage");return{c0:t.fromBigTuple(e.slice(0,2)),c1:t.fromBigTuple(e.slice(2,4)),c2:t.fromBigTuple(e.slice(4,6))}}frobeniusMap({c0:e,c1:t,c2:n},r){const{Fp2:s}=this;return{c0:s.frobeniusMap(e,r),c1:s.mul(s.frobeniusMap(t,r),this.FROBENIUS_COEFFICIENTS_1[r%6]),c2:s.mul(s.frobeniusMap(n,r),this.FROBENIUS_COEFFICIENTS_2[r%6])}}mulByFp2({c0:e,c1:t,c2:n},r){const{Fp2:s}=this;return{c0:s.mul(e,r),c1:s.mul(t,r),c2:s.mul(n,r)}}mulByNonresidue({c0:e,c1:t,c2:n}){const{Fp2:r}=this;return{c0:r.mulByNonresidue(n),c1:e,c2:t}}mul1({c0:e,c1:t,c2:n},r){const{Fp2:s}=this;return{c0:s.mulByNonresidue(s.mul(n,r)),c1:s.mul(e,r),c2:s.mul(t,r)}}mul01({c0:e,c1:t,c2:n},r,s){const{Fp2:i}=this;let o=i.mul(e,r),a=i.mul(t,s);return{c0:i.add(i.mulByNonresidue(i.sub(i.mul(i.add(t,n),s),a)),o),c1:i.sub(i.sub(i.mul(i.add(r,s),i.add(e,t)),o),a),c2:i.add(i.sub(i.mul(i.add(e,n),r),o),a)}}}class jr{constructor(e,t){this.MASK=Dr;const{Fp2:n}=e,{Fp:r}=n;this.Fp6=e,this.ORDER=n.ORDER,this.BITS=2*e.BITS,this.BYTES=2*e.BYTES,this.isLE=e.isLE,this.ZERO={c0:e.ZERO,c1:e.ZERO},this.ONE={c0:e.ONE,c1:e.ZERO},this.FROBENIUS_COEFFICIENTS=$r(n,n.NONRESIDUE,r.ORDER,12,1,6)[0],this.X_LEN=t.X_LEN,this.finalExponentiate=t.Fp12finalExponentiate}create(e){return e}isValid({c0:e,c1:t}){const{Fp6:n}=this;return n.isValid(e)&&n.isValid(t)}is0({c0:e,c1:t}){const{Fp6:n}=this;return n.is0(e)&&n.is0(t)}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}neg({c0:e,c1:t}){const{Fp6:n}=this;return{c0:n.neg(e),c1:n.neg(t)}}eql({c0:e,c1:t},{c0:n,c1:r}){const{Fp6:s}=this;return s.eql(e,n)&&s.eql(t,r)}sqrt(e){ln()}inv({c0:e,c1:t}){const{Fp6:n}=this;let r=n.inv(n.sub(n.sqr(e),n.mulByNonresidue(n.sqr(t))));return{c0:n.mul(e,r),c1:n.neg(n.mul(t,r))}}div(e,t){const{Fp6:n}=this,{Fp2:r}=n,{Fp:s}=r;return this.mul(e,"bigint"==typeof t?s.inv(s.create(t)):this.inv(t))}pow(e,t){return Rn(this,e,t)}invertBatch(e){return On(this,e)}add({c0:e,c1:t},{c0:n,c1:r}){const{Fp6:s}=this;return{c0:s.add(e,n),c1:s.add(t,r)}}sub({c0:e,c1:t},{c0:n,c1:r}){const{Fp6:s}=this;return{c0:s.sub(e,n),c1:s.sub(t,r)}}mul({c0:e,c1:t},n){const{Fp6:r}=this;if("bigint"==typeof n)return{c0:r.mul(e,n),c1:r.mul(t,n)};let{c0:s,c1:i}=n,o=r.mul(e,s),a=r.mul(t,i);return{c0:r.add(o,r.mulByNonresidue(a)),c1:r.sub(r.mul(r.add(e,t),r.add(s,i)),r.add(o,a))}}sqr({c0:e,c1:t}){const{Fp6:n}=this;let r=n.mul(e,t);return{c0:n.sub(n.sub(n.mul(n.add(n.mulByNonresidue(t),e),n.add(e,t)),r),n.mulByNonresidue(r)),c1:n.add(r,r)}}addN(e,t){return this.add(e,t)}subN(e,t){return this.sub(e,t)}mulN(e,t){return this.mul(e,t)}sqrN(e){return this.sqr(e)}fromBytes(e){const{Fp6:t}=this;if(e.length!==this.BYTES)throw new Error("fromBytes invalid length="+e.length);return{c0:t.fromBytes(e.subarray(0,t.BYTES)),c1:t.fromBytes(e.subarray(t.BYTES))}}toBytes({c0:e,c1:t}){const{Fp6:n}=this;return(0,qt.Id)(n.toBytes(e),n.toBytes(t))}cmov({c0:e,c1:t},{c0:n,c1:r},s){const{Fp6:i}=this;return{c0:i.cmov(e,n,s),c1:i.cmov(t,r,s)}}fromBigTwelve(e){const{Fp6:t}=this;return{c0:t.fromBigSix(e.slice(0,6)),c1:t.fromBigSix(e.slice(6,12))}}frobeniusMap(e,t){const{Fp6:n}=this,{Fp2:r}=n,{c0:s,c1:i,c2:o}=n.frobeniusMap(e.c1,t),a=this.FROBENIUS_COEFFICIENTS[t%12];return{c0:n.frobeniusMap(e.c0,t),c1:n.create({c0:r.mul(s,a),c1:r.mul(i,a),c2:r.mul(o,a)})}}mulByFp2({c0:e,c1:t},n){const{Fp6:r}=this;return{c0:r.mulByFp2(e,n),c1:r.mulByFp2(t,n)}}conjugate({c0:e,c1:t}){return{c0:e,c1:this.Fp6.neg(t)}}mul014({c0:e,c1:t},n,r,s){const{Fp6:i}=this,{Fp2:o}=i;let a=i.mul01(e,n,r),c=i.mul1(t,s);return{c0:i.add(i.mulByNonresidue(c),a),c1:i.sub(i.sub(i.mul01(i.add(t,e),n,o.add(r,s)),a),c)}}mul034({c0:e,c1:t},n,r,s){const{Fp6:i}=this,{Fp2:o}=i,a=i.create({c0:o.mul(e.c0,n),c1:o.mul(e.c1,n),c2:o.mul(e.c2,n)}),c=i.mul01(t,r,s),u=i.mul01(i.add(e,t),o.add(n,r),s);return{c0:i.add(i.mulByNonresidue(c),a),c1:i.sub(u,i.add(a,c))}}_cyclotomicSquare({c0:e,c1:t}){const{Fp6:n}=this,{Fp2:r}=n,{c0:s,c1:i,c2:o}=e,{c0:a,c1:c,c2:u}=t,{first:d,second:f}=r.Fp4Square(s,c),{first:l,second:h}=r.Fp4Square(a,o),{first:p,second:m}=r.Fp4Square(i,u),g=r.mulByNonresidue(m);return{c0:n.create({c0:r.add(r.mul(r.sub(d,s),Mr),d),c1:r.add(r.mul(r.sub(l,i),Mr),l),c2:r.add(r.mul(r.sub(p,o),Mr),p)}),c1:n.create({c0:r.add(r.mul(r.add(g,a),Mr),g),c1:r.add(r.mul(r.add(f,c),Mr),f),c2:r.add(r.mul(r.add(h,u),Mr),h)})}}_cyclotomicExp(e,t){let n=this.ONE;for(let r=this.X_LEN-1;r>=0;r--)n=this._cyclotomicSquare(n),un(t,r)&&(n=this.mul(n,e));return n}}const qr=BigInt(0),zr=BigInt(1),Qr=BigInt(2),Kr=BigInt(3),Yr=BigInt(4),Jr=BigInt("0xd201000000010000"),Xr=cn(Jr),es={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:qr,b:Yr,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},ts=Ln(es.n,{modFromBytes:!0,isLE:!0}),{Fp:ns,Fp2:rs,Fp6:ss,Fp12:is}=function(e){const t=Ln(e.ORDER),n=new Vr(t,e),r=new Wr(n);return{Fp:t,Fp2:n,Fp6:r,Fp12:new jr(r,e)}}({ORDER:es.p,X_LEN:Xr,FP2_NONRESIDUE:[zr,zr],Fp2mulByB:({c0:e,c1:t})=>{const n=ns.mul(e,Yr),r=ns.mul(t,Yr);return{c0:ns.sub(n,r),c1:ns.add(n,r)}},Fp12finalExponentiate:e=>{const t=Jr,n=is.div(is.frobeniusMap(e,6),e),r=is.mul(is.frobeniusMap(n,2),n),s=is.conjugate(is._cyclotomicExp(r,t)),i=is.mul(is.conjugate(is._cyclotomicSquare(r)),s),o=is.conjugate(is._cyclotomicExp(i,t)),a=is.conjugate(is._cyclotomicExp(o,t)),c=is.mul(is.conjugate(is._cyclotomicExp(a,t)),is._cyclotomicSquare(s)),u=is.conjugate(is._cyclotomicExp(c,t)),d=is.frobeniusMap(is.mul(s,a),2),f=is.frobeniusMap(is.mul(o,r),3),l=is.frobeniusMap(is.mul(c,is.conjugate(r)),1),h=is.mul(is.mul(u,is.conjugate(i)),r);return is.mul(is.mul(is.mul(d,f),l),h)}}),{G2psi:os,G2psi2:as}=function(e,t,n){const r=t.pow(n,(e.ORDER-Dr)/Hr),s=t.pow(n,(e.ORDER-Dr)/Mr);function i(e,n){return[t.mul(t.frobeniusMap(e,1),r),t.mul(t.frobeniusMap(n,1),s)]}const o=t.pow(n,(e.ORDER**Mr-Dr)/Hr),a=t.pow(n,(e.ORDER**Mr-Dr)/Mr);if(!t.eql(a,t.neg(t.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function c(e,n){return[t.mul(e,o),t.neg(n)]}const u=e=>(t,n)=>{const r=n.toAffine(),s=e(r.x,r.y);return t.fromAffine({x:s[0],y:s[1]})};return{psi:i,psi2:c,G2psi:u(i),G2psi2:u(c),PSI_X:r,PSI_Y:s,PSI2_X:o,PSI2_Y:a}}(ns,rs,rs.div(rs.ONE,rs.NONRESIDUE)),cs=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:ns.ORDER,m:2,k:128,expand:"xmd",hash:jt.sc}),us={p:rs.ORDER,n:es.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:rs.ZERO,b:rs.fromBigTuple([Yr,Yr]),Gx:rs.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:rs.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},ds=ls(ns.toBytes(qr),{infinity:!0,compressed:!0});function fs(e){const t=224&(e=e.slice())[0],n=!!(t>>7&1),r=!!(t>>6&1),s=!!(t>>5&1);return e[0]&=31,{compressed:n,infinity:r,sort:s,value:e}}function ls(e,t){if(224&e[0])throw new Error("setMask: non-empty mask");return t.compressed&&(e[0]|=128),t.infinity&&(e[0]|=64),t.sort&&(e[0]|=32),e}function hs(e){e.assertValidity();const{BYTES:t,ORDER:n}=ns,{x:r,y:s}=e.toAffine();if(e.is0())return ds.slice();const i=Boolean(s*Qr/n);return ls(nn(r,t),{compressed:!0,sort:i})}function ps(e){const{infinity:t,sort:n,value:r}=fs(sn("signatureHex",e,48)),s=ns.ORDER,i=bs.G1.Point,o=en(r);if(t)return i.ZERO;const a=ns.create(o&dn(ns.BITS)),c=ns.add(ns.pow(a,Kr),ns.create(es.b));let u=ns.sqrt(c);if(!u)throw new Error("invalid G1 point: compressed");const d=BigInt(n);u*Qr/s!==d&&(u=ns.neg(u));const f=i.fromAffine({x:a,y:u});return f.assertValidity(),f}function ms(e){e.assertValidity();const{BYTES:t}=ns;if(e.is0())return(0,qt.Id)(ds,nn(qr,t));const{x:n,y:r}=e.toAffine(),{re:s,im:i}=rs.reim(n),{re:o,im:a}=rs.reim(r),c=Boolean((a>qr?a*Qr:o*Qr)/ns.ORDER&zr),u=s;return(0,qt.Id)(ls(nn(i,t),{sort:c,compressed:!0}),nn(u,t))}function gs(e){const{ORDER:t}=ns,{infinity:n,sort:r,value:s}=fs(sn("signatureHex",e)),i=bs.G2.Point,o=s.length/2;if(48!==o&&96!==o)throw new Error("invalid compressed signature length, expected 96/192 bytes");const a=en(s.slice(0,o)),c=en(s.slice(o));if(n)return i.ZERO;const u=ns.create(a&dn(ns.BITS)),d=ns.create(c),f=rs.create({c0:d,c1:u}),l=rs.add(rs.pow(f,Kr),us.b);let h=rs.sqrt(l);if(!h)throw new Error("Failed to find a square root");const{re:p,im:m}=rs.reim(h),g=BigInt(r);(m>qr&&m*Qr/t!==g||m===qr&&p*Qr/t!==g)&&(h=rs.neg(h));const b=i.fromAffine({x:f,y:h});return b.assertValidity(),b}const bs=function(e){const{Fp:t,Fr:n,Fp2:r,Fp6:s,Fp12:i}=e.fields,o=xr(e.G1),a=Object.assign(o,dr(o.Point,e.G1.mapToCurve,{...e.htfDefaults,...e.G1.htfDefaults})),c=xr(e.G2),u=Object.assign(c,dr(c.Point,e.G2.mapToCurve,{...e.htfDefaults,...e.G2.htfDefaults})),d=Tr(e.fields,a.Point,u.Point,{...e.params,postPrecompute:e.postPrecompute}),{millerLoopBatch:f,pairing:l,pairingBatch:h,calcPairingPrecomputes:p}=d,m=Lr(d,a,u,e.G2.Signature,!1),g=Lr(d,u,a,e.G1.ShortSignature,!0),b=e.randomBytes||qt.po,y=()=>{const e=Dn(n.ORDER);return Mn(b(e),n.ORDER)},w={randomSecretKey:y,randomPrivateKey:y,calcPairingPrecomputes:p},{ShortSignature:_}=e.G1,{Signature:v}=e.G2;function C(e,t){return e instanceof a.Point?e:g.hash(sn("point",e),t?.DST)}function E(e,t){return e instanceof u.Point?e:m.hash(sn("point",e),t?.DST)}return a.Point.BASE.precompute(4),{longSignatures:m,shortSignatures:g,millerLoopBatch:f,pairing:l,pairingBatch:h,verifyBatch:function(e,t,n,r){const s=t.map((e=>E(e,r)));return m.verifyBatch(e,s,n)},fields:{Fr:n,Fp:t,Fp2:r,Fp6:s,Fp12:i},params:{ateLoopSize:e.params.ateLoopSize,twistType:e.params.twistType,r:e.params.r,G1b:e.G1.b,G2b:e.G2.b},utils:w,getPublicKey:function(e){return m.getPublicKey(e).toBytes(!0)},getPublicKeyForShortSignatures:function(e){return g.getPublicKey(e).toBytes(!0)},sign:function(e,t,n){const r=E(e,n),s=m.sign(r,t);return e instanceof u.Point?s:v.toBytes(s)},signShortSignature:function(e,t,n){const r=C(e,n),s=g.sign(r,t);return e instanceof a.Point?s:_.toBytes(s)},verify:function(e,t,n,r){const s=E(t,r);return m.verify(e,s,n)},verifyShortSignature:function(e,t,n,r){const s=C(t,r);return g.verify(e,s,n)},aggregatePublicKeys:function(e){const t=m.aggregatePublicKeys(e);return e[0]instanceof a.Point?t:t.toBytes(!0)},aggregateSignatures:function(e){const t=m.aggregateSignatures(e);return e[0]instanceof u.Point?t:v.toBytes(t)},aggregateShortSignatures:function(e){const t=g.aggregateSignatures(e);return e[0]instanceof a.Point?t:_.toBytes(t)},G1:a,G2:u,Signature:v,ShortSignature:_}}({fields:{Fp:ns,Fp2:rs,Fp6:ss,Fp12:is,Fr:ts},G1:{...es,Fp:ns,htfDefaults:{...cs,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(e,t)=>{const n=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),r=new e(ns.mul(t.X,n),t.Y,t.Z);return t.multiplyUnsafe(Jr).negate().multiplyUnsafe(Jr).equals(r)},clearCofactor:(e,t)=>t.multiplyUnsafe(Jr).add(t),mapToCurve:function(e){const{x:t,y:n}=_s(ns.create(e[0]));return ws(t,n)},fromBytes:function(e){const{compressed:t,infinity:n,sort:r,value:s}=fs(e),{BYTES:i,ORDER:o}=ns;if(48===s.length&&t){const e=en(s),t=ns.create(e&dn(ns.BITS));if(n){if(t!==qr)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:qr,y:qr}}const i=ns.add(ns.pow(t,Kr),ns.create(es.b));let a=ns.sqrt(i);if(!a)throw new Error("invalid G1 point: compressed point");return a*Qr/o!==BigInt(r)&&(a=ns.neg(a)),{x:ns.create(t),y:ns.create(a)}}if(96!==s.length||t)throw new Error("invalid G1 point: expected 48/96 bytes");{const e=en(s.subarray(0,i)),t=en(s.subarray(i));if(n){if(e!==qr||t!==qr)throw new Error("G1: non-empty point at infinity");return bs.G1.Point.ZERO.toAffine()}return{x:ns.create(e),y:ns.create(t)}}},toBytes:function(e,t,n){const{BYTES:r,ORDER:s}=ns,i=t.is0(),{x:o,y:a}=t.toAffine();if(n){if(i)return ds.slice();const e=Boolean(a*Qr/s);return ls(nn(o,r),{compressed:!0,sort:e})}return i?(0,qt.Id)(Uint8Array.of(64),new Uint8Array(2*r-1)):(0,qt.Id)(nn(o,r),nn(a,r))},ShortSignature:{fromBytes:e=>((0,qt.DO)(e),ps(e)),fromHex:e=>ps(e),toBytes:e=>hs(e),toRawBytes:e=>hs(e),toHex:e=>(0,qt.My)(hs(e))}},G2:{...us,Fp:rs,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...cs},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:function(e){const{x:t,y:n}=vs(rs.fromBigTuple(e));return ys(t,n)},isTorsionFree:(e,t)=>t.multiplyUnsafe(Jr).negate().equals(os(e,t)),clearCofactor:(e,t)=>{const n=Jr;let r=t.multiplyUnsafe(n).negate(),s=os(e,t),i=t.double();i=as(e,i),i=i.subtract(s),s=r.add(s),s=s.multiplyUnsafe(n).negate(),i=i.add(s),i=i.subtract(r);return i.subtract(t)},fromBytes:function(e){const{BYTES:t,ORDER:n}=ns,{compressed:r,infinity:s,sort:i,value:o}=fs(e);if(!r&&!s&&i||!r&&s&&i||i&&s&&r)throw new Error("invalid encoding flag: "+(224&e[0]));const a=(e,t,n)=>en(e.slice(t,n));if(96===o.length&&r){if(s){if(o.reduce(((e,t)=>0!==e?t+1:t),0)>0)throw new Error("invalid G2 point: compressed");return{x:rs.ZERO,y:rs.ZERO}}const e=a(o,0,t),r=a(o,t,2*t),c=rs.create({c0:ns.create(r),c1:ns.create(e)}),u=rs.add(rs.pow(c,Kr),us.b);let d=rs.sqrt(u);const f=d.c1===qr?d.c0*Qr/n:d.c1*Qr/n?zr:qr;return d=i&&f>0?d:rs.neg(d),{x:c,y:d}}if(192!==o.length||r)throw new Error("invalid G2 point: expected 96/192 bytes");{if(s){if(o.reduce(((e,t)=>0!==e?t+1:t),0)>0)throw new Error("invalid G2 point: uncompressed");return{x:rs.ZERO,y:rs.ZERO}}const e=a(o,0*t,1*t),n=a(o,1*t,2*t),r=a(o,2*t,3*t),i=a(o,3*t,4*t);return{x:rs.fromBigTuple([n,e]),y:rs.fromBigTuple([i,r])}}},toBytes:function(e,t,n){const{BYTES:r,ORDER:s}=ns,i=t.is0(),{x:o,y:a}=t.toAffine();if(n){if(i)return(0,qt.Id)(ds,nn(qr,r));const e=Boolean(a.c1===qr?a.c0*Qr/s:a.c1*Qr/s);return(0,qt.Id)(ls(nn(o.c1,r),{compressed:!0,sort:e}),nn(o.c0,r))}{if(i)return(0,qt.Id)(Uint8Array.of(64),new Uint8Array(4*r-1));const{re:e,im:t}=rs.reim(o),{re:n,im:s}=rs.reim(a);return(0,qt.Id)(nn(t,r),nn(e,r),nn(s,r),nn(n,r))}},Signature:{fromBytes:e=>((0,qt.DO)(e),gs(e)),fromHex:e=>gs(e),toBytes:e=>ms(e),toRawBytes:e=>ms(e),toHex:e=>(0,qt.My)(ms(e))}},params:{ateLoopSize:Jr,r:es.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:cs,hash:jt.sc}),ys=cr(rs,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map((e=>e.map((e=>rs.fromBigTuple(e.map(BigInt))))))),ws=cr(ns,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))),_s=Sr(ns,{A:ns.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:ns.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:ns.create(BigInt(11))}),vs=Sr(rs,{A:rs.create({c0:ns.create(qr),c1:ns.create(BigInt(240))}),B:rs.create({c0:ns.create(BigInt(1012)),c1:ns.create(BigInt(1012))}),Z:rs.create({c0:ns.create(BigInt(-2)),c1:ns.create(BigInt(-1))})});const Cs=bs.G1.ProjectivePoint.ZERO,Es=bs.G2.ProjectivePoint.ZERO;function As(e,t){if((0,r.U8W)(e)>=Lt)throw new xe(xe.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);if((0,r.U8W)(t)>=Lt)throw new xe(xe.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);const n=(0,r.Idy)(e.subarray(16),t.subarray(16));return bs.fields.Fp2.fromBytes(n)}function Ss(e,t=!0){if(!0===(0,r.NDp)(e,Mt))return Cs;const n=(0,r.U8W)(e.subarray(16,64)),s=(0,r.U8W)(e.subarray(80,Ft)),i=bs.G1.ProjectivePoint.fromAffine({x:n,y:s});try{i.assertValidity()}catch(o){if(t||"bad point: not in prime-order subgroup"!==o.message)throw new xe(xe.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE)}return i}function Is(e){const t=(0,r.cgR)((0,r.CZI)(e.x),64),n=(0,r.cgR)((0,r.CZI)(e.y),64);return(0,r.Idy)(t,n)}function ks(e,t=!0){if(!0===(0,r.NDp)(e,Ht))return Es;const n=e.subarray(0,64),s=e.subarray(64,128),i=e.subarray(128,192),o=e.subarray(192,Dt),a=As(n,s),c=As(i,o),u=bs.G2.ProjectivePoint.fromAffine({x:a,y:c});try{u.assertValidity()}catch(d){if(t||"bad point: not in prime-order subgroup"!==d.message)throw new xe(xe.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE)}return u}function xs(e){const t=(0,r.cgR)((0,r.CZI)(e.x.c0),64),n=(0,r.cgR)((0,r.CZI)(e.x.c1),64),s=(0,r.cgR)((0,r.CZI)(e.y.c0),64),i=(0,r.cgR)((0,r.CZI)(e.y.c1),64);return(0,r.Idy)(t,n,s,i)}function Ns(e){const t=bs.fields.Fr.fromBytes(e);return bs.fields.Fr.create(t)}class Bs{addG1(e){const t=Ss(e.subarray(0,Ft),!1),n=Ss(e.subarray(Ft,256),!1);return Is(t.add(n))}mulG1(e){const t=Ss(e.subarray(0,Ft)),n=Ns(e.subarray(Ft,160));if(n===r.ZUg)return Mt;return Is(t.multiplyUnsafe(n))}addG2(e){const t=ks(e.subarray(0,Dt),!1),n=ks(e.subarray(Dt,512),!1);return xs(t.add(n))}mulG2(e){const t=ks(e.subarray(0,Dt)),n=Ns(e.subarray(Dt,288));if(n===r.ZUg)return Ht;return xs(t.multiplyUnsafe(n))}mapFPtoG1(e){const t=function(e){if((0,r.U8W)(e)>=Lt)throw new xe(xe.errorMessages.BLS_12_381_FP_NOT_IN_FIELD);return bs.fields.Fp.fromBytes(e.slice(16))}(e.subarray(0,64));return Is(bs.G1.mapToCurve([t]).toAffine())}mapFP2toG2(e){const t=As(e.subarray(0,64),e.subarray(64,128));return xs(bs.G2.mapToCurve([t.c0,t.c1]).toAffine())}msmG1(e){const t=e.length/160;let n=Cs;for(let s=0;s<t;s++){const t=160*s,i=Ss(e.subarray(t,t+Ft)),o=Ns(e.subarray(t+Ft,t+160));let a;a=o===r.ZUg?Cs:i.multiplyUnsafe(o),n=n.add(a)}return Is(n)}msmG2(e){const t=e.length/288;let n=Es;for(let s=0;s<t;s++){const t=288*s,i=ks(e.subarray(t,t+Dt)),o=Ns(e.subarray(t+Dt,t+288));let a;a=o===r.ZUg?Es:i.multiplyUnsafe(o),n=n.add(a)}return xs(n)}pairingCheck(e){const t=[];for(let s=0;s<e.length/384;s++){const n=384*s,r=Ss(e.subarray(n,n+Ft)),i=n+Ft,o=ks(e.subarray(i,i+Dt));t.push({g1:r,g2:o})}const n=t.filter((e=>!e.g1.equals(Cs)&&!e.g2.equals(Es))),r=bs.pairingBatch(n,!0);return bs.fields.Fp12.eql(r,bs.fields.Fp12.ONE)?Zt:$t}}const Ps=new Uint8Array(16),Us=(e,t,n)=>{const r=n[n.length-1][1];let s;return s=e<=n.length?0===e?0:n[e-1][1]:r,BigInt(e)*t*BigInt(s)/BigInt(1e3)},Rs=(e,t,n,s=0)=>{for(const i in t){const o=e.data.subarray(t[i][0]+s,t[i][1]+s);if(!0!==(0,r.NDp)(o,Ps))return void 0!==e._debug&&e._debug(`${n} failed: Point not on curve`),!1}return!0};async function Os(e){const t=Ki("0b"),n=e._EVM._bls,s=e.common.param("bls12381G1AddGas")??BigInt(0);if(!Pt(e,s,t))return to(e.gasLimit);if(!Ut(e,256,t))return ro(new xe(xe.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);if(!Rs(e,[[0,16],[64,80],[128,144],[192,208]],t))return ro(new xe(xe.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit);let i;try{i=n.addG1(e.data)}catch(o){return void 0!==e._debug&&e._debug(`${t} failed: ${o.message}`),ro(o,e.gasLimit)}return void 0!==e._debug&&e._debug(`${t} return value=${(0,r.MyA)(i)}`),{executionGasUsed:s,returnValue:i}}async function Gs(e){const t=Ki("0d"),n=e._EVM._bls,s=e.data;if(0===s.length)return void 0!==e._debug&&e._debug(`${t} failed: Empty input`),ro(new xe(xe.errorMessages.BLS_12_381_INPUT_EMPTY),e.gasLimit);const i=Math.floor(s.length/160),o=e.common.param("bls12381G1MulGas")??BigInt(0),a=Us(i,o,Vt);if(!Pt(e,a,t))return to(e.gasLimit);if(s.length%160!=0)return void 0!==e._debug&&e._debug(`${t} failed: Invalid input length length=${s.length}`),ro(new xe(xe.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);if(!Rt(e,160,t))return ro(new xe(xe.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);const c=[[0,16],[64,80]];for(let r=0;r<i;r++){if(!Rs(e,c,t,160*r))return ro(new xe(xe.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit)}let u;try{u=n.msmG1(e.data)}catch(d){return void 0!==e._debug&&e._debug(`${t} failed: ${d.message}`),ro(d,e.gasLimit)}return void 0!==e._debug&&e._debug(`${t} return value=${(0,r.MyA)(u)}`),{executionGasUsed:a,returnValue:u}}async function Ts(e){const t=Ki("0e"),n=e._EVM._bls,s=e.common.param("bls12381G2AddGas")??BigInt(0);if(!Pt(e,s,t))return to(e.gasLimit);if(!Ut(e,512,t))return ro(new xe(xe.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);if(!Rs(e,[[0,16],[64,80],[128,144],[192,208],[256,272],[320,336],[384,400],[448,464]],t))return ro(new xe(xe.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit);let i;try{i=n.addG2(e.data)}catch(o){return ro(o,e.gasLimit)}return void 0!==e._debug&&e._debug(`${t} return value=${(0,r.MyA)(i)}`),{executionGasUsed:s,returnValue:i}}async function Ls(e){const t=Ki("10"),n=e._EVM._bls;if(0===e.data.length)return void 0!==e._debug&&e._debug(`${t} failed: Empty input`),ro(new xe(xe.errorMessages.BLS_12_381_INPUT_EMPTY),e.gasLimit);const s=Math.floor(e.data.length/288),i=e.common.param("bls12381G2MulGas")??BigInt(0),o=Us(s,i,Wt);if(!Pt(e,o,t))return to(e.gasLimit);if(!Rt(e,288,t))return ro(new xe(xe.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);const a=[[0,16],[64,80],[128,144],[192,208]];for(let r=0;r<s;r++){if(!Rs(e,a,t,288*r))return ro(new xe(xe.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit)}let c;try{c=n.msmG2(e.data)}catch(u){return void 0!==e._debug&&e._debug(`${t} failed: ${u.message}`),ro(u,e.gasLimit)}return void 0!==e._debug&&e._debug(`${t} return value=${(0,r.MyA)(c)}`),{executionGasUsed:o,returnValue:c}}async function Fs(e){const t=Ki("11"),n=e._EVM._bls,s=e.common.param("bls12381PairingBaseGas")??BigInt(0);if(0===e.data.length)return void 0!==e._debug&&e._debug(`${t} failed: Empty input`),ro(new xe(xe.errorMessages.BLS_12_381_INPUT_EMPTY),e.gasLimit);const i=e.common.param("bls12381PairingPerPairGas")??BigInt(0);if(!Rt(e,384,t))return ro(new xe(xe.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);const o=s+i*BigInt(Math.floor(e.data.length/384));if(!Pt(e,o,t))return to(e.gasLimit);const a=[[0,16],[64,80],[128,144],[192,208],[256,272],[320,336]];for(let r=0;r<e.data.length/384;r++){if(!Rs(e,a,t,384*r))return ro(new xe(xe.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit)}let c;try{c=n.pairingCheck(e.data)}catch(u){return void 0!==e._debug&&e._debug(`${t} failed: ${u.message}`),ro(u,e.gasLimit)}return void 0!==e._debug&&e._debug(`${t} return value=${(0,r.MyA)(c)}`),{executionGasUsed:o,returnValue:c}}function Ds(e){const t=Ki("01"),n=e.common.customCrypto.ecrecover??r.RpU,s=e.common.param("ecRecoverGas");if(!Pt(e,s,t))return to(e.gasLimit);const i=(0,r.rs2)(e.data,128),o=i.subarray(0,32),a=i.subarray(32,64),c=(0,r.U8W)(a);if(c!==r.kr8&&c!==r.fJ)return void 0!==e._debug&&e._debug(`${t} failed: v neither 27 nor 28`),{executionGasUsed:s,returnValue:new Uint8Array};const u=i.subarray(64,96),d=i.subarray(96,128);let f;try{void 0!==e._debug&&e._debug(`${t}: PK recovery with msgHash=${(0,r.MyA)(o)} v=${(0,r.MyA)(a)} r=${(0,r.MyA)(u)}s=${(0,r.MyA)(d)}}`),f=n(o,(0,r.U8W)(a),u,d)}catch{return void 0!==e._debug&&e._debug(`${t} failed: PK recovery failed`),{executionGasUsed:s,returnValue:new Uint8Array(0)}}const l=(0,r.cgR)((0,r.Jt3)(f),32);return void 0!==e._debug&&e._debug(`${t} return address=${(0,r.MyA)(l)}`),{executionGasUsed:s,returnValue:l}}var Ms=n(4148);function Hs(e){const t=Ki("02"),n=e.data,s=e.common.customCrypto.sha256??Ms.s;let i=e.common.param("sha256Gas");if(i+=e.common.param("sha256WordGas")*BigInt(Math.ceil(n.length/32)),!Pt(e,i,t))return to(e.gasLimit);const o=s(n);return void 0!==e._debug&&e._debug(`${t} return hash=${(0,r.MyA)(o)}`),{executionGasUsed:i,returnValue:o}}var $s=n(27816);$s.ol;$s.ol;const Zs=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Vs=(()=>Uint8Array.from(new Array(16).fill(0).map(((e,t)=>t))))(),Ws=(()=>Vs.map((e=>(9*e+5)%16)))(),js=(()=>{const e=[[Vs],[Ws]];for(let t=0;t<4;t++)for(let n of e)n.push(n[t].map((e=>Zs[e])));return e})(),qs=(()=>js[0])(),zs=(()=>js[1])(),Qs=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>Uint8Array.from(e))),Ks=qs.map(((e,t)=>e.map((e=>Qs[t][e])))),Ys=zs.map(((e,t)=>e.map((e=>Qs[t][e])))),Js=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),Xs=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function ei(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const ti=new Uint32Array(16);class ni extends $s.ol{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:s}=this;return[e,t,n,r,s]}set(e,t,n,r,s){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|s}process(e,t){for(let l=0;l<16;l++,t+=4)ti[l]=e.getUint32(t,!0);let n=0|this.h0,r=n,s=0|this.h1,i=s,o=0|this.h2,a=o,c=0|this.h3,u=c,d=0|this.h4,f=d;for(let l=0;l<5;l++){const e=4-l,t=Js[l],h=Xs[l],p=qs[l],m=zs[l],g=Ks[l],b=Ys[l];for(let r=0;r<16;r++){const e=(0,qt.aZ)(n+ei(l,s,o,c)+ti[p[r]]+t,g[r])+d|0;n=d,d=c,c=0|(0,qt.aZ)(o,10),o=s,s=e}for(let n=0;n<16;n++){const t=(0,qt.aZ)(r+ei(e,i,a,u)+ti[m[n]]+h,b[n])+f|0;r=f,f=u,u=0|(0,qt.aZ)(a,10),a=i,i=t}}this.set(this.h1+o+u|0,this.h2+c+f|0,this.h3+d+r|0,this.h4+n+i|0,this.h0+s+a|0)}roundClean(){(0,qt.uH)(ti)}destroy(){this.destroyed=!0,(0,qt.uH)(this.buffer),this.set(0,0,0,0,0)}}const ri=(0,qt.qj)((()=>new ni));const si=(0,n(22421).RS)(ri);function ii(e){const t=Ki("03"),n=e.data;let s=e.common.param("ripemd160Gas");if(s+=e.common.param("ripemd160WordGas")*BigInt(Math.ceil(n.length/32)),!Pt(e,s,t))return to(e.gasLimit);const i=(0,r.cgR)(si(n),32);return void 0!==e._debug&&e._debug(`${t} return hash=${(0,r.MyA)(i)}`),{executionGasUsed:s,returnValue:(0,r.cgR)(si(n),32)}}function oi(e){const t=Ki("04"),n=e.data;let s=e.common.param("identityGas");return s+=e.common.param("identityWordGas")*BigInt(Math.ceil(n.length/32)),Pt(e,s,t)?(void 0!==e._debug&&e._debug(`${t} return data=${(0,r.h0N)(e.data)}`),{executionGasUsed:s,returnValue:Uint8Array.from(n)}):to(e.gasLimit)}const ai=BigInt(4),ci=BigInt(16),ui=BigInt(480),di=BigInt(200),fi=BigInt(500),li=BigInt(1024),hi=BigInt(3072),pi=BigInt(199680),mi=BigInt(2147483647),gi=BigInt(Number.MAX_SAFE_INTEGER);function bi(e){const t=Ki("05"),n=e.data.length<96?(0,r.rs2)(e.data,96):e.data;let s=function(e,t){let n;try{const t=(0,r.U8W)(e.subarray(0,32));n=96+Number(t)}catch{n=Number.MAX_SAFE_INTEGER-32}const s=(0,r.U8W)(e.subarray(32,64));let i=e.subarray(n,n+32);i=(0,r.rs2)(i,32);let o=(0,r.U8W)(i),a=0;s<r.ES$&&(a=32-Number(s)),o>>=r.loQ*BigInt(Math.max(a,0));let c=-1;for(;o>r.ZUg;)c+=1,o>>=r.exu;let u=s-r.ES$;u<r.ZUg&&(u=r.ZUg);let d=u*(!0===t.common.isActivatedEIP(7883)?ci:r.loQ);return c>0&&(d+=BigInt(c)),d}(n,e);s<r.exu&&(s=r.exu);const i=(0,r.U8W)(n.subarray(0,32)),o=(0,r.U8W)(n.subarray(32,64)),a=(0,r.U8W)(n.subarray(64,96));let c=i;c<a&&(c=a);const u=e.common.param("modexpGquaddivisorGas");let d;const f=r.OkS,l=f+i,h=l,p=h+o,m=p,g=m+a;if(e.common.isActivatedEIP(2565)){const t=(c+r.eMC)/r.loQ;e.common.isActivatedEIP(7883)?(d=s*(c>r.ES$?r.l$H*t*t:ci),d<fi&&(d=fi)):(d=s*t*t/u,d<di&&(d=di))}else d=s*function(e){let t,n;return e<=r.hyx?e**r.l$H:e<=li?(t=e**r.l$H/ai,n=e*r.OkS,t+n-hi):(t=e**r.l$H/ci,n=e*ui,t+n-pi)}(c)/u;if(!Pt(e,d,t))return to(e.gasLimit);const b=e.common.isActivatedEIP(7823)?li:mi;if(void 0!==e._debug){const n=BigInt(96)+i+o+a,r=BigInt(e.data.length);let s=`${t} length values: maxSize(b/e/m)=${b} bLen=${i} eLen=${o} mLen=${a} 96+b+e+m=${n} `;s+=`data=${r} lengthMatch=${n===r}`,e._debug(s)}if(!e.common.isActivatedEIP(7823)&&i===r.ZUg&&a===r.ZUg)return{executionGasUsed:d,returnValue:new Uint8Array};if(i>b||o>b||a>b)return void 0!==e._debug&&e._debug(`${t} failed: one or more input values too large`),to(e.gasLimit);if(g>gi)return void 0!==e._debug&&e._debug(`${t} failed: total input too large`),to(e.gasLimit);const y=(0,r.U8W)((0,r.rs2)(n.subarray(Number(f),Number(l)),Number(i))),w=(0,r.U8W)((0,r.rs2)(n.subarray(Number(h),Number(p)),Number(o))),_=(0,r.U8W)((0,r.rs2)(n.subarray(Number(m),Number(g)),Number(a)));let v;void 0!==e._debug&&e._debug(`${t} input: B=${y} E=${w} M=${_}`),_===r.ZUg?v=new Uint8Array:(v=function(e,t,n){if(t===r.ZUg)return r.exu%n;let s=r.exu;for(;t>r.ZUg;)t&r.exu&&(s=s*e%n),e=e*e%n,t>>=r.exu;return s}(y,w,_),v=v===r.ZUg?new Uint8Array:(0,r.CZI)(v));const C=(0,r.cgR)(v,Number(a));return void 0!==e._debug&&e._debug(`${t} return value=${(0,r.MyA)(C)}`),{executionGasUsed:d,returnValue:C}}function yi(e){const t=Ki("06"),n=e.common.param("bn254AddGas");if(!Pt(e,n,t))return to(e.gasLimit);const s=(0,r.rs2)(e.data.subarray(0,128),128);let i;try{i=e._EVM._bn254.add(s)}catch(o){return void 0!==e._debug&&e._debug(`${t} failed: ${o.message}`),ro(o,e.gasLimit)}return 64!==i.length?(void 0!==e._debug&&e._debug(`${t} failed: OOG`),to(e.gasLimit)):(void 0!==e._debug&&e._debug(`${t} return value=${(0,r.MyA)(i)}`),{executionGasUsed:n,returnValue:i})}function wi(e){const t=Ki("07"),n=e.common.param("bn254MulGas");if(!Pt(e,n,t))return to(e.gasLimit);const s=(0,r.rs2)(e.data.subarray(0,128),128);let i;try{i=e._EVM._bn254.mul(s)}catch(o){return void 0!==e._debug&&e._debug(`${t} failed: ${o.message}`),ro(o,e.gasLimit)}return 64!==i.length?(void 0!==e._debug&&e._debug(`${t} failed: OOG`),to(e.gasLimit)):(void 0!==e._debug&&e._debug(`${t} return value=${(0,r.MyA)(i)}`),{executionGasUsed:n,returnValue:i})}function _i(e){const t=Ki("08");if(!Rt(e,192,t))return ro(new xe(xe.errorMessages.INVALID_INPUT_LENGTH),e.gasLimit);const n=BigInt(Math.floor(e.data.length/192)),s=e.common.param("bn254PairingGas")+n*e.common.param("bn254PairingWordGas");if(!Pt(e,s,t))return to(e.gasLimit);let i;try{i=e._EVM._bn254.pairing(e.data)}catch(o){return void 0!==e._debug&&e._debug(`${t} failed: ${o.message}`),ro(o,e.gasLimit)}return 32!==i.length?(void 0!==e._debug&&e._debug(`${t} failed: OOG`),to(e.gasLimit)):(void 0!==e._debug&&e._debug(`${t} return value=${(0,r.MyA)(i)}`),{executionGasUsed:s,returnValue:i})}function vi(e,t,n){const r=e[t]+e[n];let s=e[t+1]+e[n+1];r>=4294967296&&s++,e[t]=r,e[t+1]=s}function Ci(e,t,n,r){let s=e[t]+n;n<0&&(s+=4294967296);let i=e[t+1]+r;s>=4294967296&&i++,e[t]=s,e[t+1]=i}function Ei(e,t,n,r,s,i,o,a){const c=t[o],u=t[o+1],d=t[a],f=t[a+1];vi(e,n,r),Ci(e,n,c,u);let l=e[i]^e[n],h=e[i+1]^e[n+1];e[i]=h,e[i+1]=l,vi(e,s,i),l=e[r]^e[s],h=e[r+1]^e[s+1],e[r]=l>>>24^h<<8,e[r+1]=h>>>24^l<<8,vi(e,n,r),Ci(e,n,d,f),l=e[i]^e[n],h=e[i+1]^e[n+1],e[i]=l>>>16^h<<16,e[i+1]=h>>>16^l<<16,vi(e,s,i),l=e[r]^e[s],h=e[r+1]^e[s+1],e[r]=h>>>31^l<<1,e[r+1]=l>>>31^h<<1}const Ai=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Si=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e})));function Ii(e){const t=Ki("09"),n=e.data;if(213!==n.length)return void 0!==e._debug&&e._debug(`${t} failed: OUT_OF_RANGE dataLength=${n.length}`),{returnValue:new Uint8Array(0),executionGasUsed:e.gasLimit,exceptionError:new xe(xe.errorMessages.OUT_OF_RANGE)};const s=n.subarray(212,213)[0];if(1!==s&&0!==s)return void 0!==e._debug&&e._debug(`${t} failed: OUT_OF_RANGE lastByte=${s}`),{returnValue:new Uint8Array(0),executionGasUsed:e.gasLimit,exceptionError:new xe(xe.errorMessages.OUT_OF_RANGE)};const i=new DataView(n.buffer,n.byteOffset).getUint32(0),o=new DataView(n.buffer,n.byteOffset+4,64),a=new DataView(n.buffer,n.byteOffset+68,128),c=new DataView(n.buffer,n.byteOffset+196,16),u=1===s;let d=e.common.param("blake2RoundGas");if(d*=BigInt(i),!Pt(e,d,t))return to(e.gasLimit);const f=new Uint32Array(16);for(let r=0;r<16;r++)f[r]=o.getUint32(4*r,!0);const l=new Uint32Array(32);for(let r=0;r<32;r++)l[r]=a.getUint32(4*r,!0);const h=new Uint32Array(4);for(let r=0;r<4;r++)h[r]=c.getUint32(4*r,!0);!function(e,t,n,r,s){const i=new Uint32Array(32);let o=0;for(o=0;o<16;o++)i[o]=e[o],i[o+16]=Ai[o];for(i[24]=i[24]^n[0],i[25]=i[25]^n[1],i[26]=i[26]^n[2],i[27]=i[27]^n[3],r&&(i[28]=~i[28],i[29]=~i[29]),o=0;o<s;o++){const e=o%10*16;Ei(i,t,0,8,16,24,Si[e+0],Si[e+1]),Ei(i,t,2,10,18,26,Si[e+2],Si[e+3]),Ei(i,t,4,12,20,28,Si[e+4],Si[e+5]),Ei(i,t,6,14,22,30,Si[e+6],Si[e+7]),Ei(i,t,0,10,20,30,Si[e+8],Si[e+9]),Ei(i,t,2,12,22,24,Si[e+10],Si[e+11]),Ei(i,t,4,14,16,26,Si[e+12],Si[e+13]),Ei(i,t,6,8,18,28,Si[e+14],Si[e+15])}for(o=0;o<16;o++)e[o]=e[o]^i[o]^i[o+16]}(f,l,h,u,i);const p=new Uint8Array(64),m=new DataView(p.buffer);for(let r=0;r<16;r++)m.setUint32(4*r,f[r],!0);return void 0!==e._debug&&e._debug(`${t} return hash=${(0,r.MyA)(p)}`),{executionGasUsed:d,returnValue:p}}async function ki(e){const t=Ki("12"),n=e._EVM._bls,s=e.common.param("bls12381MapG1Gas")??BigInt(0);if(!Pt(e,s,t))return to(e.gasLimit);if(!Ut(e,64,t))return ro(new xe(xe.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);if(!Rs(e,[[0,16]],t))return ro(new xe(xe.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit);let i;try{i=n.mapFPtoG1(e.data)}catch(o){return void 0!==e._debug&&e._debug(`${t} failed: ${o.message}`),ro(o,e.gasLimit)}return void 0!==e._debug&&e._debug(`${t} return value=${(0,r.MyA)(i)}`),{executionGasUsed:s,returnValue:i}}async function xi(e){const t=Ki("13"),n=e._EVM._bls,s=e.common.param("bls12381MapG2Gas")??BigInt(0);if(!Pt(e,s,t))return to(e.gasLimit);if(!Ut(e,128,t))return ro(new xe(xe.errorMessages.BLS_12_381_INVALID_INPUT_LENGTH),e.gasLimit);if(!Rs(e,[[0,16],[64,80]],t))return ro(new xe(xe.errorMessages.BLS_12_381_POINT_NOT_ON_CURVE),e.gasLimit);let i;try{i=n.mapFP2toG2(e.data)}catch(o){return void 0!==e._debug&&e._debug(`${t} failed: ${o.message}`),ro(o,e.gasLimit)}return void 0!==e._debug&&e._debug(`${t} return value=${(0,r.MyA)(i)}`),{executionGasUsed:s,returnValue:i}}function Ni(e,t){const n=t=>Br({...e,hash:t});return{...n(t),create:n}}const Bi={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Pi={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Ui={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Ri=Ln(Bi.p),Oi=Ln(Pi.p),Gi=Ln(Ui.p);const Ti=Ni({...Bi,Fp:Ri,lowS:!1},jt.sc),Li=(Ni({...Pi,Fp:Oi,lowS:!1},jt.qt),Ni({...Ui,Fp:Gi,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},jt.Zf),Ti),Fi=BigInt(6900),Di=new Uint8Array(32).fill(0).map(((e,t)=>31===t?1:0)),Mi=BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Hi=BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),$i=BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),Zi=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b");function Vi(e){const t=Ki("100"),n=Fi;if(!Pt(e,n,t))return to(e.gasLimit);const s=e.data;if(160!==s.length)return void 0!==e._debug&&e._debug(`${t} failed: invalid input length ${s.length}, expected 160`),{executionGasUsed:n,returnValue:new Uint8Array};const i=s.subarray(0,32),o=s.subarray(32,64),a=s.subarray(64,96),c=s.subarray(96,128),u=s.subarray(128,160),d=(0,r.U8W)(o),f=(0,r.U8W)(a),l=(0,r.U8W)(c),h=(0,r.U8W)(u);if(!(d>BigInt(0)&&d<Mi&&f>BigInt(0)&&f<Mi))return void 0!==e._debug&&e._debug(`${t} failed: signature component out of bounds: r=${(0,r.MyA)(o)}, s=${(0,r.MyA)(a)}`),{executionGasUsed:n,returnValue:new Uint8Array};if(!(l>=BigInt(0)&&l<Hi&&h>=BigInt(0)&&h<Hi))return void 0!==e._debug&&e._debug(`${t} failed: public key component out of bounds: qx=${(0,r.MyA)(c)}, qy=${(0,r.MyA)(u)}`),{executionGasUsed:n,returnValue:new Uint8Array};if(h*h%Hi!==(l*l*l+$i*l+Zi)%Hi)return void 0!==e._debug&&e._debug(`${t} failed: point not on curve`),{executionGasUsed:n,returnValue:new Uint8Array};if(l===BigInt(0)&&h===BigInt(0))return void 0!==e._debug&&e._debug(`${t} failed: public key is point at infinity`),{executionGasUsed:n,returnValue:new Uint8Array};try{const s=Li.ProjectivePoint.fromAffine({x:l,y:h}),c=(0,r.cgR)(o,32),u=(0,r.cgR)(a,32),d=new Uint8Array(64);d.set(c,0),d.set(u,32);const f=Li.Signature.fromCompact(d);return Li.verify(f,i,s.toRawBytes(!1))?(void 0!==e._debug&&e._debug(`${t} succeeded: signature verification passed`),{executionGasUsed:n,returnValue:Di}):(void 0!==e._debug&&e._debug(`${t} failed: signature verification failed`),{executionGasUsed:n,returnValue:new Uint8Array})}catch(p){return void 0!==e._debug&&e._debug(`${t} failed: verification error: ${p}`),{executionGasUsed:n,returnValue:new Uint8Array}}}new Uint8Array(64),new Uint8Array(128),new Uint8Array(32),(0,r.Idy)(new Uint8Array(31),(0,r.aTq)("0x01"));const Wi="eip",ji="hardfork",qi="00000000000000000000000000000000000000",zi=[{address:qi+"01",check:{type:ji,param:Ne.sr.Chainstart},precompile:Ds,name:"ECRECOVER (0x01)"},{address:qi+"02",check:{type:ji,param:Ne.sr.Chainstart},precompile:Hs,name:"SHA256 (0x02)"},{address:qi+"03",check:{type:ji,param:Ne.sr.Chainstart},precompile:ii,name:"RIPEMD160 (0x03)"},{address:qi+"04",check:{type:ji,param:Ne.sr.Chainstart},precompile:oi,name:"IDENTITY (0x04)"},{address:qi+"05",check:{type:ji,param:Ne.sr.Byzantium},precompile:bi,name:"MODEXP (0x05)"},{address:qi+"06",check:{type:ji,param:Ne.sr.Byzantium},precompile:yi,name:"BN254_ADD (0x06)"},{address:qi+"07",check:{type:ji,param:Ne.sr.Byzantium},precompile:wi,name:"BN254_MUL (0x07)"},{address:qi+"08",check:{type:ji,param:Ne.sr.Byzantium},precompile:_i,name:"BN254_PAIRING (0x08)"},{address:qi+"09",check:{type:ji,param:Ne.sr.Istanbul},precompile:Ii,name:"BLAKE2f (0x09)"},{address:qi+"0a",check:{type:Wi,param:4844},precompile:Tt,name:"KZG_POINT_EVALUATION (0x0a)"},{address:qi+"0b",check:{type:Wi,param:2537},precompile:Os,name:"BLS12_G1ADD (0x0b)"},{address:qi+"0c",check:{type:Wi,param:2537},precompile:Gs,name:"BLS12_G1MSM (0x0c)"},{address:qi+"0d",check:{type:Wi,param:2537},precompile:Ts,name:"BLS12_G2ADD (0x0d)"},{address:qi+"0e",check:{type:Wi,param:2537},precompile:Ls,name:"BLS12_G2MSM (0x0e)"},{address:qi+"0f",check:{type:Wi,param:2537},precompile:Fs,name:"BLS12_PAIRING (0x0f)"},{address:qi+"10",check:{type:Wi,param:2537},precompile:ki,name:"BLS12_MAP_FP_TO_G1 (0x10)"},{address:qi+"11",check:{type:Wi,param:2537},precompile:xi,name:"BLS12_MAP_FP_TO_G2 (0x11)"},{address:"0000000000000000000000000000000000000100",check:{type:Wi,param:7951},precompile:Vi,name:"P256VERIFY (0x100)"}];function Qi(e,t){const n=new Map;if(t)for(const s of t)n.set((0,r.od$)(s.address.bytes),"function"in s?s.function:void 0);for(const r of zi){if(n.has(r.address))continue;(r.check.type===ji&&e.gteHardfork(r.check.param)||r.check.type===Wi&&e.isActivatedEIP(r.check.param))&&n.set(r.address,r.precompile)}return n}function Ki(e){e.length<40&&(e=e.padStart(40,"0"));for(const t of zi)if(t.address===e)return t.name;return""}class Yi{constructor(){this._storage=new Map,this._changeJournal=[],this._indices=[0]}get(e,t){const n=this._storage.get(e.toString());if(!n)return new Uint8Array(32);const s=n.get((0,r.MyA)(t));return s||new Uint8Array(32)}put(e,t,n){if(32!==t.length)throw(0,r.mQ1)("Transient storage key must be 32 bytes long");if(n.length>32)throw(0,r.mQ1)("Transient storage value cannot be longer than 32 bytes");const s=e.toString();this._storage.has(s)||this._storage.set(s,new Map);const i=this._storage.get(s),o=(0,r.MyA)(t),a=i.get(o)??new Uint8Array(32);this._changeJournal.push({addr:s,key:o,prevValue:a}),i.set(o,n)}commit(){if(0===this._indices.length)throw(0,r.mQ1)("Nothing to commit");this._indices.pop()}checkpoint(){this._indices.push(this._changeJournal.length)}revert(){const e=this._indices.pop();if(void 0===e)throw(0,r.mQ1)("Nothing to revert");for(let t=this._changeJournal.length-1;t>=e;t--){const{key:e,prevValue:n,addr:r}=this._changeJournal[t];this._storage.get(r).set(e,n)}this._changeJournal.splice(e,this._changeJournal.length-e)}toJSON(){const e={};for(const[t,n]of this._storage.entries()){e[t]={};for(const[s,i]of n.entries())e[t][s]=(0,r.MyA)(i)}return e}clear(){this._storage=new Map,this._changeJournal=[]}}const Ji=Be("evm:evm"),Xi=Be("evm:gas"),eo=Be("evm:precompiles");function to(e){return{returnValue:new Uint8Array(0),executionGasUsed:e,exceptionError:new xe(xe.errorMessages.OUT_OF_GAS)}}function no(e){return{returnValue:new Uint8Array(0),executionGasUsed:e,exceptionError:new xe(xe.errorMessages.INVALID_BYTECODE_RESULT)}}function ro(e,t){return{returnValue:new Uint8Array(0),executionGasUsed:t,exceptionError:e}}function so(){return{header:{number:r.ZUg,coinbase:(0,r.hMq)(),timestamp:r.ZUg,difficulty:r.ZUg,prevRandao:new Uint8Array(32),gasLimit:r.ZUg,baseFeePerGas:void 0,getBlobGasPrice:()=>{}}}}class io{get precompiles(){return this._precompiles}get opcodes(){return this._opcodes}constructor(e){if(this.DEBUG=!1,this.common=e.common,this.blockchain=e.blockchain,this.stateManager=e.stateManager,this.common.isActivatedEIP(7864)){const e=["checkChunkWitnessPresent"];for(const t of e)if(!(t in this.stateManager))throw(0,r.mQ1)(`State manager used must implement ${t} if Binary Trees (EIP-7864) is activated`)}this.events=new Pe.b,this._optsCached=e;const t=[663,1153,1559,2537,2565,2718,2929,2930,2935,3198,3529,3540,3541,3607,3651,3670,3855,3860,4200,4399,4750,4788,4844,4895,5133,5450,5656,6110,6206,6780,7002,7069,7251,7480,7516,7594,7620,7685,7691,7692,7698,7702,7709,7823,7825,7934,7939,7951];for(const n of this.common.eips())if(!t.includes(n))throw(0,r.mQ1)(`EIP-${n} is not supported by the EVM`);if(!io.supportedHardforks.includes(this.common.hardfork()))throw(0,r.mQ1)(`Hardfork ${this.common.hardfork()} not set as supported in supportedHardforks`);this.common.updateParams(e.params??Bt),this.allowUnlimitedContractSize=e.allowUnlimitedContractSize??!1,this.allowUnlimitedInitCodeSize=e.allowUnlimitedInitCodeSize??!1,this._customOpcodes=e.customOpcodes,this._customPrecompiles=e.customPrecompiles,this.journal=new Nt(this.stateManager,this.common),this.transientStorage=new Yi,this.common.events.on("hardforkChanged",(()=>{this.getActiveOpcodes(),this._precompiles=Qi(this.common,this._customPrecompiles)})),this.getActiveOpcodes(),this._precompiles=Qi(this.common,this._customPrecompiles),this.common.isActivatedEIP(2537)&&(this._bls=e.bls??new Bs,this._bls.init?.()),this._bn254=e.bn254,this._emit=async(e,t)=>{const n=this.events.listeners(e);for(const r of n)2===r.length?await new Promise((e=>{r(t,e)})):r(t)},this.performanceLogger=new Le,this.DEBUG="undefined"==typeof window&&(process?.env?.DEBUG?.includes("ethjs")??!1)}getActiveOpcodes(){const e=St(this.common,this._customOpcodes);return this._opcodes=e.opcodes,this._dynamicGasHandlers=e.dynamicGasHandlers,this._handlers=e.handlers,this._opcodeMap=e.opcodeMap,e.opcodes}async _executeCall(e){let t=e.gasLimit;const n=e.caller;if(this.common.isActivatedEIP(7864)){if(void 0===e.accessWitness)throw(0,r.mQ1)("accessWitness is required for EIP-7864");const s=e.value!==r.ZUg;if(0===e.depth){const t=e.accessWitness.readAccountHeader(n);Xi(`originAccessGas=${t} waived off for origin at depth=0`);let r=e.accessWitness.readAccountCodeHash(e.to);r+=s?e.accessWitness.writeAccountBasicData(e.to):e.accessWitness.readAccountBasicData(e.to),Xi(`destAccessGas=${r} waived off for target at depth=0`)}let i=e.accessWitness.readAccountBasicData(e.to);if(s&&(i+=e.accessWitness.writeAccountBasicData(e.to)),t-=i,t<r.ZUg)return this.DEBUG&&Xi(`callAccessGas charged(${i}) caused OOG (-> ${t})`),e.accessWitness.revert(),{execResult:to(e.gasLimit)};this.DEBUG&&Xi(`callAccessGas used (${i} gas (-> ${t}))`),e.accessWitness.commit()}let s,i=await this.stateManager.getAccount(n);if(i||(i=new r.gDM),!e.delegatecall)try{await this._reduceSenderBalance(i,e)}catch(u){s=u}let o=await this.stateManager.getAccount(e.to);if(!o){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const n=e.accessWitness.readAccountHeader(e.to);if(t-=n,t<r.ZUg)return this.DEBUG&&Xi(`Proof of absence access charged(${n}) caused OOG (-> ${t})`),e.accessWitness?.revert(),{execResult:to(e.gasLimit)};this.DEBUG&&Xi(`Proof of absence access used (${n} gas (-> ${t}))`),e.accessWitness?.commit()}o=new r.gDM}if(!e.delegatecall)try{await this._addToBalance(o,e)}catch(u){s=u}await this._loadCode(e);let a,c=!1;if((!e.code||"function"!=typeof e.code&&0===e.code.length)&&(c=!0,this.DEBUG&&Ji("Exit early on no code (CALL)")),void 0!==s&&(c=!0,this.DEBUG&&Ji("Exit early on value transfer overflowed (CALL)")),c)return{execResult:{gasRefund:e.gasRefund,executionGasUsed:e.gasLimit-t,exceptionError:s,returnValue:new Uint8Array(0)}};if(e.isCompiled){let n,s,i;!0===this._optsCached.profiler?.enabled&&(i=(0,r.od$)(e.codeAddress.bytes),i=Ki(i)??i.slice(20),this.performanceLogger.hasTimer()&&(s=this.performanceLogger.pauseTimer()),n=this.performanceLogger.startTimer(i)),a=await this.runPrecompile(e.code,e.data,t),!0===this._optsCached.profiler?.enabled&&(this.performanceLogger.stopTimer(n,Number(a.executionGasUsed),"precompiles"),void 0!==s&&this.performanceLogger.unpauseTimer(s)),a.gasRefund=e.gasRefund}else this.DEBUG&&Ji("Start bytecode processing..."),a=await this.runInterpreter({...e,gasLimit:t});return 0===e.depth&&this.postMessageCleanup(),a.executionGasUsed+=e.gasLimit-t,{execResult:a}}async _executeCreate(e){let t=e.gasLimit;const n=e.caller;if((this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))&&0===e.depth){const t=e.accessWitness.readAccountHeader(n);Xi(`originAccessGas=${t} waived off for origin at depth=0`)}let i=await this.stateManager.getAccount(e.caller);if(i||(i=new r.gDM),await this._reduceSenderBalance(i,e),this.common.isActivatedEIP(3860)&&e.data.length>Number(this.common.param("maxInitCodeSize"))&&!this.allowUnlimitedInitCodeSize)return{createdAddress:e.to,execResult:{returnValue:new Uint8Array(0),exceptionError:new xe(xe.errorMessages.INITCODE_SIZE_VIOLATION),executionGasUsed:e.gasLimit}};e.code=e.data,e.data=e.eofCallData??new Uint8Array,e.to=await this._generateAddress(e),this.common.isActivatedEIP(6780)&&e.createdAddresses.add(e.to.toString()),this.DEBUG&&Ji(`Generated CREATE contract address ${e.to}`);let o=await this.stateManager.getAccount(e.to);if(o||(o=new r.gDM),this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const n=e.accessWitness.writeAccountBasicData(e.to)+e.accessWitness.readAccountCodeHash(e.to);if(t-=n,t<r.ZUg)return this.DEBUG&&(Xi(`ContractCreateInit charge(${n}) caused OOG (-> ${t})`),e.accessWitness?.revert()),{execResult:to(e.gasLimit)};this.DEBUG&&Xi(`ContractCreateInit charged (${n} gas (-> ${t}))`),e.accessWitness?.commit()}if(o.nonce&&o.nonce>r.ZUg||!0!==(0,r.NDp)(o.codeHash,r.AN1)||!0!==(0,r.NDp)(o.storageRoot,r.l4$))return this.DEBUG&&Ji("Returning on address collision"),{createdAddress:e.to,execResult:{returnValue:new Uint8Array(0),exceptionError:new xe(xe.errorMessages.CREATE_COLLISION),executionGasUsed:e.gasLimit}};await this.journal.putAccount(e.to,o),await this.stateManager.clearStorage(e.to);const a={address:e.to,code:e.code};let c;await this._emit("newContract",a),o=await this.stateManager.getAccount(e.to),o||(o=new r.gDM),this.common.gteHardfork(Ne.sr.SpuriousDragon)&&(o.nonce+=r.exu);try{await this._addToBalance(o,e)}catch(b){c=b}let u=!1;if((void 0===e.code||"function"!=typeof e.code&&0===e.code.length)&&(u=!0,this.DEBUG&&Ji("Exit early on no code (CREATE)")),void 0!==c&&(u=!0,this.DEBUG&&Ji("Exit early on value transfer overflowed (CREATE)")),u){if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const n=e.accessWitness.writeAccountHeader(e.to);if(t-=n,t<r.ZUg)return this.DEBUG&&Ji(`ContractCreateComplete access gas (${n}) caused OOG (-> ${t})`),e.accessWitness?.revert(),{execResult:to(e.gasLimit)};this.DEBUG&&Ji(`ContractCreateComplete access used (${n}) gas (-> ${t})`),e.accessWitness?.commit()}return{createdAddress:e.to,execResult:{executionGasUsed:e.gasLimit-t,gasRefund:e.gasRefund,exceptionError:c,returnValue:new Uint8Array(0)}}}this.DEBUG&&Ji("Start bytecode processing...");let d=await this.runInterpreter({...e,gasLimit:t,isCreate:!0});d.executionGasUsed+=e.gasLimit-t;let f=d.executionGasUsed,l=r.ZUg;d.exceptionError||this.common.isActivatedEIP(6800)||(l=BigInt(d.returnValue.length)*BigInt(this.common.param("createDataGas")),f+=l,this.DEBUG&&Xi(`Add return value size fee (${l} to gas used (-> ${f}))`));let h=!0;!d.exceptionError&&this.common.gteHardfork(Ne.sr.SpuriousDragon)&&d.returnValue.length>Number(this.common.param("maxCodeSize"))&&(h=!1);let p=!1;var m,g;if(f<=e.gasLimit&&(this.allowUnlimitedContractSize||h)?this.common.isActivatedEIP(3541)&&d.returnValue[0]===s?this.common.isActivatedEIP(3540)&&Ge(e.code)?d.executionGasUsed=f:d={...d,...no(e.gasLimit)}:d.executionGasUsed=f:this.common.gteHardfork(Ne.sr.Homestead)?h?(this.DEBUG&&Ji("Contract creation: out of gas"),e.accessWitness?.revert(),d={...d,...to(e.gasLimit)}):(this.DEBUG&&Ji("Code size exceeds maximum code size (>= SpuriousDragon)"),d={...d,...(g=e.gasLimit,{returnValue:new Uint8Array(0),executionGasUsed:g,exceptionError:new xe(xe.errorMessages.CODESIZE_EXCEEDS_MAXIMUM)})}):f-l<=e.gasLimit?(this.DEBUG&&Ji("Not enough gas to pay the code deposit fee (Frontier)"),e.accessWitness?.revert(),d={...d,...(m=f-l,{returnValue:new Uint8Array(0),executionGasUsed:m,exceptionError:new xe(xe.errorMessages.CODESTORE_OUT_OF_GAS)})},p=!0):(this.DEBUG&&Ji("Contract creation: out of gas"),e.accessWitness?.revert(),d={...d,...to(e.gasLimit)}),t=e.gasLimit-d.executionGasUsed,!d.exceptionError&&(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864))){const n=e.accessWitness.writeAccountHeader(e.to);t-=n,t<r.ZUg?(this.DEBUG&&Ji(`ContractCreateComplete access gas (${n}) caused OOG (-> ${t})`),e.accessWitness?.revert(),d={...d,...to(e.gasLimit)}):(Ji(`ContractCreateComplete access used (${n}) gas (-> ${t})`),d.executionGasUsed+=n)}if(d.exceptionError||void 0===d.returnValue||0===d.returnValue.length){if(p&&!this.common.gteHardfork(Ne.sr.Homestead)){const t=await this.stateManager.getAccount(e.to);await this.journal.putAccount(e.to,t??new r.gDM)}}else{if(this.common.isActivatedEIP(6800)||this.common.isActivatedEIP(7864)){const n=e.accessWitness.writeAccountCodeChunks(e.to,0,d.returnValue.length-1);t-=n,t<r.ZUg?(this.DEBUG&&Ji(`byteCodeWrite access gas (${n}) caused OOG (-> ${t})`),e.accessWitness?.revert(),d={...d,...to(e.gasLimit)}):(Ji(`byteCodeWrite access used (${n}) gas (-> ${t})`),e.accessWitness?.commit(),d.executionGasUsed+=n)}await this.stateManager.putCode(e.to,d.returnValue),this.DEBUG&&Ji("Code saved on new contract creation")}return 0===e.depth&&this.postMessageCleanup(),{createdAddress:e.to,execResult:d}}async runInterpreter(e,t={}){let n=await this.stateManager.getAccount(e.to??(0,r.hMq)());n||(n=new r.gDM);const s={address:e.to??(0,r.hMq)(),caller:e.caller??(0,r.hMq)(),callData:e.data??Uint8Array.from([0]),callValue:e.value??r.ZUg,code:e.code,isStatic:e.isStatic??!1,isCreate:e.isCreate??!1,depth:e.depth??0,gasPrice:this._tx.gasPrice,origin:this._tx.origin??e.caller??(0,r.hMq)(),block:this._block??so(),contract:n,codeAddress:e.codeAddress,gasRefund:e.gasRefund,chargeCodeAccesses:e.chargeCodeAccesses,blobVersionedHashes:e.blobVersionedHashes??[],accessWitness:e.accessWitness,createdAddresses:e.createdAddresses},i=new xt(this,this.stateManager,this.blockchain,s,e.gasLimit,this.journal,this.performanceLogger,this._optsCached.profiler);e.selfdestruct&&(i._result.selfdestruct=e.selfdestruct),e.createdAddresses&&(i._result.createdAddresses=e.createdAddresses);const o=await i.run(e.code,t);let a=i._result,c=e.gasLimit-o.runState.gasLeft;return o.exceptionError&&(o.exceptionError.error!==xe.errorMessages.REVERT&&o.exceptionError.error!==xe.errorMessages.INVALID_EOF_FORMAT&&(c=e.gasLimit),a={...a,logs:[],selfdestruct:new Set,createdAddresses:new Set}),e.accessWitness?.commit(),{...a,runState:{...o.runState,...a,...i._env},exceptionError:o.exceptionError,gas:o.runState?.gasLeft,executionGasUsed:c,gasRefund:o.runState.gasRefund,returnValue:a.returnValue??new Uint8Array(0)}}async runCall(e){let t;0!==e.depth&&void 0!==e.message||!0!==this._optsCached.profiler?.enabled||(t=this.performanceLogger.startTimer("Initialization"));let n,s,i=e.message;if(!i){this._block=e.block??so();const t=e.caller??(0,r.hMq)();this._tx={gasPrice:e.gasPrice??r.ZUg,origin:e.origin??t};const s=e.value??r.ZUg;!0===e.skipBalance&&(n=await this.stateManager.getAccount(t),n||(n=new r.gDM),n.balance<s&&(n.balance=s,await this.journal.putAccount(t,n))),i=new He({caller:t,gasLimit:e.gasLimit??BigInt(16777215),to:e.to,value:s,data:e.data,code:e.code,depth:e.depth,isCompiled:e.isCompiled,isStatic:e.isStatic,salt:e.salt,selfdestruct:e.selfdestruct??new Set,createdAddresses:e.createdAddresses??new Set,delegatecall:e.delegatecall,blobVersionedHashes:e.blobVersionedHashes})}if(0===i.depth&&(n||(n=await this.stateManager.getAccount(i.caller)),n||(n=new r.gDM),n.nonce++,await this.journal.putAccount(i.caller,n),this.DEBUG&&Ji(`Update fromAccount (caller) nonce (-> ${n.nonce}))`)),await this._emit("beforeMessage",i),!i.to&&this.common.isActivatedEIP(2929)&&(i.code=i.data,this.journal.addWarmedAddress((await this._generateAddress(i)).bytes)),await this.journal.checkpoint(),this.common.isActivatedEIP(1153)&&this.transientStorage.checkpoint(),this.DEBUG&&(Ji("-".repeat(100)),Ji("message checkpoint")),this.DEBUG){const{caller:e,gasLimit:t,to:n,value:r,delegatecall:s}=i;Ji(`New message caller=${e} gasLimit=${t} to=${n?.toString()??"none"} value=${r} delegatecall=${s?"yes":"no"}`)}if(i.to?(this.DEBUG&&Ji(`Message CALL execution (to: ${i.to})`),s=await this._executeCall(i)):(this.DEBUG&&Ji("Message CREATE execution (to: undefined)"),s=await this._executeCreate(i)),this.DEBUG){const{executionGasUsed:e,exceptionError:t,returnValue:n}=s.execResult;Ji(`Received message execResult: [ gasUsed=${e} exceptionError=${t?`'${t.error}'`:"none"} returnValue=${(0,r.h0N)(n)} gasRefund=${s.execResult.gasRefund??0} ]`)}const o=s.execResult.exceptionError;return o&&o.error!==xe.errorMessages.CODESTORE_OUT_OF_GAS&&(s.execResult.selfdestruct=new Set,s.execResult.createdAddresses=new Set,s.execResult.gasRefund=r.ZUg),!o||this.common.hardfork()===Ne.sr.Chainstart&&o.error===xe.errorMessages.CODESTORE_OUT_OF_GAS?(await this.journal.commit(),this.common.isActivatedEIP(1153)&&this.transientStorage.commit(),this.DEBUG&&Ji("message checkpoint committed")):(s.execResult.logs=[],await this.journal.revert(),this.common.isActivatedEIP(1153)&&this.transientStorage.revert(),this.DEBUG&&Ji("message checkpoint reverted")),await this._emit("afterMessage",s),0===i.depth&&!0===this._optsCached.profiler?.enabled&&this.performanceLogger.stopTimer(t,0),i.accessWitness?.commit(),s}async runCode(e){this._block=e.block??so(),this._tx={gasPrice:e.gasPrice??r.ZUg,origin:e.origin??e.caller??(0,r.hMq)()};const t=new He({code:e.code,data:e.data,gasLimit:e.gasLimit??BigInt(16777215),to:e.to??(0,r.hMq)(),caller:e.caller,value:e.value,depth:e.depth,selfdestruct:e.selfdestruct??new Set,isStatic:e.isStatic,blobVersionedHashes:e.blobVersionedHashes});return this.runInterpreter(t,{pc:e.pc})}getPrecompile(e){return this.precompiles.get((0,r.od$)(e.bytes))}runPrecompile(e,t,n){if("function"!=typeof e)throw(0,r.mQ1)("Invalid precompile");return e({data:t,gasLimit:n,common:this.common,_EVM:this,_debug:this.DEBUG?eo:void 0,stateManager:this.stateManager})}async _loadCode(e){if(!e.code){const t=this.getPrecompile(e.codeAddress);if(t)e.code=t,e.isCompiled=!0;else{if(e.code=await this.stateManager.getCode(e.codeAddress),this.common.isActivatedEIP(7702)&&(0,r.NDp)(e.code.slice(0,3),ut)){const t=new r.pVw(e.code.slice(3,24));e.code=await this.stateManager.getCode(t),0===e.depth&&this.journal.addAlwaysWarmAddress(t.toString())}e.isCompiled=!1,e.chargeCodeAccesses=!0}}}async _generateAddress(e){let t;if(e.salt)t=(0,r.iyX)(e.caller.bytes,e.salt,e.code);else{let n=await this.stateManager.getAccount(e.caller);n||(n=new r.gDM);const s=n.nonce-r.exu;t=(0,r.YIe)(e.caller.bytes,(0,r.CZI)(s))}return new r.pVw(t)}async _reduceSenderBalance(e,t){if(e.balance-=t.value,e.balance<r.ZUg)throw new xe(xe.errorMessages.INSUFFICIENT_BALANCE);const n=this.journal.putAccount(t.caller,e);return this.DEBUG&&Ji(`Reduced sender (${t.caller}) balance (-> ${e.balance})`),n}async _addToBalance(e,t){const n=e.balance+t.value;if(n>r.GEt)throw new xe(xe.errorMessages.VALUE_OVERFLOW);e.balance=n,await this.journal.putAccount(t.to,e),this.DEBUG&&Ji(`Added toAccount (${t.to}) balance (-> ${e.balance})`)}postMessageCleanup(){this.common.isActivatedEIP(1153)&&this.transientStorage.clear()}shallowCopy(){const e=this.common.copy();e.setHardfork(this.common.hardfork());const t={...this._optsCached,common:e,stateManager:this.stateManager.shallowCopy()};return t.stateManager.common=e,new io(t)}getPerformanceLogs(){return this.performanceLogger.getLogs()}clearPerformanceLogs(){this.performanceLogger.clear()}}io.supportedHardforks=[Ne.sr.Chainstart,Ne.sr.Homestead,Ne.sr.Dao,Ne.sr.TangerineWhistle,Ne.sr.SpuriousDragon,Ne.sr.Byzantium,Ne.sr.Constantinople,Ne.sr.Petersburg,Ne.sr.Istanbul,Ne.sr.MuirGlacier,Ne.sr.Berlin,Ne.sr.London,Ne.sr.ArrowGlacier,Ne.sr.GrayGlacier,Ne.sr.MergeNetsplitBlock,Ne.sr.Paris,Ne.sr.Shanghai,Ne.sr.Cancun,Ne.sr.Prague,Ne.sr.Osaka,Ne.sr.Bpo1,Ne.sr.Bpo2,Ne.sr.Bpo3,Ne.sr.Bpo4,Ne.sr.Bpo5];Be("evm:binaryTree:aw"),BigInt(1900),BigInt(200),BigInt(3e3),BigInt(500),BigInt(6200);n(27898)},97713(e,t,n){"use strict";n.d(t,{w:()=>i});var r=n(38628);class s extends r.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,r.sd)(e);const n=(0,r.ZJ)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let r=0;r<i.length;r++)i[r]^=54;this.iHash.update(i),this.oHash=e.create();for(let r=0;r<i.length;r++)i[r]^=106;this.oHash.update(i),(0,r.uH)(i)}update(e){return(0,r.CC)(this),this.iHash.update(e),this}digestInto(e){(0,r.CC)(this),(0,r.DO)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:o}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(e,t,n)=>new s(e,t).update(n).digest();i.create=(e,t)=>new s(e,t)}}]);