(self.webpackChunk_ethdebug_format_web=self.webpackChunk_ethdebug_format_web||[]).push([[7626],{33552:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var i=n(52322),s=n(45392),a=n(51114);const r={sidebar_position:3},o="Data and machines",c={id:"implementation-guides/pointers/types/data-and-machines",title:"Data and machines",description:"The @ethdebug/pointers package includes two abstractions that it uses for",source:"@site/docs/implementation-guides/pointers/types/data-and-machines.mdx",sourceDirName:"implementation-guides/pointers/types",slug:"/implementation-guides/pointers/types/data-and-machines",permalink:"/format/docs/implementation-guides/pointers/types/data-and-machines",draft:!1,unlisted:!1,editUrl:"https://github.com/ethdebug/format/tree/main/packages/web/docs/implementation-guides/pointers/types/data-and-machines.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docsSidebar",previous:{title:"Pointer types",permalink:"/format/docs/implementation-guides/pointers/types/pointer-types"},next:{title:"Cursor objects",permalink:"/format/docs/implementation-guides/pointers/types/cursors"}},d={},l=[{value:"Data",id:"data",level:2},{value:"Machine",id:"machine",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"data-and-machines",children:"Data and machines"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"@ethdebug/pointers"})," package includes two abstractions that it uses for\nrepresenting low-level concerns:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"class Data"})," extends JavaScript's ",(0,i.jsx)(t.code,{children:"Uint8Array"})," to represent sequences of\nbytes and allow conversion to/from different formats (like hex strings)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"interface Machine"})," defines an asynchronous API to model a running EVM.\nIt includes the sole method ",(0,i.jsx)(t.code,{children:"trace(): AsyncIterable<Machine.State>"}),",\nwhere the ",(0,i.jsx)(t.code,{children:"Machine.State"})," type represents point-in-time access to a\nrunning EVM at a particular program counter in a particular execution\ncontext, etc."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"data",children:"Data"}),"\n",(0,i.jsxs)(t.admonition,{type:"tip",children:[(0,i.jsxs)(t.p,{children:["Note how this implementation handles the conversion to/from JavaScript's\n",(0,i.jsx)(t.code,{children:"number"})," and ",(0,i.jsx)(t.code,{children:"bigint"})," types. The EVM orders numerical values' bytes by\nstarting with the most significant byte first (i.e., they are\n",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Endianness",children:"big-endian"}),")."]}),(0,i.jsx)(t.p,{children:"When implementing this functionality, be careful not to get this wrong."})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:["Code listing for ",(0,i.jsx)(t.code,{children:"src/data.ts"})]}),(0,i.jsx)(a.Z,{packageName:"@ethdebug/pointers",sourcePath:"src/data.ts"})]}),"\n",(0,i.jsx)(t.h2,{id:"machine",children:"Machine"}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:["Code listing for ",(0,i.jsx)(t.code,{children:"src/machine.ts"})]}),(0,i.jsx)(a.Z,{packageName:"@ethdebug/pointers",sourcePath:"src/machine.ts"})]})]})}function p(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},48313:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=48313,e.exports=t},51114:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(84560),s=n.n(i),a=n(20477),r=n(42408);var o=n(52322);function c(e){let{packageName:t,sourcePath:n,extract:i,...c}=e;const d=function(e){const{packages:t}=(0,r.eZ)("project-code-plugin");if(!(e in t))throw new Error(`Unknown package name ${e}`);const{sourceFiles:n}=t[e],i=new a.IKL({useInMemoryFileSystem:!0});for(const{filePath:s,text:a}of n)i.createSourceFile(s,a,{overwrite:!0});return i}(t),l=d.getSourceFileOrThrow(n);if(!i)return(0,o.jsx)(s(),{title:n,language:"typescript",showLineNumbers:!0,children:l.getFullText()});const h=i(l,d);return(0,o.jsx)(s(),{language:"typescript",...c,children:h.getFullText().trim()})}},56699:()=>{},68379:()=>{},68382:()=>{},78867:()=>{},21212:()=>{},89854:()=>{},25800:()=>{},93037:()=>{},26996:()=>{}}]);