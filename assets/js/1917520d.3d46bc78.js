"use strict";(globalThis.webpackChunk_ethdebug_format_web=globalThis.webpackChunk_ethdebug_format_web||[]).push([[5792],{11648(e,t,s){s.r(t),s.d(t,{default:()=>d});s(14041);var n=s(84872),r=s.n(n),a=s(38397),i=s(73584),o=s(40665),c=s(66010),h=s(77709),l=s(31085);function p({schemaWithoutUnnecessaryComposition:e,unnecessaryCompositionKeyword:t,unnecessarilyComposedSchema:s}){const n=(0,a.useJSVOptionsContext)(),{schemaIndex:r}=(0,i.wQ)(),p=s,m=e,{documentation:u,semantics:f}=function(e){if("boolean"==typeof e)return{documentation:{},semantics:e};const{title:t,description:s,examples:n,default:r,[i._K]:a,...o}=e,c=Object.entries({title:t,description:s,examples:n,default:r}).filter((e=>void 0!==e[1])).map((([e,t])=>({[e]:t}))).reduce(((e,t)=>({...e,...t})),{});return{documentation:c,semantics:o}}(m);if(0===Object.keys(f).length||1===Object.keys(f).length&&"type"in f&&"object"==typeof p&&"type"in p&&("string"==typeof f.type&&f.type===p.type||f.type instanceof Array&&p.type instanceof Array&&f.type.length===p.type.length&&f.type.every((e=>p.type.includes(e))))){if(1===Object.keys(u).length&&"title"in u)return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(a.SchemaHierarchyComponent,{innerJsonPointer:`/${t}/0`,children:(0,l.jsx)(d,{schema:s})})});const{description:e}=u;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.QualifierMessages,{schema:u,options:n}),e&&(0,l.jsx)(h.CreateDescription,{description:e}),(0,l.jsx)("hr",{}),(0,l.jsx)(a.SchemaHierarchyComponent,{innerJsonPointer:`/${t}/0`,children:(0,l.jsx)(d,{schema:s})})]})}const{[i._K]:y}=p;if(y&&y in r){const{href:e,title:t=`${y.startsWith("schema:")?y.slice(7):y} schema`}=r[y];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"badge badge--info",children:"extensions"}),"\xa0 This schema extends the ",(0,l.jsx)(o.A,{to:e,children:t}),".",(0,l.jsx)("p",{children:(0,l.jsx)(d,{schema:m})})]})}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"badge badge--info",children:"extensions"}),"\xa0 These extensions apply to the base schema below:",(0,l.jsx)("p",{children:(0,l.jsx)(d,{schema:m})}),(0,l.jsx)(Collapsible,{summary:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("strong",{children:(0,l.jsx)(c.GenerateFriendlyName,{schema:p})}),"\xa0",(0,l.jsx)("span",{className:"badge badge--info",children:"base schema"})]}),detailsProps:{open:!0},children:(0,l.jsx)(a.SchemaHierarchyComponent,{innerJsonPointer:`/${t}/0`,children:(0,l.jsx)(d,{schema:s})})})]})}function d(e){const{level:t}=(0,a.useSchemaHierarchyContext)(),{schemaIndex:s}=(0,i.wQ)(),{schema:n,...c}=e,{[i._K]:h}=n;if(h&&h in s&&t>0){const{href:e,title:t=`${h.startsWith("schema:")?h.slice(7):h} schema`}=s[h];return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("p",{children:["See ",(0,l.jsx)(o.A,{to:e,children:t})," documentation."]})})}const d=function(e){if("boolean"==typeof e)return;const t=["allOf","oneOf","anyOf"].filter((t=>t in e&&1===(e[t]||[]).length));if(1!==t.length)return;const[s]=t,{[s]:n,...r}=e,[a]=n;return{unnecessarilyComposedSchema:a,unnecessaryCompositionKeyword:s,schemaWithoutUnnecessaryComposition:r}}(n);return d?(0,l.jsx)(p,{...d}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r(),{schema:n,...c})})}},13095(e,t,s){s.r(t),s.d(t,{assets:()=>u,contentTitle:()=>m,default:()=>g,frontMatter:()=>d,metadata:()=>n,toc:()=>f});const n=JSON.parse('{"id":"type/base","title":"Base schema","description":"The schema on this page is extended by other, more specific schemas as part of","source":"@site/spec/type/base.mdx","sourceDirName":"type","slug":"/type/base","permalink":"/format/spec/type/base","draft":false,"unlisted":false,"editUrl":"https://github.com/ethdebug/format/tree/main/packages/web/spec/type/base.mdx","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"function","permalink":"/format/spec/type/complex/function"},"next":{"title":"Overview","permalink":"/format/spec/pointer/overview"}}');var r=s(31085),a=s(71184),i=s(69436),o=s(57821),c=s(53263),h=s(73580),l=s(35758),p=s.n(l);const d={sidebar_position:6},m="Base schema",u={},f=[{value:"Differences from <strong>ethdebug/format/type</strong>",id:"differences-from-ethdebugformattype",level:2},{value:"Unconstrained <code>kind</code> field",id:"unconstrained-kind-field",level:3},{value:"The <code>class</code> field is always optional",id:"the-class-field-is-always-optional",level:3},{value:"A complex base type <code>contains</code> other base types",id:"a-complex-base-type-contains-other-base-types",level:3},{value:"Base type wrapper schema",id:"base-type-wrapper-schema",level:4},{value:"Full base schema",id:"full-base-schema",level:2},{value:"Example schema extensions for particular types",id:"example-schema-extensions-for-particular-types",level:2}];function y(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"base-schema",children:"Base schema"})}),"\n",(0,r.jsxs)(t.admonition,{type:"warning",children:[(0,r.jsxs)(t.p,{children:["The schema on this page is extended by other, more specific schemas as part of\nthe larger ",(0,r.jsx)(t.strong,{children:"ethdebug/format"})," specification. These other schemas specify the\nrepresentation of many common kinds of types (e.g. including signed/unsigned\nintegers, arrays, structs, mappings, etc.). In order to adhere to this format\nfully, compilers that represent known types ",(0,r.jsx)(t.strong,{children:"should"})," do so with the\nappropriate more-specific schema."]}),(0,r.jsxs)(t.p,{children:["Please see the ",(0,r.jsx)(t.a,{href:"/spec/type",children:(0,r.jsx)(t.strong,{children:"ethdebug/format/type"})})," schema for representing\nthese supported types."]})]}),"\n",(0,r.jsxs)(t.p,{children:["This format defines the ",(0,r.jsx)(t.strong,{children:"ethdebug/format/type/base"})," schema for\nrepresenting data types from high-level languages. These types may be\nuser-defined or supplied as native data types in a language. This schema\naffords the representation of complex/parametric types, whose definition\ncomposes other types (e.g., arrays and structs, which contain at least one\nunderlying type)."]}),"\n",(0,r.jsxs)(t.p,{children:["This base schema itself is designed to be extended by other schemas in this\nformat, namely ",(0,r.jsx)(t.strong,{children:"ethdebug/format/type"}),". It serves to specify what is\n",(0,r.jsx)(t.em,{children:"minimally necessary"})," for a type to be a valid representation (i.e., all type\nrepresentations ",(0,r.jsx)(t.strong,{children:"must"})," adhere to at least this base schema)."]}),"\n",(0,r.jsx)(o.A,{toc:f}),"\n",(0,r.jsxs)(t.h2,{id:"differences-from-ethdebugformattype",children:["Differences from ",(0,r.jsx)(t.strong,{children:"ethdebug/format/type"})]}),"\n",(0,r.jsx)(t.p,{children:"This base schema defines the structure of a type representation without respect\nto any known kind of type."}),"\n",(0,r.jsxs)(t.h3,{id:"unconstrained-kind-field",children:["Unconstrained ",(0,r.jsx)(t.code,{children:"kind"})," field"]}),"\n",(0,r.jsxs)(t.p,{children:["As described in key concepts\n",(0,r.jsxs)(t.a,{href:"/spec/type/concepts#types-are-organized-by-kind",children:["Types are organized by ",(0,r.jsx)(t.code,{children:"kind"})]}),"\nand\n",(0,r.jsx)(t.a,{href:"/spec/type/concepts#known-vs-unknown-kinds",children:"Known vs. unknown kinds"}),",\n",(0,r.jsx)(t.strong,{children:"ethdebug/format/type"})," imposes constraints on type representations' ",(0,r.jsx)(t.code,{children:"kind"}),"\nfield. This base schema makes no restriction on the value of this field\n(other than it ",(0,r.jsx)(t.strong,{children:"must"})," be defined and ",(0,r.jsx)(t.strong,{children:"must"})," be a string)."]}),"\n",(0,r.jsxs)(t.admonition,{title:"Note to implementers",type:"note",children:[(0,r.jsxs)(t.p,{children:["The primary purpose for the ",(0,r.jsx)(t.code,{children:"kind"})," field is to discriminate type objects\ninto the appropriate corresponding subschema for a well-understood family of type.\nAlthough ",(0,r.jsx)(t.strong,{children:"ethdebug/format/type/base"})," does not impose any constraints on\nobjects based on the ",(0,r.jsx)(t.code,{children:"kind"})," field, it includes this field so as to encourage\nthe one-to-one pairing between values for this field and corresponding\nsubschemas."]}),(0,r.jsxs)(t.p,{children:["When extending this schema, there ",(0,r.jsx)(t.strong,{children:"should"})," exist exactly one corresponding\nschema for each ",(0,r.jsx)(t.code,{children:"kind"})," value."]})]}),"\n",(0,r.jsxs)(t.h3,{id:"the-class-field-is-always-optional",children:["The ",(0,r.jsx)(t.code,{children:"class"})," field is always optional"]}),"\n",(0,r.jsxs)(t.p,{children:["Although ",(0,r.jsx)(t.strong,{children:"ethdebug/format/type"})," does not require the ",(0,r.jsx)(t.code,{children:"class"})," field to be\ndefined for known types, it does require this field for representations of\nunknown types."]}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.strong,{children:"ethdebug/format/type/base"})," schema does not ever require this field."]}),"\n",(0,r.jsxs)(t.h3,{id:"a-complex-base-type-contains-other-base-types",children:["A complex base type ",(0,r.jsx)(t.code,{children:"contains"})," other base types"]}),"\n",(0,r.jsxs)(t.p,{children:["As described in key concept\n",(0,r.jsx)(t.a,{href:"/spec/type/concepts#elementary-vs-complex-types",children:"Elementary vs. complex types"}),",\nthis format allows the representation of types whose definition\nincludes other types. Both the primary schema and this base schema\nrequire type composition to be represented via complex types' ",(0,r.jsx)(t.code,{children:"contains"})," field."]}),"\n",(0,r.jsxs)(t.p,{children:["These two schemas differ by which type schema this field is\npermitted to compose. Naturally, ",(0,r.jsx)(t.strong,{children:"ethdebug/format/type"}),"'s ",(0,r.jsx)(t.code,{children:"contains"})," field\ncomposes ",(0,r.jsx)(t.strong,{children:"ethdebug/format/type"})," representations, and\n",(0,r.jsx)(t.strong,{children:"ethdebug/format/type/base"}),"'s ",(0,r.jsx)(t.code,{children:"contains"})," field composes\n",(0,r.jsx)(t.strong,{children:"ethdebug/format/type/base"})," representations."]}),"\n",(0,r.jsxs)(t.p,{children:["As a result of this, ",(0,r.jsx)(t.strong,{children:"ethdebug/format/type/base"})," defines its own type wrapper\nschema."]}),"\n",(0,r.jsx)(t.h4,{id:"base-type-wrapper-schema",children:"Base type wrapper schema"}),"\n",(0,r.jsx)(i.A,{schema:{id:"schema:ethdebug/format/type/base"},pointer:"#/$defs/TypeWrapper"}),"\n",(0,r.jsx)(t.h2,{id:"full-base-schema",children:"Full base schema"}),"\n",(0,r.jsx)(i.A,{schema:{id:"schema:ethdebug/format/type/base"}}),"\n",(0,r.jsx)(t.h2,{id:"example-schema-extensions-for-particular-types",children:"Example schema extensions for particular types"}),"\n",(0,r.jsxs)(t.p,{children:["These examples show valid schemas that extend ",(0,r.jsx)(t.strong,{children:"ethdebug/format/types/base"}),"\nfor particular kinds of types."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsxs)(t.em,{children:[(0,r.jsx)(t.strong,{children:"Note"}),": These are just examples and may not\ncorrespond to the canonical ",(0,r.jsx)(t.strong,{children:"ethdebug/format/type"})," schema."]})}),"\n",(0,r.jsxs)(c.default,{defaultValue:"uint",values:[{value:"uint",label:"Example uint type schema"},{value:"array",label:"Example array type schema"},{value:"mapping",label:"Example mapping type schema"}],children:[(0,r.jsx)(h.default,{value:"uint",children:(0,r.jsx)(i.A,{schema:p()`
        $schema: "https://json-schema.org/draft/2020-12/schema"
        type: object
        properties:
          class:
            type: string
            const: elementary
          kind:
            type: string
            const: uint
          bits:
            type: number
            multipleOf: 8
            minimum: 8
            maximum: 256
        required:
          - kind
          - bits
        examples:
          - kind: uint
            bits: 64
      `})}),(0,r.jsx)(h.default,{value:"array",children:(0,r.jsx)(i.A,{schema:p()`
        $schema: "https://json-schema.org/draft/2020-12/schema"
        type: object
        properties:
          class:
            type: string
            const: complex
          kind:
            type: string
            const: array
          contains:
            type: object
            properties:
              type:
                $ref: "schema:ethdebug/format/type/base"
            required:
              - type
        required:
          - kind
          - contains
        examples:
          - kind: array
            contains:
              type:
                kind: string
        description:
          An example schema for array types. See example value for representing
          an array of strings (\`string[]\`).
      `})}),(0,r.jsx)(h.default,{value:"mapping",children:(0,r.jsx)(i.A,{schema:p()`
        $schema: "https://json-schema.org/draft/2020-12/schema"
        title: Example mapping type schema
        type: object
        properties:
          class:
            type: string
            const: complex
          kind:
            type: string
            const: array
          contains:
            type: object
            properties:
              key:
                type: object
                properties:
                  type:
                    $ref: "schema:ethdebug/format/type/base"
                required:
                  - type
              value:
                type: object
                properties:
                  type:
                    $ref: "schema:ethdebug/format/type/base"
                required:
                  - type
            required:
              - key
              - value
        required:
          - kind
          - contains
        examples:
          - kind: mapping
            contains:
              key:
                type:
                  kind: address
                  payable: true
              value:
                type:
                  kind: uint
                  bits: 256
        description:
          An example schema for mapping types. See example value for a mapping
          from an \`address payable\` to a \`uint256\`, adhering to this
          example schema.
      `})})]})]})}function g(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(y,{...e})}):y(e)}},59878(e,t,s){s.r(t),s.d(t,{default:()=>f});s(14041);var n=s(60728),r=s.n(n),a=s(53263),i=s(73580),o=s(38397),c=s(32049),h=s(31085);function l({propertyName:e,schemasByConst:t}){const{jsonPointer:s,level:n}=(0,o.useSchemaHierarchyContext)();return(0,h.jsxs)("div",{children:[(0,h.jsx)("hr",{}),(0,h.jsx)("span",{className:"badge badge--info",children:"polymorphic discriminator"}),"\xa0 The value of the ",(0,h.jsx)("strong",{children:e})," field determines which sub-schema applies:",(0,h.jsx)(a.default,{children:Object.entries(t).map((([e,{schema:t,index:r}])=>(0,h.jsx)(i.default,{label:e,value:e,children:(0,h.jsx)(o.SchemaHierarchyContextProvider,{value:{level:n+1,jsonPointer:`${s}/allOf/${r}/then`},children:(0,h.jsx)(c.CreateNodes,{schema:t})})},e)))})]})}function p({propertyNames:e,schemasByPropertyName:t}){const{jsonPointer:s,level:n}=(0,o.useSchemaHierarchyContext)();return(0,h.jsxs)("div",{children:[(0,h.jsx)("hr",{}),(0,h.jsx)("span",{className:"badge badge--info",children:"mutually-exclusive required properties"}),"\xa0 This object must specify exactly one of the following:",(0,h.jsx)("ul",{children:e.map(((e,t)=>(0,h.jsx)("li",{children:(0,h.jsx)("code",{children:e})},t)))}),"Depending on which required property is used, one of the following sub-schemas applies:",(0,h.jsx)(a.default,{children:Object.entries(t).map((([e,{schema:t,index:r}])=>(0,h.jsx)(i.default,{label:"title"in t&&"string"==typeof t.title&&t.title||e,value:e,children:(0,h.jsx)(o.SchemaHierarchyContextProvider,{value:{level:n+1,jsonPointer:`${s}/allOf/${r+1}/then`},children:(0,h.jsx)(c.CreateNodes,{schema:t})})},e)))})]})}function d({propertyNames:e,schemasByPropertyName:t}){const{jsonPointer:s,level:n}=(0,o.useSchemaHierarchyContext)();return(0,h.jsxs)("div",{children:[(0,h.jsx)("hr",{}),(0,h.jsx)("span",{className:"badge badge--info",children:"independently-inclusive required properties"}),"\xa0 This object may specify any of the following:",(0,h.jsx)("ul",{children:e.map(((e,t)=>(0,h.jsx)("li",{children:(0,h.jsx)("code",{children:e})},t)))}),"Depending on which required properties are used, the following corresponding sub-schemas may apply:",(0,h.jsx)(a.default,{children:Object.entries(t).map((([e,{schema:t,index:r}])=>(0,h.jsx)(i.default,{label:"title"in t&&"string"==typeof t.title&&t.title||e,value:e,children:(0,h.jsx)(o.SchemaHierarchyContextProvider,{value:{level:n+1,jsonPointer:`${s}/allOf/${r+1}/then`},children:(0,h.jsx)(c.CreateNodes,{schema:t})})},e)))})]})}const m=e=>"boolean"!=typeof e&&"if"in e&&"then"in e,u=e=>"boolean"!=typeof e&&"required"in e&&1===e.required?.length;function f(e){const{schema:t}=e,s=function(e){const{allOf:t}=e;if(!t.every((e=>{if("boolean"==typeof e)return!1;const{title:t,description:s,if:n,then:r,...a}=e;return!!n&&!!r&&0===Object.keys(a).length})))return;if(!t.every((e=>{const{if:t}=e;if("boolean"==typeof t||!("properties"in t)||!t.properties)return!1;const s=t.properties;if(1!==Object.keys(s).length)return!1;const n=s[Object.keys(s)[0]];return"object"==typeof n&&"const"in n&&"string"==typeof n.const&&!!n.const})))return;const s=Object.keys(t[0].if.properties)[0],n=t.map((({if:e,then:t},n)=>({[e.properties[s].const]:{schema:t,index:n}}))).reduce(((e,t)=>({...e,...t})),{});return Object.keys(n).length===t.length?{propertyName:s,schemasByConst:n}:void 0}(t);if(s)return(0,h.jsx)(l,{...s});const n=function(e){const{allOf:t}=e,[s,...n]=t;if("boolean"==typeof s||!("oneOf"in s))return;const{oneOf:r}=s;if(!r||!r.every((e=>"object"==typeof e&&"required"in e&&e.required instanceof Array&&1===e.required.length)))return;const a=r.map((({required:[e]})=>e));if(n.length!==a.length)return;if(!n.every((e=>{if("boolean"==typeof e)return!1;const{title:t,description:s,if:n,then:r,...a}=e;return!!n&&!!r&&0===Object.keys(a).length})))return;if(!n.every((e=>{const{if:t}=e;if("boolean"==typeof t||!("required"in t))return!1;const{required:s}=t;if(!s||1!==s.length)return!1;const[n]=s;return"string"==typeof n&&!!n})))return;return{propertyNames:a,schemasByPropertyName:n.map((({if:{required:[e]},then:t},s)=>({[e]:{schema:t,index:s}}))).reduce(((e,t)=>({...e,...t})),{})}}(t);if(n)return(0,h.jsx)(p,{...n});const a=function(e){const{allOf:t}=e;if(!t.every(m))return;const s=t.map((({if:e})=>e));if(!s.every(u))return;const n=[...new Set(s.map((({required:[e]})=>e)))];return n.length!==s.length?void console.debug("property names are not unique"):{propertyNames:n,schemasByPropertyName:t.map((({if:{required:[e]},then:t},s)=>({[e]:{schema:t,index:s}}))).reduce(((e,t)=>({...e,...t})),{})}}(t);return a?(0,h.jsx)(d,{...a}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(r(),{...e})})}},69436(e,t,s){s.d(t,{A:()=>$});var n=s(14041),r=s(54648),a=s.n(r),i=s(54034),o=s.n(i),c=s(53263),h=s(73580),l=s(31917);const p={...{"schema:ethdebug/format/type/base":{title:"ethdebug/format/type/base schema",href:"/spec/type/base"},"schema:ethdebug/format/type/base#/$defs/TypeWrapper":{title:"Base type wrapper schema",href:"/spec/type/base#base-type-wrapper-schema"},"schema:ethdebug/format/type/wrapper":{title:"Type wrapper schema",href:"/spec/type/concepts#type-wrapper-schema"},"schema:ethdebug/format/type/reference":{title:"Type reference schema",href:"/spec/type/concepts#type-reference-schema"},"schema:ethdebug/format/type/definition":{title:"Type definition schema",href:"/spec/type/concepts#type-definition-schema"},"schema:ethdebug/format/type":{href:"/spec/type"},"schema:ethdebug/format/type/elementary":{href:"/spec/type#elementary-type-schema"},"schema:ethdebug/format/type/complex":{href:"/spec/type#complex-type-schema"},...["uint","int","ufixed","fixed","bool","bytes","string","address","contract","enum"].map((e=>({[`schema:ethdebug/format/type/elementary/${e}`]:{href:`/spec/type/elementary/${e}`}}))).reduce(((e,t)=>({...e,...t})),{}),...["alias","tuple","array","mapping","struct","function"].map((e=>({[`schema:ethdebug/format/type/complex/${e}`]:{href:`/spec/type/complex/${e}`}}))).reduce(((e,t)=>({...e,...t})),{}),"schema:ethdebug/format/type/complex/function#/$defs/Parameters":{title:"Parameters schema",href:"/spec/type/complex/function#parameters-schema"}},...{"schema:ethdebug/format/pointer":{href:"/spec/pointer"},"schema:ethdebug/format/pointer/region":{href:"/spec/pointer/region"},"schema:ethdebug/format/pointer/region/base":{href:"/spec/pointer/region/base"},...["stack","memory","storage","calldata","returndata","transient","code"].map((e=>({[`schema:ethdebug/format/pointer/region/${e}`]:{href:`/spec/pointer/region/location/${e}`}}))).reduce(((e,t)=>({...e,...t})),{}),...["slice","segment"].map((e=>({[`schema:ethdebug/format/pointer/scheme/${e}`]:{href:`/spec/pointer/region/scheme/${e}`}}))).reduce(((e,t)=>({...e,...t})),{}),"schema:ethdebug/format/pointer/collection":{href:"/spec/pointer/collection"},...["group","list","conditional","scope","reference","templates"].map((e=>({[`schema:ethdebug/format/pointer/collection/${e}`]:{href:`/spec/pointer/collection/${e}`}}))).reduce(((e,t)=>({...e,...t})),{}),"schema:ethdebug/format/pointer/expression":{href:"/spec/pointer/expression"},"schema:ethdebug/format/pointer/template":{href:"/spec/pointer/template"},...Object.entries({Literal:{title:"Literal values schema",anchor:"#literal-values"},Variable:{title:"Variable expression schema",anchor:"#variables"},Arithmetic:{title:"Arithmetic operation expression schema",anchor:"#arithmetic-operations"},Lookup:{title:"Lookup expression schema",anchor:"#lookup-region-definition"},Read:{title:"Read expression schema",anchor:"#reading-from-the-evm"},Keccak256:{title:"Keccak256 hash expression schema",anchor:"#keccak256-hashes"},Concat:{title:"Bytes concatenation schema",anchor:"#bytes-concatenation"},Resize:{title:"Resize operation schema",anchor:"#resize-operations"},Reference:{title:"Region reference",anchor:"#region-references"}}).map((([e,{title:t,anchor:s}])=>({[`schema:ethdebug/format/pointer/expression#/$defs/${e}`]:{title:t,href:`/spec/pointer/expression${s}`}}))).reduce(((e,t)=>({...e,...t})),{})},...["value","hex","unsigned"].map((e=>({[`schema:ethdebug/format/data/${e}`]:{href:`/spec/data/${e}`}}))).reduce(((e,t)=>({...e,...t})),{}),"schema:ethdebug/format/materials/id":{title:"Identifier schema",href:"/spec/materials/id#identifier-schema"},"schema:ethdebug/format/materials/reference":{title:"Reference schema",href:"/spec/materials/id#reference-schema"},"schema:ethdebug/format/materials/compilation":{title:"Compilation schema",href:"/spec/materials/compilation"},"schema:ethdebug/format/materials/source":{title:"Source schema",href:"/spec/materials/source"},"schema:ethdebug/format/materials/source-range":{title:"Source range schema",href:"/spec/materials/source-range"},"schema:ethdebug/format/info":{title:"ethdebug/format/info",href:"/spec/info"},...{"schema:ethdebug/format/program":{href:"/spec/program"},"schema:ethdebug/format/program/instruction":{href:"/spec/program/instruction"},"schema:ethdebug/format/program/context":{href:"/spec/program/context"},...["code","variables","remark","pick","gather","frame"].map((e=>({[`schema:ethdebug/format/program/context/${e}`]:{href:`/spec/program/context/${e}`}}))).reduce(((e,t)=>({...e,...t})),{})},"schema:ethdebug/format/info":{href:"/spec/info"},"schema:ethdebug/format/info/resources":{href:"/spec/info/resources"}};var d=s(73584),m=s(87906),u=s(31085);function f(e){const{id:t,pointer:s,schema:n,yaml:r}=(0,l.hZ)(e),a=t?t.startsWith("schema:")?t.slice(7):t:void 0,i=a&&s?`${a}${s}`:a||void 0;return(0,u.jsxs)(c.default,{groupId:"schema-language",children:[(0,u.jsx)(h.default,{value:"yaml",label:"YAML",children:(0,u.jsx)(o(),{className:"schema-listing",language:"yaml",showLineNumbers:!0,title:i||"schema.yaml",children:r})}),(0,u.jsx)(h.default,{value:"json",label:"JSON",children:(0,u.jsx)(o(),{className:"schema-listing",language:"json",showLineNumbers:!0,title:i?`${i}`:"schema.json",children:JSON.stringify(n,void 0,2)})})]})}var y=s(86952),g=s(95500),x=s(75128),b=s.n(x),j=s(21805),v=s(77433),k=s.n(v);function w(e){const{schema:t}=(0,l.hZ)(e),{colorMode:s}=(0,g.G)(),r=t.examples?.[0]??{},a=(0,n.useRef)(null),i=(0,y.useMonaco)(),o=2,c=new(k())({schemas:Object.values(l.jo),allErrors:!0,strict:!1}),[h,p]=(0,n.useState)(r),[d,m]=(0,n.useState)(!1);function f(e){console.error(e)}return(0,n.useEffect)((()=>{d&&function(){const t=c.getSchema(e.schema.id);if(!t)return f("Unable to validate schema");const s=function(){try{return b().parse(h,void 0,{tabWidth:o})}catch{return{data:"",pointers:{}}}}();t(s.data);const n=(0,j.L)({schema:l.jo[e.schema.id],data:s.data,errors:t.errors});console.log(n,t.errors),function(e,t){const s=a.current?.getModel();if(!s||!i)return f("Unable to validate schema");const n=[];if(e)for(const[r,a]of Object.entries(e)){const e=a.path.replace("{base}","").replace(/\./g,"/"),s=t.pointers[e];let r=a.message.replace("{base}","").replace(/\./g,"/");"const"==a.context.errorType&&(r=`Expecting a constant value of "${a.context.allowedValue}"`),s&&r&&(n.push({startLineNumber:s.value.line+1,startColumn:s.value.column+1,endColumn:s.valueEnd.column+1,endLineNumber:s.valueEnd.line+1,message:r,severity:i.MarkerSeverity.Error}),s.key&&s.keyEnd&&n.push({startLineNumber:s.key.line+1,startColumn:s.key.column+1,endColumn:s.keyEnd.column+1,endLineNumber:s.keyEnd.line+1,message:r,severity:i.MarkerSeverity.Error}))}i.editor.setModelMarkers(s,"EthDebug",n)}(n,s)}()}),[h]),(0,u.jsx)("section",{className:"playground-container",children:(0,u.jsx)(y.default,{height:"50vh",language:"json",theme:"dark"==s?"vs-dark":"vs-light",defaultValue:JSON.stringify(r,void 0,o),onChange:function(e){m(!0),p(e)},onMount:function(e){a.current=e},options:{contextmenu:!1,autoIndent:"advanced",tabSize:o}})})}function $(e){const t=(0,l.hZ)(e),{id:s,rootSchema:n,yaml:r,pointer:i}=t,y=O(n,s||"");return(0,u.jsxs)(c.default,{children:[(0,u.jsx)(h.default,{value:"viewer",label:"Explore",children:(0,u.jsx)(d.fn.Provider,{value:{rootSchemaInfo:t,schemaIndex:p},children:(0,u.jsx)(a(),{schema:y,resolverOptions:{jsonPointer:i,resolvers:{schema:{resolve:e=>{const t=e.toString(),{schema:s}=(0,l.hZ)({schema:{id:t}});return O(s,t)}}}},viewerOptions:{showExamples:!0,ValueComponent:({value:e})=>["string","number","bigint","boolean"].includes(typeof e)?(0,u.jsx)("code",{children:e.toString()}):(0,u.jsx)(o(),{language:"json",children:`${JSON.stringify(e,void 0,2)}`}),DescriptionComponent:({description:e})=>(0,u.jsx)(m.oz,{children:e})}})})}),(0,u.jsx)(h.default,{value:"listing",label:"View source",children:(0,u.jsx)(f,{schema:e.schema,pointer:e.pointer})}),(0,u.jsx)(h.default,{value:"playground",label:"Playground",children:(0,u.jsx)(w,{schema:e.schema,pointer:e.pointer})})]})}function O(e,t){return N(S(e),`${t}#`)}function N(e,t){return Array.isArray(e)?e.map(((e,s)=>N(e,`${t}/${s}`))):null!==e&&"object"==typeof e?Object.entries(e).reduce(((e,[s,n])=>(e[s]=N(n,`${t}/${s}`),e)),{[d._K]:t.endsWith("#")?t.slice(0,-1):t}):e}function S(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(S);if(1===Object.keys(e).length&&"$ref"in e)return e;const{$ref:t,...s}=e,n=Object.entries(s).reduce(((e,[t,s])=>(e[t]=S(s),e)),{});if(!t)return n;const r=["allOf","oneOf","anyOf"].find((t=>!(t in e)));if(!r)throw new Error(`Could not find available composition keyword in ${JSON.stringify(e)}`);return n[r]=[{$ref:t}],n}},73584(e,t,s){s.d(t,{_K:()=>i,fn:()=>r,wQ:()=>a});var n=s(14041);const r=(0,n.createContext)({schemaIndex:{}}),a=()=>(0,n.useContext)(r),i=Symbol("__$internalId")},99953(e,t,s){s.r(t),s.d(t,{default:()=>a});s(14041);var n=s(76947),r=s(31085);function a(e){const{schema:t}=e,s=void 0!==t.if,a=void 0!==t.dependentRequired,i=void 0!==t.dependentSchemas,o=void 0!==t.dependencies;return(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsx)(n.IfElseThen,{schema:t}),a&&(0,r.jsx)(n.DependentRequired,{schema:t}),i&&(0,r.jsx)(n.DependentSchemas,{schema:t}),o&&(0,r.jsx)(n.Dependencies,{schema:t})]})}}}]);