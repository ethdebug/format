(self.webpackChunk_ethdebug_format_web=self.webpackChunk_ethdebug_format_web||[]).push([[8232],{89330:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>d,default:()=>m,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var s=n(52322),i=n(45392),r=n(20477),o=n(51114);const a={sidebar_position:1},d="Summary",c={id:"implementation-guides/pointers/testing/summary",title:"Summary",description:"In addition to unit tests for each of the various modules, the",source:"@site/docs/implementation-guides/pointers/testing/summary.mdx",sourceDirName:"implementation-guides/pointers/testing",slug:"/implementation-guides/pointers/testing/summary",permalink:"/format/docs/implementation-guides/pointers/testing/summary",draft:!1,unlisted:!1,editUrl:"https://github.com/ethdebug/format/tree/main/packages/web/docs/implementation-guides/pointers/testing/summary.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docsSidebar",previous:{title:"End-to-end testing",permalink:"/format/docs/category/end-to-end-testing"},next:{title:"Finding example pointers",permalink:"/format/docs/implementation-guides/pointers/testing/example-pointers"}},h={},l=[{value:"Test code",id:"test-code",level:2},{value:"Unmaintained dependencies warning",id:"ganache-warning",level:2}];function u(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",p:"p",strong:"strong",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(t.p,{children:["In addition to unit tests for each of the various modules, the\n",(0,s.jsx)(t.strong,{children:"@ethdebug/pointers"})," reference implementation includes automated integration\ntests that watch the changes to a ",(0,s.jsx)(t.code,{children:"dereference()"}),"d pointer over the course of\nthe execution of some Solidity code, ensuring that all expected values appear in\ntheir expected sequence."]}),"\n",(0,s.jsx)(t.p,{children:"These tests are defined to use a developer-friendly programmatic EVM and\nEthereum JSON-RPC simulator that models an Ethereum blockchain for purposes of\ntransactions and state inspection."}),"\n",(0,s.jsxs)(t.admonition,{type:"warning",children:[(0,s.jsxs)(t.p,{children:["These tests are implemented using\n",(0,s.jsx)(t.a,{href:"https://github.com/trufflesuite/ganache",children:"Ganache"}),", which has been unmaintained\nsince the end of 2023."]}),(0,s.jsxs)(t.p,{children:["See more details ",(0,s.jsx)(t.a,{href:"#ganache-warning",children:"below"}),"."]})]}),"\n",(0,s.jsx)(t.h2,{id:"test-code",children:"Test code"}),"\n",(0,s.jsxs)(t.p,{children:["The following code listing shows the top-level test implementation. These tests\nare written to use the ",(0,s.jsx)(t.a,{href:"https://jestjs.io/",children:"Jest"})," testing framework."]}),"\n",(0,s.jsx)(o.Z,{packageName:"@ethdebug/pointers",sourcePath:"src/integration.test.ts",extract:e=>{const[t]=e.getStatements().filter((e=>{const t=e.getChildrenOfKind(r.lGB.CallExpression);if(0===t.length)return!1;return"describe"===t[0].getChildren()[0].getText()}));return t}}),"\n",(0,s.jsxs)(t.p,{children:["In this code listing, please see how tests are generated programmatically based\non data definitions of each test case. (Notice how the ",(0,s.jsx)(t.code,{children:"observeTraceTests"}),"\nvariable is used.)"]}),"\n",(0,s.jsx)(t.h2,{id:"ganache-warning",children:"Unmaintained dependencies warning"}),"\n",(0,s.jsxs)(t.p,{children:["The testing implementation described in this section uses the unmaintained\n",(0,s.jsx)(t.a,{href:"https://github.com/trufflesuite/ganache",children:"Ganache"}),", thus resulting in\n",(0,s.jsx)(t.strong,{children:"@ethdebug/pointers"})," having a developer dependency on this package. This\ndependency poses ",(0,s.jsx)(t.strong,{children:"no concern"})," for ",(0,s.jsx)(t.strong,{children:"@ethdebug/pointers"})," ",(0,s.jsx)(t.em,{children:"distributions"}),", but\nmay impact future developers who are looking to build/test this reference\nimplementation locally."]}),"\n",(0,s.jsxs)(t.p,{children:["At the time of implementation, Ganache was selected for use in these tests\nbecause it was uniquely suitable for use programmatically inside TypeScript.\nSadly, other options such as Hardhat's ",(0,s.jsx)(t.code,{children:"npx hardhat node"})," and Foundry's Anvil\nwould have required additional setup in the form of operating system process\nmanagement and complex adapter setup."]}),"\n",(0,s.jsx)(t.p,{children:"Due to Ganache's end-of-life timing, these tests are limited in that they cannot\ntest pointers to transient storage. Features from EVM versions before the Cancun\nhardfork should continue to work so long as there are no breaking changes\nintroduced by Node.js."})]})}function m(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},48313:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=48313,e.exports=t},51114:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(84560),i=n.n(s),r=n(20477),o=n(42408);var a=n(52322);function d(e){let{packageName:t,sourcePath:n,extract:s,...d}=e;const c=function(e){const{packages:t}=(0,o.eZ)("project-code-plugin");if(!(e in t))throw new Error(`Unknown package name ${e}`);const{sourceFiles:n}=t[e],s=new r.IKL({useInMemoryFileSystem:!0});for(const{filePath:i,text:r}of n)s.createSourceFile(i,r,{overwrite:!0});return s}(t),h=c.getSourceFileOrThrow(n);if(!s)return(0,a.jsx)(i(),{title:n,language:"typescript",showLineNumbers:!0,children:h.getFullText()});const l=s(h,c);return(0,a.jsx)(i(),{language:"typescript",...d,children:l.getFullText().trim()})}},56699:()=>{},68379:()=>{},68382:()=>{},78867:()=>{},21212:()=>{},89854:()=>{},25800:()=>{},93037:()=>{},26996:()=>{}}]);