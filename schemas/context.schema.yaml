$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "schema:ethdebug/format/context"

title: ethdebug/format/context
description: |
  A schema for representing the information known at compile-time about the
  high-level language concerns at a particular point in code execution.

type: object

properties:
  name:
    description: |
      **Optional**. The name of the context, for use in disambiguating future
      instruction annotations that specify one of several possible contexts
      based on information only available at runtime.
    type: string

  variables:
    $ref: "schema:ethdebug/format/context/variables"

  code:
    $ref: "schema:ethdebug/format/materials/source-range"

minProperties: 1
additionalProperties: false

examples:
  - variables:
      - identifier: x
        declaration:
          source:
            id: 5
          range:
            offset: 10
            length: 56
        type:
          kind: string
        pointer:
          location: storage
          slot: 0
    code:
      source:
        id: 5
      range:
        offset: 68
        length: 16
