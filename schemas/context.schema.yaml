$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "schema:ethdebug/format/context"

title: ethdebug/format/context
description: |
  A schema for representing the information known at compile-time about the
  high-level language concerns at a particular point in code execution.

type: object

properties:
  identifier:
    type: string

  variables:
    type: array
    description: |
      Information about known variables at this context's point in code
      execution, specified as an array whose items each correspond to a unique
      variable.

      Items in this array **should not** have duplicate non-empty `identifier`
      values except where high-level language semantics require it. Where
      possible, use other mechanisms provided by this format to indicate that
      an identifier's corresponding variable is ambiguous.
    items:
      $ref: "schema:ethdebug/format/context/variable"
    additionalItems: false

  code:
    $ref: "schema:ethdebug/format/materials/source-range"

minProperties: 1
additionalProperties: false

examples:
  - variables:
      - identifier: x
        declaration:
          source:
            id: 5
          range:
            offset: 10
            length: 56
        type:
          kind: string
        pointer:
          location: storage
          slot: 0
    code:
      source:
        id: 5
      range:
        offset: 68
        length: 16
